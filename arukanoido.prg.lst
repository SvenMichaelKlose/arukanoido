0000: 6 0 :              vicreg_interlace_horigin        = $9000
0000: 6 6 :              vicreg_vorigin                  = $9001
0000: 6 12 :             vicreg_screenlo_columns         = $9002
0000: 6 18 :             vicreg_rasterlo_rows_charsize   = $9003
0000: 6 24 :             vicreg_rasterhi                 = $9004
0000: 6 30 :             vicreg_screenhi_charset         = $9005
0000: 6 36 :             vicreg_hpen                     = $9006
0000: 6 42 :             vicreg_vpen                     = $9007
0000: 6 48 :             vicreg_paddle1                  = $9008
0000: 6 54 :             vicreg_paddle2                  = $9009
0000: 6 60 :             vicreg_bass                     = $900a
0000: 6 66 :             vicreg_alto                     = $900b
0000: 6 72 :             vicreg_soprano                  = $900c
0000: 6 78 :             vicreg_noise                    = $900d
0000: 6 84 :             vicreg_auxcol_volume            = $900e
0000: 6 90 :             vicreg_screencol_reverse_border = $900f
0000: 6 96 :             vic_screen_1000      = %11000000
0000: 6 102 :            vic_screen_1200      = %11000000
0000: 6 108 :            vic_screen_1400      = %11010000
0000: 6 114 :            vic_screen_1600      = %11010000
0000: 6 120 :            vic_screen_1800      = %11100000
0000: 6 126 :            vic_screen_1a00      = %11100000
0000: 6 132 :            vic_screen_1c00      = %11110000
0000: 6 138 :            vic_screen_1e00      = %11110000
0000: 6 144 :            charset_upcase          = $8000
0000: 6 150 :            charset_upcase_reversed = $8400
0000: 6 156 :            charset_locase          = $8800
0000: 6 162 :            charset_locase_reversed = $8c00
0000: 6 168 :            vic_charset_upcase   = %0000
0000: 6 174 :            vic_charset_8000     = %0000
0000: 6 180 :            vic_charset_upcase_reversed = %0001
0000: 6 186 :            vic_charset_8400     = %0001
0000: 6 192 :            vic_charset_locase   = %0010
0000: 6 198 :            vic_charset_8800     = %0010
0000: 6 204 :            vic_charset_locase_reversed = %0011
0000: 6 210 :            vic_charset_8c00     = %0011
0000: 6 216 :            vic_charset_1000     = %1100
0000: 6 222 :            vic_charset_1400     = %1101
0000: 6 228 :            vic_charset_1800     = %1110
0000: 6 234 :            vic_charset_1c00_up  = %1111
0000: 6 240 :            vic_charset_1c00     = %1111
0000: 6 246 :            reverse = 8
0000: 6 252 :            multicolor = 8
0000: 6 258 :            black        = 0
0000: 6 264 :            white        = 1
0000: 6 270 :            red          = 2
0000: 6 276 :            cyan         = 3
0000: 6 282 :            purple       = 4
0000: 6 288 :            green        = 5
0000: 6 294 :            blue         = 6
0000: 6 300 :            yellow       = 7
0000: 6 306 :            orange       = 8
0000: 6 312 :            light_orange = 9
0000: 6 318 :            pink         = 10
0000: 6 324 :            light_cyan   = 11
0000: 6 330 :            light_purple = 12
0000: 6 336 :            light_green  = 13
0000: 6 342 :            light_blue   = 14
0000: 6 348 :            light_yellow = 15
0000: 6 354 :            clk_bass_pal    = 4329
0000: 6 360 :            clk_alto_pal    = 8659
0000: 6 366 :            clk_soprano_pal = 17320
0000: 6 372 :            clk_noise_pal   = 34640
0000: 6 378 :            clk_bass_ntsc    = 3995
0000: 6 384 :            clk_alto_ntsc    = 7990
0000: 6 390 :            clk_soprano_ntsc = 15980
0000: 6 396 :            clk_noise_ntsc   = 31960
0000: 6 402 :            joy_fire    = %00100000
0000: 6 408 :            joy_up      = %00000100
0000: 6 414 :            joy_down    = %00001000
0000: 6 420 :            joy_left    = %00010000
0000: 6 426 :            music_player        = $7000
0000: 6 432 :            screen       = $1000
0000: 6 438 :            charset      = $1400
0000: 6 444 :            colors       = $9400
0000: 6 450 :            screen_columns  = 15
0000: 6 456 :            screen_rows     = 32
0000: 6 462 :            screen_width    = @(* screen_columns 8)
0000: 6 468 :            screen_height   = @(* screen_rows 8)
0000: 6 474 :            num_chars           = 256
0000: 6 480 :            charsetsize         = @(* num_chars 8)
0000: 6 486 :            num_sprites         = 16
0000: 6 492 :            charsetmask         = @(-- num_chars)
0000: 6 498 :            framesize           = @(half charsetsize)
0000: 6 504 :            framemask           = @(half num_chars)
0000: 6 510 :            framechars          = @(half num_chars)
0000: 6 516 :            first_sprite_char   = 1
0000: 6 522 :            foreground          = @(+ (half framechars) (quarter framechars))
0000: 6 528 :            default_num_lifes       = 3
0000: 6 534 :            default_ball_speed      = 3
0000: 6 540 :            min_ball_speed          = 2
0000: 6 546 :            max_ball_speed          = 6
0000: 6 552 :            max_ball_speed_joystick = 3
0000: 6 558 :            default_ball_direction  = 116
0000: 6 564 :            ball_width              = 3
0000: 6 570 :            ball_height             = 5
0000: 6 576 :            vaus_edge_distraction   = 16
0000: 6 582 :            initial_delay_until_ball_is_released = $a0
0000: 6 588 :            delay_until_ball_is_released = $80
0000: 6 594 :            num_score_digits    = 7
0000: 6 600 :            score_char0         = 16    ; Digit '0' in 4x8 charset.
0000: 6 606 :                org 0
0000: 6 612 :                data
0000: 6 618 :            s:                    0 0 ; Source pointer
0000: 6 624 :            s:                    0 0 ; Source pointer
0000: 6 630 :            s:                    0 0 ; Source pointer
0000: 6 636 :            d:                    0 0 ; Destination pointer
0000: 6 642 :            d:                    0 0 ; Destination pointer
0000: 6 648 :            d:                    0 0 ; Destination pointer
0000: 6 654 :            c:                    0 0 ; Counter
0000: 6 660 :            c:                    0 0 ; Counter
0000: 6 666 :            c:                    0 0 ; Counter
0000: 6 672 :            scr:                  0 0 ; Screen pointer (line start)
0000: 6 678 :            scr:                  0 0 ; Screen pointer (line start)
0000: 6 684 :            scr:                  0 0 ; Screen pointer (line start)
0000: 6 690 :            col:                  0 0 ; Colour RAM pointer
0000: 6 696 :            col:                  0 0 ; Colour RAM pointer
0000: 6 702 :            col:                  0 0 ; Colour RAM pointer
0000: 6 708 :            scrx:                 8   ; X position
0000: 6 714 :            scrx:                 8   ; X position
0000: 6 720 :            scry:                 0   ; Y position
0000: 6 726 :            scry:                 0   ; Y position
0000: 6 732 :            curchar:              0   ; Last allocated character
0000: 6 738 :            curchar:              0   ; Last allocated character
0000: 6 744 :            curcol:               0   ; Character colour
0000: 6 750 :            curcol:               0   ; Character colour
0000: 6 756 :            bcp:                  0 0
0000: 6 762 :            bcp:                  0 0
0000: 6 768 :            bcp:                  0 0
0000: 6 774 :            bca:                  0 0
0000: 6 780 :            bca:                  0 0
0000: 6 786 :            bca:                  0 0
0000: 6 792 :            num_args:             0
0000: 6 798 :            num_args:             0
0000: 6 804 :            srx:                  0
0000: 6 810 :            srx:                  0
0000: 6 816 :            a0:                   0
0000: 6 822 :            a0:                   0
0000: 6 828 :            a1:                   0
0000: 6 834 :            a1:                   0
0000: 6 840 :            a2:                   0
0000: 6 846 :            a2:                   0
0000: 6 852 :            a3:                   0
0000: 6 858 :            a3:                   0
0000: 6 864 :            a4:                   0
0000: 6 870 :            a4:                   0
0000: 6 876 :            current_level:        0 0 ; Pointer to next level's data.
0000: 6 882 :            current_level:        0 0 ; Pointer to next level's data.
0000: 6 888 :            current_level:        0 0 ; Pointer to next level's data.
0000: 6 894 :            tmp:                  0
0000: 6 900 :            tmp:                  0
0000: 6 906 :            tmp2:                 0
0000: 6 912 :            tmp2:                 0
0000: 6 918 :            tmp3:                 0
0000: 6 924 :            tmp3:                 0
0000: 6 930 :            p_x:
0000: 6 936 :            add_sprite_x:         0
0000: 6 942 :            add_sprite_x:         0
0000: 6 948 :            p_y:
0000: 6 954 :            add_sprite_y:
0000: 6 960 :            draw_sprite_x:        0
0000: 6 966 :            draw_sprite_x:        0
0000: 6 972 :            call_controllers_x:   0
0000: 6 978 :            call_controllers_x:   0
0000: 6 984 :            next_sprite_char:     0   ; Next free character for sprites.
0000: 6 990 :            next_sprite_char:     0   ; Next free character for sprites.
0000: 6 996 :            sprite_shift_y:       0   ; Number of character line where sprite starts.
0000: 6 1002 :           sprite_shift_y:       0   ; Number of character line where sprite starts.
0000: 6 1008 :           sprite_data_top:      0   ; Start of sprite data in upper chars.
0000: 6 1014 :           sprite_data_top:      0   ; Start of sprite data in upper chars.
0000: 6 1020 :           sprite_data_bottom:   0   ; Start of sprite data in lower chars.
0000: 6 1026 :           sprite_data_bottom:   0   ; Start of sprite data in lower chars.
0000: 6 1032 :           sprite_height_top:    0   ; Number of sprite lines in upper chars.
0000: 6 1038 :           sprite_height_top:    0   ; Number of sprite lines in upper chars.
0000: 6 1044 :           spriteframe:          0   ; Character offset into lower or upper half of charset.
0000: 6 1050 :           spriteframe:          0   ; Character offset into lower or upper half of charset.
0000: 6 1056 :           sprite_rr:            0   ; Round-robin sprite allocation index.
0000: 6 1062 :           sprite_rr:            0   ; Round-robin sprite allocation index.
0000: 6 1068 :           foreground_collision: 0   ; Set if a sprite collision has been detected.
0000: 6 1074 :           foreground_collision: 0   ; Set if a sprite collision has been detected.
0000: 6 1080 :           mode_laser      = 1
0000: 6 1086 :           mode_catching   = 2
0000: 6 1092 :           mode_disruption = 3
0000: 6 1098 :           mode_extended   = 4
0000: 6 1104 :           mode:                 0
0000: 6 1110 :           mode:                 0
0000: 6 1116 :           mode_break:           0
0000: 6 1122 :           mode_break:           0
0000: 6 1128 :           current_bonus:        0
0000: 6 1134 :           current_bonus:        0
0000: 6 1140 :           side_degrees:         0
0000: 6 1146 :           side_degrees:         0
0000: 6 1152 :           caught_ball:          0
0000: 6 1158 :           caught_ball:          0
0000: 6 1164 :           ball_release_timer:   0
0000: 6 1170 :           ball_release_timer:   0
0000: 6 1176 :           reflections_since_last_vaus_hit: 0
0000: 6 1182 :           reflections_since_last_vaus_hit: 0
0000: 6 1188 :           vaus_width:           0
0000: 6 1194 :           vaus_width:           0
0000: 6 1200 :           level:                0
0000: 6 1206 :           level:                0
0000: 6 1212 :           bricks_left:          0
0000: 6 1218 :           bricks_left:          0
0000: 6 1224 :           bricks_until_bonus:   0
0000: 6 1230 :           bricks_until_bonus:   0
0000: 6 1236 :           num_obstacles:        0
0000: 6 1242 :           num_obstacles:        0
0000: 6 1248 :           joystick_status:      0
0000: 6 1254 :           joystick_status:      0
0000: 6 1260 :           last_random_value:    0   ; Random number generator's last returned value.
0000: 6 1266 :           last_random_value:    0   ; Random number generator's last returned value.
0000: 6 1272 :           framecounter:         0 0
0000: 6 1278 :           framecounter:         0 0
0000: 6 1284 :           framecounter:         0 0
0000: 6 1290 :           lifes:                0
0000: 6 1296 :           lifes:                0
0000: 6 1302 :           balls:                0
0000: 6 1308 :           balls:                0
0000: 6 1314 :           is_running_game:      0
0000: 6 1320 :           is_running_game:      0
0000: 6 1326 :           has_moved_sprites:    0
0000: 6 1332 :           has_moved_sprites:    0
0000: 6 1338 :           ball_speed:           0
0000: 6 1344 :           ball_speed:           0
0000: 6 1350 :           is_firing:            0   ; Laser interval countdown.
0000: 6 1356 :           is_firing:            0   ; Laser interval countdown.
0000: 6 1362 :           is_using_paddle:      0
0000: 6 1368 :           is_using_paddle:      0
0000: 6 1374 :           sfx_reflection:       0
0000: 6 1380 :           sfx_reflection:       0
0000: 6 1386 :           snd_reflection:       0
0000: 6 1392 :           snd_reflection:       0
0000: 6 1398 :           old_paddle_value:     0
0000: 6 1404 :           old_paddle_value:     0
0000: 6 1410 :           digisound_counter:    0 0
0000: 6 1416 :           digisound_counter:    0 0
0000: 6 1422 :           digisound_counter:    0 0
0000: 6 1428 :           has_collision:        0                                                               
0000: 6 1434 :           has_collision:        0                                                               
0000: 6 1440 :           ball_x:               0
0000: 6 1446 :           ball_x:               0
0000: 6 1452 :           ball_y:               0
0000: 6 1458 :           ball_y:               0
0000: 6 1464 :           current_half:         0
0000: 6 1470 :           current_half:         0
0000: 6 1476 :           bricks_in_line:       0
0000: 6 1482 :           bricks_in_line:       0
0000: 6 1488 :           has_hit_brick:        0
0000: 6 1494 :           has_hit_brick:        0
0000: 6 1500 :           has_hit_golden_brick: 0
0000: 6 1506 :           has_hit_golden_brick: 0
0000: 6 1512 :           has_hit_vaus:         0
0000: 6 1518 :           has_hit_vaus:         0
0000: 6 1524 :           num_brick_hits:       0
0000: 6 1530 :           num_brick_hits:       0
0000: 6 1536 :           laser_has_hit:        0   ; For the laser controller to remember if it hit one the left.
0000: 6 1542 :           laser_has_hit:        0   ; For the laser controller to remember if it hit one the left.
0000: 6 1548 :           is_testing_laser_hit: 0
0000: 6 1554 :           is_testing_laser_hit: 0
0000: 6 1560 :           has_new_score:        0
0000: 6 1566 :           has_new_score:        0
0000: 6 1572 :           has_hiscore:          0
0000: 6 1578 :           has_hiscore:          0
0000: 6 1584 :           score:      fill num_score_digits
0000: 6 1590 :           score:      fill num_score_digits
0000: 6 1596 :           sprites_x:          fill num_sprites  ; X positions.
0000: 6 1602 :           sprites_x:          fill num_sprites  ; X positions.
0000: 6 1608 :           sprites_y:          fill num_sprites  ; Y positions.
0000: 6 1614 :           sprites_y:          fill num_sprites  ; Y positions.
0000: 6 1620 :           sprites_i:          fill num_sprites  ; Flags.
0000: 6 1626 :           sprites_i:          fill num_sprites  ; Flags.
0000: 6 1632 :           sprites_c:          fill num_sprites  ; Colors.
0000: 6 1638 :           sprites_c:          fill num_sprites  ; Colors.
0000: 6 1644 :           sprites_l:          fill num_sprites  ; Low character addresses.
0000: 6 1650 :           sprites_l:          fill num_sprites  ; Low character addresses.
0000: 6 1656 :           sprites_fl:         fill num_sprites  ; Function controlling the sprite (low).
0000: 6 1662 :           sprites_fl:         fill num_sprites  ; Function controlling the sprite (low).
0000: 6 1668 :           sprites_fh:         fill num_sprites  ; Function controlling the sprite (high).
0000: 6 1674 :           sprites_fh:         fill num_sprites  ; Function controlling the sprite (high).
0000: 6 1680 :           sprites_dimensions: fill num_sprites  ; %0000rrcc
0000: 6 1686 :           sprites_dimensions: fill num_sprites  ; %0000rrcc
0000: 6 1692 :           sprites_d:          fill num_sprites  ; Whatever the controllers want.
0000: 6 1698 :           sprites_d:          fill num_sprites  ; Whatever the controllers want.
0000: 6 1704 :               @(check-zeropage-size (- #x00fc num_score_digits))
0000: 6 1710 :               org @(- #x00fc num_score_digits)
0000: 6 1716 :           hiscore:    fill num_score_digits
0000: 6 1722 :           hiscore:    fill num_score_digits
0000: 6 1728 :               org $200
0000: 6 1734 :           sprites_dx:     fill num_sprites ; Whatever the controllers want.
0000: 6 1740 :           sprites_dx:     fill num_sprites ; Whatever the controllers want.
0000: 6 1746 :           sprites_dy:     fill num_sprites ; Whatever the controllers want.
0000: 6 1752 :           sprites_dy:     fill num_sprites ; Whatever the controllers want.
0000: 6 1758 :           sprites_ox:     fill num_sprites ; Former X positions for cleaning up.
0000: 6 1764 :           sprites_ox:     fill num_sprites ; Former X positions for cleaning up.
0000: 6 1770 :           sprites_oy:     fill num_sprites ; Former Y positions for cleaning up.
0000: 6 1776 :           sprites_oy:     fill num_sprites ; Former Y positions for cleaning up.
0000: 6 1782 :           sprites_iw:     fill num_sprites ; Width in chars.
0000: 6 1788 :           sprites_iw:     fill num_sprites ; Width in chars.
0000: 6 1794 :           sprites_ih:     fill num_sprites ; Height in rows.
0000: 6 1800 :           sprites_ih:     fill num_sprites ; Height in rows.
0000: 6 1806 :           sprites_w:      fill num_sprites ; Total width in chars.
0000: 6 1812 :           sprites_w:      fill num_sprites ; Total width in chars.
0000: 6 1818 :           sprites_h:      fill num_sprites ; Total height in rows.
0000: 6 1824 :           sprites_h:      fill num_sprites ; Total height in rows.
0000: 6 1830 :           sprites_ow:     fill num_sprites ; Width in chars.
0000: 6 1836 :           sprites_ow:     fill num_sprites ; Width in chars.
0000: 6 1842 :           sprites_oh:     fill num_sprites ; Height in rows.
0000: 6 1848 :           sprites_oh:     fill num_sprites ; Height in rows.
0000: 6 1854 :           sprite_char:        0   ; First char.
0000: 6 1860 :           sprite_char:        0   ; First char.
0000: 6 1866 :           sprite_x:           0   ; X position (text).
0000: 6 1872 :           sprite_x:           0   ; X position (text).
0000: 6 1878 :           sprite_y:           0   ; Y position (text).
0000: 6 1884 :           sprite_y:           0   ; Y position (text).
0000: 6 1890 :           sprite_cols:        0   ; total width in chars.
0000: 6 1896 :           sprite_cols:        0   ; total width in chars.
0000: 6 1902 :           sprite_inner_cols:  0   ; width in chars.
0000: 6 1908 :           sprite_inner_cols:  0   ; width in chars.
0000: 6 1914 :           sprite_rows:        0   ; total height in chars.
0000: 6 1920 :           sprite_rows:        0   ; total height in chars.
0000: 6 1926 :           sprite_inner_rows:  0   ; height in chars.
0000: 6 1932 :           sprite_inner_rows:  0   ; height in chars.
0000: 6 1938 :           sprite_width:       0   ; Width in pixels.
0000: 6 1944 :           sprite_width:       0   ; Width in pixels.
0000: 6 1950 :           sprite_lines:       0   ; total height in lines.
0000: 6 1956 :           sprite_lines:       0   ; total height in lines.
0000: 6 1962 :           sprite_inner_lines: 0   ; height in lines.
0000: 6 1968 :           sprite_inner_lines: 0   ; height in lines.
0000: 6 1974 :               end
0000: 6 1980 :           mg_s    = s
0000: 6 1986 :           mg_d    = d
0000: 6 1992 :           mg_c    = scr
0000: 6 1998 :               org @(- (basic-start-address *model*) 2)
0000: 6 2004 :           load_address:
0001: 6 2010 : 01            @(low (basic-start-address *model*))
0002: 6 2016 : 12            @(high (basic-start-address *model*))
0003: 6 2022 : 0b            @(unless (first-pass?) (low basic_end))
0004: 6 2028 : 12            @(unless (first-pass?) (high basic_end))
0005: 6 2034 : 01            $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
0006: 6 2040 : 00            $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
0007: 6 2046 : 9e            $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
000b: 6 2052 : 34 36 32 31    $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
000c: 6 2058 : 00            $01 $00 $9e @(unless (first-pass?) (princ main nil)) 0
000c: 6 2064 :           basic_end:
000d: 6 2070 : 00            $00 $00
000e: 6 2076 : 00            $00 $00
000e: 6 2082 :           if @*shadowvic?*
000e: 6 2088 :               org $2000
000e: 6 2094 :           end
000e: 6 2100 :           if @(not *shadowvic?*)
000e: 6 2106 :           relocated_start     = $2000
000e: 6 2112 :           relocation_offset   = @(- relocated_start loaded_start)
000e: 6 2118 :           loaded_end          = @(- relocated_end relocation_offset)
000e: 6 2124 :           relocation_size     = @(- loaded_end loaded_start)
000e: 6 2130 :           end
000e: 6 2136 :           main:
120d: 2 2142 : 78            sei
120e: 2 2144 : a9 7f         lda #$7f
1210: 4 2146 : 8d 2e 91      sta $912e       ; Disable and acknowledge interrupts.
1213: 4 2150 : 8d 2d 91      sta $912d
1216: 4 2154 : 8d 1e 91      sta $911e       ; Disable restore key NMIs.
1219: 2 2158 : a9 00         lda #0
121b: 4 2160 : 8d 02 90      sta $9002
121b: 4 2164 :           if @(not *shadowvic?*)
121b: 4 2168 :           base_loaded_end = @(- loaded_end (low (-- relocation_size)))
121b: 4 2172 :           base_relocated_end = @(- relocated_end (low (-- relocation_size)))
121e: 2 2176 : a9 57         lda #<base_loaded_end
1220: 3 2178 : 85 00         sta s
1222: 2 2181 : a9 40         lda #>base_loaded_end
1224: 3 2183 : 85 01         sta @(++ s)
1226: 2 2186 : a9 01         lda #<base_relocated_end
1228: 3 2188 : 85 02         sta d
122a: 2 2191 : a9 4e         lda #>base_relocated_end
122c: 3 2193 : 85 03         sta @(++ d)
122e: 2 2196 : a2 9b         ldx #@(low relocation_size)
1230: 2 2198 : a9 2e         lda #@(high relocation_size)
1232: 3 2200 : 85 05         sta @(++ c)
1234: 2 2203 : a0 9a         ldy #@(low (-- relocation_size))
1234: 2 2205 :           l:  inc $900f
1236: 6 2207 : ee 0f 90  l:  inc $900f
1239: 5 2213 : b1 00         lda (s),y
123b: 5 2218 : 91 02         sta (d),y
123d: 2 2223 : 88            dey
123e: 2 2225 : c0 ff         cpy #255
1240: 2 2227 : d0 04         bne +n
1242: 5 2229 : c6 01         dec @(++ s)
1244: 5 2234 : c6 03         dec @(++ d)
1244: 5 2239 :           n:
1246: 2 2244 : ca            dex
1247: 2 2246 : e0 ff         cpx #255
1249: 2 2248 : d0 eb         bne -l
124b: 5 2250 : c6 05         dec @(++ c)
124d: 3 2255 : a5 05         lda @(++ c)
124f: 2 2258 : c9 ff         cmp #255
1251: 2 2260 : d0 e3         bne -l
1253: 4 2262 : 4c 00 20      jmp relocated_start
1253: 4 2266 :           end
1253: 4 2270 :           loaded_start:
1253: 4 2274 :           if @(not *shadowvic?*)
1253: 4 2278 :               org relocated_start
1253: 4 2282 :           end
1253: 4 2286 :           music_player_size = @(length (fetch-file "sound-beamrider/MusicTester.prg"))
1253: 4 2290 :           loaded_music_player_end = @(+ loaded_music_player (-- music_player_size))
1253: 4 2294 :           music_player_end = @(+ music_player (-- music_player_size))
1253: 4 2298 :           base_loaded_music_player_end = @(- loaded_music_player_end (low (-- music_player_size)))
1253: 4 2302 :           base_relocated_music_player_end = @(- music_player_end (low (-- music_player_size)))
2000: 2 2306 : a9 ee         lda #<base_loaded_music_player_end
2002: 3 2308 : 85 00         sta s
2004: 2 2311 : a9 4e         lda #>base_loaded_music_player_end
2006: 3 2313 : 85 01         sta @(++ s)
2008: 2 2316 : a9 00         lda #<base_relocated_music_player_end
200a: 3 2318 : 85 02         sta d
200c: 2 2321 : a9 7a         lda #>base_relocated_music_player_end
200e: 3 2323 : 85 03         sta @(++ d)
2010: 2 2326 : a2 0d         ldx #@(low music_player_size)
2012: 2 2328 : a9 0a         lda #@(high music_player_size)
2014: 3 2330 : 85 05         sta @(++ c)
2016: 2 2333 : a0 0c         ldy #@(low (-- music_player_size))
2016: 2 2335 :           l:  inc $900f
2018: 6 2337 : ee 0f 90  l:  inc $900f
201b: 5 2343 : b1 00         lda (s),y
201d: 5 2348 : 91 02         sta (d),y
201f: 2 2353 : 88            dey
2020: 2 2355 : c0 ff         cpy #255
2022: 2 2357 : d0 04         bne +n
2024: 5 2359 : c6 01         dec @(++ s)
2026: 5 2364 : c6 03         dec @(++ d)
2026: 5 2369 :           n:
2028: 2 2374 : ca            dex
2029: 2 2376 : e0 ff         cpx #255
202b: 2 2378 : d0 eb         bne -l
202d: 5 2380 : c6 05         dec @(++ c)
202f: 3 2385 : a5 05         lda @(++ c)
2031: 2 2388 : c9 ff         cmp #255
2033: 2 2390 : d0 e3         bne -l
2035: 4 2392 : 4c 7a 39      jmp start       ; Start the game…
2035: 4 2396 :           bg_start = @(* (/ num_chars 8) 7)
2035: 4 2400 :           gfx_background:
2035: 4 2404 :           bg_brick_orange = @(+ bg_start 0)
2036: 4 2408 : 54        %01010100
2037: 4 2412 : a8        %10101000
2038: 4 2416 : 54        %01010100
2039: 4 2420 : a8        %10101000
203a: 4 2424 : 54        %01010100
203b: 4 2428 : a8        %10101000
203c: 4 2432 : 54        %01010100
203d: 4 2436 : 00        %00000000
203d: 4 2440 :           bg_brick = @(+ bg_start 1)
203e: 4 2444 : fe        %11111110
203f: 4 2448 : fe        %11111110
2040: 4 2452 : fe        %11111110
2041: 4 2456 : fe        %11111110
2042: 4 2460 : fe        %11111110
2043: 4 2464 : fe        %11111110
2044: 4 2468 : fe        %11111110
2045: 4 2472 : 00        %00000000
2045: 4 2476 :           bg_brick_special1 = @(+ bg_start 2)
2046: 4 2480 : aa        %10101010
2047: 4 2484 : fe        %11111110
2048: 4 2488 : aa        %10101010
2049: 4 2492 : fe        %11111110
204a: 4 2496 : aa        %10101010
204b: 4 2500 : fe        %11111110
204c: 4 2504 : aa        %10101010
204d: 4 2508 : 00        %00000000
204d: 4 2512 :           bg_brick_special2 = @(+ bg_start 3)
204e: 4 2516 : aa        %10101010
204f: 4 2520 : fe        %11111110
2050: 4 2524 : aa        %10101010
2051: 4 2528 : 54        %01010100
2052: 4 2532 : aa        %10101010
2053: 4 2536 : fe        %11111110
2054: 4 2540 : aa        %10101010
2055: 4 2544 : 00        %00000000
2055: 4 2548 :           bg_brick_special3 = @(+ bg_start 4)
2056: 4 2552 : aa        %10101010
2057: 4 2556 : 54        %01010100
2058: 4 2560 : aa        %10101010
2059: 4 2564 : fe        %11111110
205a: 4 2568 : aa        %10101010
205b: 4 2572 : 54        %01010100
205c: 4 2576 : aa        %10101010
205d: 4 2580 : 00        %00000000
205d: 4 2584 :           bg_brick_special4 = @(+ bg_start 5)
205e: 4 2588 : aa        %10101010
205f: 4 2592 : 54        %01010100
2060: 4 2596 : aa        %10101010
2061: 4 2600 : 54        %01010100
2062: 4 2604 : aa        %10101010
2063: 4 2608 : 54        %01010100
2064: 4 2612 : aa        %10101010
2065: 4 2616 : 00        %00000000
2065: 4 2620 :           bg_side = @(+ bg_start 6)
2066: 4 2624 : 3c        %00111100
2067: 4 2628 : bc        %10111100
2068: 4 2632 : bf        %10111111
2069: 4 2636 : bc        %10111100
206a: 4 2640 : bf        %10111111
206b: 4 2644 : bc        %10111100
206c: 4 2648 : bf        %10111111
206d: 4 2652 : bc        %10111100
206e: 4 2656 : bf        %10111111
206f: 4 2660 : 30        %00110000
2070: 4 2664 : bf        %10111111
2071: 4 2668 : 30        %00110000
2072: 4 2672 : bf        %10111111
2073: 4 2676 : 30        %00110000
2074: 4 2680 : bf        %10111111
2075: 4 2684 : 30        %00110000
2076: 4 2688 : bc        %10111100
2077: 4 2692 : bf        %10111111
2078: 4 2696 : bc        %10111100
2079: 4 2700 : bf        %10111111
207a: 4 2704 : bc        %10111100
207b: 4 2708 : bf        %10111111
207c: 4 2712 : bc        %10111100
207d: 4 2716 : 3c        %00111100
207e: 4 2720 : 00        %00000000
207f: 4 2724 : 2c        %00101100
2080: 4 2728 : 2c        %00101100
2081: 4 2732 : 2c        %00101100
2082: 4 2736 : 2c        %00101100
2083: 4 2740 : 2c        %00101100
2084: 4 2744 : 2c        %00101100
2085: 4 2748 : 2c        %00101100
2086: 4 2752 : 2c        %00101100
2087: 4 2756 : 2c        %00101100
2088: 4 2760 : 2c        %00101100
2089: 4 2764 : 2c        %00101100
208a: 4 2768 : 2c        %00101100
208b: 4 2772 : 2c        %00101100
208c: 4 2776 : 2c        %00101100
208d: 4 2780 : 00        %00000000
208d: 4 2784 :           bg_corner_left = @(+ bg_start 11)
208e: 4 2788 : 00        %00000000
208f: 4 2792 : 0a        %00001010
2090: 4 2796 : 2f        %00101111
2091: 4 2800 : 2f        %00101111
2092: 4 2804 : 2f        %00101111
2093: 4 2808 : 2f        %00101111
2094: 4 2812 : 2f        %00101111
2095: 4 2816 : 03        %00000011
2095: 4 2820 :           bg_top_1 = @(+ bg_start 12)
2096: 4 2824 : 00        %00000000
2097: 4 2828 : aa        %10101010
2098: 4 2832 : ff        %11111111
2099: 4 2836 : ff        %11111111
209a: 4 2840 : ff        %11111111
209b: 4 2844 : ff        %11111111
209c: 4 2848 : 00        %00000000
209d: 4 2852 : 00        %00000000
209d: 4 2856 :           bg_top_2 = @(+ bg_start 13)
209e: 4 2860 : 2a        %00101010
209f: 4 2864 : bc        %10111100
20a0: 4 2868 : ff        %11111111
20a1: 4 2872 : fc        %11111100
20a2: 4 2876 : ff        %11111111
20a3: 4 2880 : fc        %11111100
20a4: 4 2884 : 3f        %00111111
20a5: 4 2888 : 00        %00000000
20a5: 4 2892 :           bg_top_3 = @(+ bg_start 14)
20a6: 4 2896 : a8        %10101000
20a7: 4 2900 : 3e        %00111110
20a8: 4 2904 : ff        %11111111
20a9: 4 2908 : 3f        %00111111
20aa: 4 2912 : ff        %11111111
20ab: 4 2916 : 3f        %00111111
20ac: 4 2920 : fc        %11111100
20ad: 4 2924 : 00        %00000000
20ad: 4 2928 :           bg_corner_right = @(+ bg_start 15)
20ae: 4 2932 : 00        %00000000
20af: 4 2936 : a0        %10100000
20b0: 4 2940 : f8        %11111000
20b1: 4 2944 : fc        %11111100
20b2: 4 2948 : f8        %11111000
20b3: 4 2952 : fc        %11111100
20b4: 4 2956 : fc        %11111100
20b5: 4 2960 : c0        %11000000
20b5: 4 2964 :           bg_minivaus = @(+ bg_start 16)
20b6: 4 2968 : 74        %01110100
20b7: 4 2972 : a8        %10101000
20b8: 4 2976 : 74        %01110100
20b9: 4 2980 : 74        %01110100
20ba: 4 2984 : 00        %00000000
20bb: 4 2988 : 00        %00000000
20bc: 4 2992 : 00        %00000000
20bd: 4 2996 : 00        %00000000
20bd: 4 3000 :           gfx_background_end:
20bd: 4 3004 :           vaus_middle =   2
20bd: 4 3008 :           vaus_right =    3
20bd: 4 3012 :           ball =          4
20bd: 4 3016 :           laser =         5
20bd: 4 3020 :           bonus_laser =   6
20fd: 4 3024 : 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00    fill @(- 256 (low *pc*))
20fd: 4 3028 :           sprite_gfx:
20fd: 4 3032 :           vaus:
20fe: 4 3036 : 1f            %00011111
20ff: 4 3040 : 2a            %00101010
2100: 4 3044 : 1f            %00011111
2101: 4 3048 : df            %11011111
2102: 4 3052 : df            %11011111
2103: 4 3056 : 10            %00010000
2104: 4 3060 : 1f            %00011111
2105: 4 3064 : 10            %00010000
2106: 4 3068 : f4            %11110100
2107: 4 3072 : a8            %10101000
2108: 4 3076 : f4            %11110100
2109: 4 3080 : f7            %11110111
210a: 4 3084 : f7            %11110111
210b: 4 3088 : 04            %00000100
210c: 4 3092 : f4            %11110100
210d: 4 3096 : 04            %00000100
210d: 4 3100 :           vaus_extended:
210e: 4 3104 : 1f            %00011111
210f: 4 3108 : 2a            %00101010
2110: 4 3112 : 1f            %00011111
2111: 4 3116 : df            %11011111
2112: 4 3120 : df            %11011111
2113: 4 3124 : 10            %00010000
2114: 4 3128 : 1f            %00011111
2115: 4 3132 : 10            %00010000
2116: 4 3136 : ff            %11111111
2117: 4 3140 : aa            %10101010
2118: 4 3144 : ff            %11111111
2119: 4 3148 : ff            %11111111
211a: 4 3152 : ff            %11111111
211b: 4 3156 : 00            %00000000
211c: 4 3160 : ff            %11111111
211d: 4 3164 : 00            %00000000
211e: 4 3168 : f4            %11110100
211f: 4 3172 : a8            %10101000
2120: 4 3176 : f4            %11110100
2121: 4 3180 : f7            %11110111
2122: 4 3184 : f7            %11110111
2123: 4 3188 : 04            %00000100
2124: 4 3192 : f4            %11110100
2125: 4 3196 : 04            %00000100
2125: 4 3200 :           vaus_laser:
2126: 4 3204 : 3f            %00111111
2127: 4 3208 : 2a            %00101010
2128: 4 3212 : 3f            %00111111
2129: 4 3216 : ff            %11111111
212a: 4 3220 : ff            %11111111
212b: 4 3224 : 30            %00110000
212c: 4 3228 : 3f            %00111111
212d: 4 3232 : 30            %00110000
212e: 4 3236 : fc            %11111100
212f: 4 3240 : a8            %10101000
2130: 4 3244 : fc            %11111100
2131: 4 3248 : ff            %11111111
2132: 4 3252 : ff            %11111111
2133: 4 3256 : 0c            %00001100
2134: 4 3260 : fc            %11111100
2135: 4 3264 : 0c            %00001100
2135: 4 3268 :           ball:
2136: 4 3272 : 40            %01000000
2137: 4 3276 : e0            %11100000
2138: 4 3280 : e0            %11100000
2139: 4 3284 : e0            %11100000
213a: 4 3288 : 40            %01000000
213b: 4 3292 : 00            %00000000
213c: 4 3296 : 00            %00000000
213d: 4 3300 : 00            %00000000
213d: 4 3304 :           ball_caught:
213e: 4 3308 : 00            %00000000
213f: 4 3312 : 00            %00000000
2140: 4 3316 : 00            %00000000
2141: 4 3320 : 40            %01000000
2142: 4 3324 : e0            %11100000
2143: 4 3328 : e0            %11100000
2144: 4 3332 : e0            %11100000
2145: 4 3336 : 40            %01000000
2145: 4 3340 :           laser:
2146: 4 3344 : c3            %11000011
2147: 4 3348 : 81            %10000001
2148: 4 3352 : c3            %11000011
2149: 4 3356 : 81            %10000001
214a: 4 3360 : c3            %11000011
214b: 4 3364 : 81            %10000001
214c: 4 3368 : c3            %11000011
214d: 4 3372 : 81            %10000001
214d: 4 3376 :           bonus_l:
214e: 4 3380 : 14            %00010100
214f: 4 3384 : 55            %01010101
2150: 4 3388 : 65            %01100101
2151: 4 3392 : 65            %01100101
2152: 4 3396 : 65            %01100101
2153: 4 3400 : 65            %01100101
2154: 4 3404 : 69            %01101001
2155: 4 3408 : 14            %00010100
2155: 4 3412 :           bonus_e:
2156: 4 3416 : 28            %00101000
2157: 4 3420 : aa            %10101010
2158: 4 3424 : be            %10111110
2159: 4 3428 : ba            %10111010
215a: 4 3432 : be            %10111110
215b: 4 3436 : ba            %10111010
215c: 4 3440 : be            %10111110
215d: 4 3444 : 28            %00101000
215d: 4 3448 :           bonus_c:
215e: 4 3452 : 28            %00101000
215f: 4 3456 : aa            %10101010
2160: 4 3460 : be            %10111110
2161: 4 3464 : ba            %10111010
2162: 4 3468 : ba            %10111010
2163: 4 3472 : ba            %10111010
2164: 4 3476 : be            %10111110
2165: 4 3480 : 28            %00101000
2165: 4 3484 :           bonus_s:
2166: 4 3488 : 28            %00101000
2167: 4 3492 : aa            %10101010
2168: 4 3496 : be            %10111110
2169: 4 3500 : ba            %10111010
216a: 4 3504 : be            %10111110
216b: 4 3508 : ae            %10101110
216c: 4 3512 : be            %10111110
216d: 4 3516 : 28            %00101000
216d: 4 3520 :           bonus_b:
216e: 4 3524 : 28            %00101000
216f: 4 3528 : aa            %10101010
2170: 4 3532 : be            %10111110
2171: 4 3536 : be            %10111110
2172: 4 3540 : ba            %10111010
2173: 4 3544 : be            %10111110
2174: 4 3548 : be            %10111110
2175: 4 3552 : 28            %00101000
2175: 4 3556 :           bonus_d:
2176: 4 3560 : 28            %00101000
2177: 4 3564 : aa            %10101010
2178: 4 3568 : 9a            %10011010
2179: 4 3572 : 96            %10010110
217a: 4 3576 : 96            %10010110
217b: 4 3580 : 96            %10010110
217c: 4 3584 : 9a            %10011010
217d: 4 3588 : 28            %00101000
217d: 4 3592 :           bonus_p:
217e: 4 3596 : 28            %00101000
217f: 4 3600 : aa            %10101010
2180: 4 3604 : 96            %10010110
2181: 4 3608 : 96            %10010110
2182: 4 3612 : 96            %10010110
2183: 4 3616 : 9a            %10011010
2184: 4 3620 : 9a            %10011010
2185: 4 3624 : 28            %00101000
2185: 4 3628 :           obstacle_ball:
2186: 4 3632 : 18            %00011000
2187: 4 3636 : 24            %00100100
2188: 4 3640 : 42            %01000010
2189: 4 3644 : 42            %01000010
218a: 4 3648 : 42            %01000010
218b: 4 3652 : 81            %10000001
218c: 4 3656 : 81            %10000001
218d: 4 3660 : 81            %10000001
218e: 4 3664 : 81            %10000001
218f: 4 3668 : 81            %10000001
2190: 4 3672 : 81            %10000001
2191: 4 3676 : 42            %01000010
2192: 4 3680 : 42            %01000010
2193: 4 3684 : 42            %01000010
2194: 4 3688 : 24            %00100100
2195: 4 3692 : 18            %00011000
2195: 4 3696 :           sprite_gfx_end:
2195: 4 3700 :           charset4x8:
2196: 4 3704 : 00            %0000
2197: 4 3708 : 00            %0000
2198: 4 3712 : 00            %0000
2199: 4 3716 : 00            %0000
219a: 4 3720 : 00            %0000
219b: 4 3724 : 00            %0000
219c: 4 3728 : 00            %0000
219d: 4 3732 : 00            %0000
219e: 4 3736 : 00            %0000
219f: 4 3740 : 08            %1000
21a0: 4 3744 : 08            %1000
21a1: 4 3748 : 08            %1000
21a2: 4 3752 : 08            %1000
21a3: 4 3756 : 00            %0000
21a4: 4 3760 : 08            %1000
21a5: 4 3764 : 00            %0000
21a6: 4 3768 : 00            %0000
21a7: 4 3772 : 0a            %1010
21a8: 4 3776 : 0a            %1010
21a9: 4 3780 : 00            %0000
21aa: 4 3784 : 00            %0000
21ab: 4 3788 : 00            %0000
21ac: 4 3792 : 00            %0000
21ad: 4 3796 : 00            %0000
21ae: 4 3800 : 00            %0000
21af: 4 3804 : 05            %0101
21b0: 4 3808 : 0f            %1111
21b1: 4 3812 : 05            %0101
21b2: 4 3816 : 05            %0101
21b3: 4 3820 : 0f            %1111
21b4: 4 3824 : 05            %0101
21b5: 4 3828 : 00            %0000
21b6: 4 3832 : 04            %0100
21b7: 4 3836 : 06            %0110
21b8: 4 3840 : 08            %1000
21b9: 4 3844 : 04            %0100
21ba: 4 3848 : 02            %0010
21bb: 4 3852 : 0c            %1100
21bc: 4 3856 : 04            %0100
21bd: 4 3860 : 00            %0000
21be: 4 3864 : 00            %0000
21bf: 4 3868 : 00            %0000
21c0: 4 3872 : 00            %0000
21c1: 4 3876 : 09            %1001
21c2: 4 3880 : 02            %0010
21c3: 4 3884 : 04            %0100
21c4: 4 3888 : 09            %1001
21c5: 4 3892 : 00            %0000
21c6: 4 3896 : 00            %0000
21c7: 4 3900 : 04            %0100
21c8: 4 3904 : 08            %1000
21c9: 4 3908 : 05            %0101
21ca: 4 3912 : 0a            %1010
21cb: 4 3916 : 0a            %1010
21cc: 4 3920 : 05            %0101
21cd: 4 3924 : 00            %0000
21ce: 4 3928 : 00            %0000
21cf: 4 3932 : 04            %0100
21d0: 4 3936 : 08            %1000
21d1: 4 3940 : 00            %0000
21d2: 4 3944 : 00            %0000
21d3: 4 3948 : 00            %0000
21d4: 4 3952 : 00            %0000
21d5: 4 3956 : 00            %0000
21d6: 4 3960 : 02            %0010
21d7: 4 3964 : 04            %0100
21d8: 4 3968 : 08            %1000
21d9: 4 3972 : 08            %1000
21da: 4 3976 : 08            %1000
21db: 4 3980 : 04            %0100
21dc: 4 3984 : 02            %0010
21dd: 4 3988 : 00            %0000
21de: 4 3992 : 08            %1000
21df: 4 3996 : 04            %0100
21e0: 4 4000 : 02            %0010
21e1: 4 4004 : 02            %0010
21e2: 4 4008 : 02            %0010
21e3: 4 4012 : 04            %0100
21e4: 4 4016 : 08            %1000
21e5: 4 4020 : 00            %0000
21e6: 4 4024 : 00            %0000
21e7: 4 4028 : 0a            %1010
21e8: 4 4032 : 04            %0100
21e9: 4 4036 : 0e            %1110
21ea: 4 4040 : 0e            %1110
21eb: 4 4044 : 04            %0100
21ec: 4 4048 : 0a            %1010
21ed: 4 4052 : 00            %0000
21ee: 4 4056 : 00            %0000
21ef: 4 4060 : 04            %0100
21f0: 4 4064 : 04            %0100
21f1: 4 4068 : 0e            %1110
21f2: 4 4072 : 04            %0100
21f3: 4 4076 : 04            %0100
21f4: 4 4080 : 00            %0000
21f5: 4 4084 : 00            %0000
21f6: 4 4088 : 00            %0000
21f7: 4 4092 : 00            %0000
21f8: 4 4096 : 00            %0000
21f9: 4 4100 : 00            %0000
21fa: 4 4104 : 00            %0000
21fb: 4 4108 : 00            %0000
21fc: 4 4112 : 04            %0100
21fd: 4 4116 : 08            %1000
21fe: 4 4120 : 00            %0000
21ff: 4 4124 : 00            %0000
2200: 4 4128 : 00            %0000
2201: 4 4132 : 0e            %1110
2202: 4 4136 : 00            %0000
2203: 4 4140 : 00            %0000
2204: 4 4144 : 00            %0000
2205: 4 4148 : 00            %0000
2206: 4 4152 : 00            %0000
2207: 4 4156 : 00            %0000
2208: 4 4160 : 00            %0000
2209: 4 4164 : 00            %0000
220a: 4 4168 : 00            %0000
220b: 4 4172 : 00            %0000
220c: 4 4176 : 08            %1000
220d: 4 4180 : 00            %0000
220e: 4 4184 : 00            %0000
220f: 4 4188 : 00            %0000
2210: 4 4192 : 00            %0000
2211: 4 4196 : 02            %0010
2212: 4 4200 : 04            %0100
2213: 4 4204 : 08            %1000
2214: 4 4208 : 00            %0000
2215: 4 4212 : 00            %0000
2216: 4 4216 : 04            %0100
2217: 4 4220 : 0a            %1010
2218: 4 4224 : 0a            %1010
2219: 4 4228 : 0a            %1010
221a: 4 4232 : 0a            %1010
221b: 4 4236 : 0a            %1010
221c: 4 4240 : 04            %0100
221d: 4 4244 : 00            %0000
221e: 4 4248 : 02            %0010
221f: 4 4252 : 06            %0110
2220: 4 4256 : 02            %0010
2221: 4 4260 : 02            %0010
2222: 4 4264 : 02            %0010
2223: 4 4268 : 02            %0010
2224: 4 4272 : 02            %0010
2225: 4 4276 : 00            %0000
2226: 4 4280 : 04            %0100
2227: 4 4284 : 0a            %1010
2228: 4 4288 : 02            %0010
2229: 4 4292 : 04            %0100
222a: 4 4296 : 08            %1000
222b: 4 4300 : 08            %1000
222c: 4 4304 : 0e            %1110
222d: 4 4308 : 00            %0000
222e: 4 4312 : 04            %0100
222f: 4 4316 : 0a            %1010
2230: 4 4320 : 02            %0010
2231: 4 4324 : 04            %0100
2232: 4 4328 : 02            %0010
2233: 4 4332 : 0a            %1010
2234: 4 4336 : 04            %0100
2235: 4 4340 : 00            %0000
2236: 4 4344 : 0a            %1010
2237: 4 4348 : 0a            %1010
2238: 4 4352 : 0a            %1010
2239: 4 4356 : 0e            %1110
223a: 4 4360 : 02            %0010
223b: 4 4364 : 02            %0010
223c: 4 4368 : 02            %0010
223d: 4 4372 : 00            %0000
223e: 4 4376 : 0e            %1110
223f: 4 4380 : 08            %1000
2240: 4 4384 : 08            %1000
2241: 4 4388 : 0c            %1100
2242: 4 4392 : 02            %0010
2243: 4 4396 : 02            %0010
2244: 4 4400 : 0c            %1100
2245: 4 4404 : 00            %0000
2246: 4 4408 : 04            %0100
2247: 4 4412 : 0a            %1010
2248: 4 4416 : 08            %1000
2249: 4 4420 : 0c            %1100
224a: 4 4424 : 0a            %1010
224b: 4 4428 : 0a            %1010
224c: 4 4432 : 04            %0100
224d: 4 4436 : 00            %0000
224e: 4 4440 : 0e            %1110
224f: 4 4444 : 02            %0010
2250: 4 4448 : 04            %0100
2251: 4 4452 : 04            %0100
2252: 4 4456 : 08            %1000
2253: 4 4460 : 08            %1000
2254: 4 4464 : 08            %1000
2255: 4 4468 : 00            %0000
2256: 4 4472 : 04            %0100
2257: 4 4476 : 0a            %1010
2258: 4 4480 : 0a            %1010
2259: 4 4484 : 04            %0100
225a: 4 4488 : 0a            %1010
225b: 4 4492 : 0a            %1010
225c: 4 4496 : 04            %0100
225d: 4 4500 : 00            %0000
225e: 4 4504 : 04            %0100
225f: 4 4508 : 0a            %1010
2260: 4 4512 : 0a            %1010
2261: 4 4516 : 06            %0110
2262: 4 4520 : 02            %0010
2263: 4 4524 : 0a            %1010
2264: 4 4528 : 04            %0100
2265: 4 4532 : 00            %0000
2266: 4 4536 : 00            %0000
2267: 4 4540 : 00            %0000
2268: 4 4544 : 00            %0000
2269: 4 4548 : 04            %0100
226a: 4 4552 : 00            %0000
226b: 4 4556 : 00            %0000
226c: 4 4560 : 04            %0100
226d: 4 4564 : 00            %0000
226e: 4 4568 : 00            %0000
226f: 4 4572 : 00            %0000
2270: 4 4576 : 00            %0000
2271: 4 4580 : 04            %0100
2272: 4 4584 : 00            %0000
2273: 4 4588 : 00            %0000
2274: 4 4592 : 04            %0100
2275: 4 4596 : 08            %1000
2276: 4 4600 : 00            %0000
2277: 4 4604 : 00            %0000
2278: 4 4608 : 02            %0010
2279: 4 4612 : 04            %0100
227a: 4 4616 : 08            %1000
227b: 4 4620 : 04            %0100
227c: 4 4624 : 02            %0010
227d: 4 4628 : 00            %0000
227e: 4 4632 : 00            %0000
227f: 4 4636 : 00            %0000
2280: 4 4640 : 00            %0000
2281: 4 4644 : 0e            %1110
2282: 4 4648 : 00            %0000
2283: 4 4652 : 0e            %1110
2284: 4 4656 : 00            %0000
2285: 4 4660 : 00            %0000
2286: 4 4664 : 00            %0000
2287: 4 4668 : 00            %0000
2288: 4 4672 : 08            %1000
2289: 4 4676 : 04            %0100
228a: 4 4680 : 02            %0010
228b: 4 4684 : 04            %0100
228c: 4 4688 : 08            %1000
228d: 4 4692 : 00            %0000
228e: 4 4696 : 04            %0100
228f: 4 4700 : 0a            %1010
2290: 4 4704 : 02            %0010
2291: 4 4708 : 04            %0100
2292: 4 4712 : 04            %0100
2293: 4 4716 : 00            %0000
2294: 4 4720 : 04            %0100
2295: 4 4724 : 00            %0000
2296: 4 4728 : 00            %0000
2297: 4 4732 : 00            %0000
2298: 4 4736 : 06            %0110
2299: 4 4740 : 0e            %1110
229a: 4 4744 : 0e            %1110
229b: 4 4748 : 08            %1000
229c: 4 4752 : 06            %0110
229d: 4 4756 : 00            %0000
229e: 4 4760 : 04            %0100
229f: 4 4764 : 0a            %1010
22a0: 4 4768 : 0a            %1010
22a1: 4 4772 : 0e            %1110
22a2: 4 4776 : 0a            %1010
22a3: 4 4780 : 0a            %1010
22a4: 4 4784 : 0a            %1010
22a5: 4 4788 : 00            %0000
22a6: 4 4792 : 0c            %1100
22a7: 4 4796 : 0a            %1010
22a8: 4 4800 : 0a            %1010
22a9: 4 4804 : 0c            %1100
22aa: 4 4808 : 0a            %1010
22ab: 4 4812 : 0a            %1010
22ac: 4 4816 : 0c            %1100
22ad: 4 4820 : 00            %0000
22ae: 4 4824 : 04            %0100
22af: 4 4828 : 0a            %1010
22b0: 4 4832 : 08            %1000
22b1: 4 4836 : 08            %1000
22b2: 4 4840 : 08            %1000
22b3: 4 4844 : 0a            %1010
22b4: 4 4848 : 04            %0100
22b5: 4 4852 : 00            %0000
22b6: 4 4856 : 0c            %1100
22b7: 4 4860 : 0a            %1010
22b8: 4 4864 : 0a            %1010
22b9: 4 4868 : 0a            %1010
22ba: 4 4872 : 0a            %1010
22bb: 4 4876 : 0a            %1010
22bc: 4 4880 : 0c            %1100
22bd: 4 4884 : 00            %0000
22be: 4 4888 : 0e            %1110
22bf: 4 4892 : 08            %1000
22c0: 4 4896 : 08            %1000
22c1: 4 4900 : 0c            %1100
22c2: 4 4904 : 08            %1000
22c3: 4 4908 : 08            %1000
22c4: 4 4912 : 0e            %1110
22c5: 4 4916 : 00            %0000
22c6: 4 4920 : 0e            %1110
22c7: 4 4924 : 08            %1000
22c8: 4 4928 : 08            %1000
22c9: 4 4932 : 0c            %1100
22ca: 4 4936 : 08            %1000
22cb: 4 4940 : 08            %1000
22cc: 4 4944 : 08            %1000
22cd: 4 4948 : 00            %0000
22ce: 4 4952 : 04            %0100
22cf: 4 4956 : 0a            %1010
22d0: 4 4960 : 08            %1000
22d1: 4 4964 : 0a            %1010
22d2: 4 4968 : 0a            %1010
22d3: 4 4972 : 0a            %1010
22d4: 4 4976 : 06            %0110
22d5: 4 4980 : 00            %0000
22d6: 4 4984 : 0a            %1010
22d7: 4 4988 : 0a            %1010
22d8: 4 4992 : 0a            %1010
22d9: 4 4996 : 0e            %1110
22da: 4 5000 : 0a            %1010
22db: 4 5004 : 0a            %1010
22dc: 4 5008 : 0a            %1010
22dd: 4 5012 : 00            %0000
22de: 4 5016 : 0e            %1110
22df: 4 5020 : 04            %0100
22e0: 4 5024 : 04            %0100
22e1: 4 5028 : 04            %0100
22e2: 4 5032 : 04            %0100
22e3: 4 5036 : 04            %0100
22e4: 4 5040 : 0e            %1110
22e5: 4 5044 : 00            %0000
22e6: 4 5048 : 0e            %1110
22e7: 4 5052 : 02            %0010
22e8: 4 5056 : 02            %0010
22e9: 4 5060 : 02            %0010
22ea: 4 5064 : 02            %0010
22eb: 4 5068 : 0a            %1010
22ec: 4 5072 : 04            %0100
22ed: 4 5076 : 00            %0000
22ee: 4 5080 : 0a            %1010
22ef: 4 5084 : 0a            %1010
22f0: 4 5088 : 0a            %1010
22f1: 4 5092 : 0c            %1100
22f2: 4 5096 : 0a            %1010
22f3: 4 5100 : 0a            %1010
22f4: 4 5104 : 0a            %1010
22f5: 4 5108 : 00            %0000
22f6: 4 5112 : 08            %1000
22f7: 4 5116 : 08            %1000
22f8: 4 5120 : 08            %1000
22f9: 4 5124 : 08            %1000
22fa: 4 5128 : 08            %1000
22fb: 4 5132 : 08            %1000
22fc: 4 5136 : 0e            %1110
22fd: 4 5140 : 00            %0000
22fe: 4 5144 : 0a            %1010
22ff: 4 5148 : 0e            %1110
2300: 4 5152 : 0e            %1110
2301: 4 5156 : 0e            %1110
2302: 4 5160 : 0a            %1010
2303: 4 5164 : 0a            %1010
2304: 4 5168 : 0a            %1010
2305: 4 5172 : 00            %0000
2306: 4 5176 : 0c            %1100
2307: 4 5180 : 0a            %1010
2308: 4 5184 : 0a            %1010
2309: 4 5188 : 0a            %1010
230a: 4 5192 : 0a            %1010
230b: 4 5196 : 0a            %1010
230c: 4 5200 : 0a            %1010
230d: 4 5204 : 00            %0000
230e: 4 5208 : 04            %0100
230f: 4 5212 : 0a            %1010
2310: 4 5216 : 0a            %1010
2311: 4 5220 : 0a            %1010
2312: 4 5224 : 0a            %1010
2313: 4 5228 : 0a            %1010
2314: 4 5232 : 04            %0100
2315: 4 5236 : 00            %0000
2316: 4 5240 : 0c            %1100
2317: 4 5244 : 0a            %1010
2318: 4 5248 : 0a            %1010
2319: 4 5252 : 0c            %1100
231a: 4 5256 : 08            %1000
231b: 4 5260 : 08            %1000
231c: 4 5264 : 08            %1000
231d: 4 5268 : 00            %0000
231e: 4 5272 : 04            %0100
231f: 4 5276 : 0a            %1010
2320: 4 5280 : 0a            %1010
2321: 4 5284 : 0a            %1010
2322: 4 5288 : 0a            %1010
2323: 4 5292 : 0e            %1110
2324: 4 5296 : 06            %0110
2325: 4 5300 : 00            %0000
2326: 4 5304 : 0c            %1100
2327: 4 5308 : 0a            %1010
2328: 4 5312 : 0a            %1010
2329: 4 5316 : 0c            %1100
232a: 4 5320 : 0a            %1010
232b: 4 5324 : 0a            %1010
232c: 4 5328 : 0a            %1010
232d: 4 5332 : 00            %0000
232e: 4 5336 : 04            %0100
232f: 4 5340 : 0a            %1010
2330: 4 5344 : 08            %1000
2331: 4 5348 : 04            %0100
2332: 4 5352 : 02            %0010
2333: 4 5356 : 0a            %1010
2334: 4 5360 : 04            %0100
2335: 4 5364 : 00            %0000
2336: 4 5368 : 0e            %1110
2337: 4 5372 : 04            %0100
2338: 4 5376 : 04            %0100
2339: 4 5380 : 04            %0100
233a: 4 5384 : 04            %0100
233b: 4 5388 : 04            %0100
233c: 4 5392 : 04            %0100
233d: 4 5396 : 00            %0000
233e: 4 5400 : 0a            %1010
233f: 4 5404 : 0a            %1010
2340: 4 5408 : 0a            %1010
2341: 4 5412 : 0a            %1010
2342: 4 5416 : 0a            %1010
2343: 4 5420 : 0a            %1010
2344: 4 5424 : 06            %0110
2345: 4 5428 : 00            %0000
2346: 4 5432 : 0a            %1010
2347: 4 5436 : 0a            %1010
2348: 4 5440 : 0a            %1010
2349: 4 5444 : 0a            %1010
234a: 4 5448 : 0a            %1010
234b: 4 5452 : 0a            %1010
234c: 4 5456 : 04            %0100
234d: 4 5460 : 00            %0000
234e: 4 5464 : 0a            %1010
234f: 4 5468 : 0a            %1010
2350: 4 5472 : 0a            %1010
2351: 4 5476 : 0a            %1010
2352: 4 5480 : 0a            %1010
2353: 4 5484 : 0e            %1110
2354: 4 5488 : 0a            %1010
2355: 4 5492 : 00            %0000
2356: 4 5496 : 0a            %1010
2357: 4 5500 : 0a            %1010
2358: 4 5504 : 0a            %1010
2359: 4 5508 : 04            %0100
235a: 4 5512 : 0a            %1010
235b: 4 5516 : 0a            %1010
235c: 4 5520 : 0a            %1010
235d: 4 5524 : 00            %0000
235e: 4 5528 : 0a            %1010
235f: 4 5532 : 0a            %1010
2360: 4 5536 : 0a            %1010
2361: 4 5540 : 04            %0100
2362: 4 5544 : 04            %0100
2363: 4 5548 : 04            %0100
2364: 4 5552 : 04            %0100
2365: 4 5556 : 00            %0000
2366: 4 5560 : 0e            %1110
2367: 4 5564 : 02            %0010
2368: 4 5568 : 02            %0010
2369: 4 5572 : 04            %0100
236a: 4 5576 : 08            %1000
236b: 4 5580 : 08            %1000
236c: 4 5584 : 0e            %1110
236d: 4 5588 : 00            %0000
236d: 4 5592 :           bits:       128 64 32 16 8 4 2 1
236e: 4 5596 : 80        bits:       128 64 32 16 8 4 2 1
236f: 4 5600 : 40        bits:       128 64 32 16 8 4 2 1
2370: 4 5604 : 20        bits:       128 64 32 16 8 4 2 1
2371: 4 5608 : 10        bits:       128 64 32 16 8 4 2 1
2372: 4 5612 : 08        bits:       128 64 32 16 8 4 2 1
2373: 4 5616 : 04        bits:       128 64 32 16 8 4 2 1
2374: 4 5620 : 02        bits:       128 64 32 16 8 4 2 1
2375: 4 5624 : 01        bits:       128 64 32 16 8 4 2 1
2375: 4 5628 :           negate7:    7 6 5 4 3 2 1 0
2376: 4 5632 : 07        negate7:    7 6 5 4 3 2 1 0
2377: 4 5636 : 06        negate7:    7 6 5 4 3 2 1 0
2378: 4 5640 : 05        negate7:    7 6 5 4 3 2 1 0
2379: 4 5644 : 04        negate7:    7 6 5 4 3 2 1 0
237a: 4 5648 : 03        negate7:    7 6 5 4 3 2 1 0
237b: 4 5652 : 02        negate7:    7 6 5 4 3 2 1 0
237c: 4 5656 : 01        negate7:    7 6 5 4 3 2 1 0
237d: 4 5660 : 00        negate7:    7 6 5 4 3 2 1 0
237d: 4 5664 :           line_addresses:
239d: 4 5668 : 00 0f 1e 2d 3c 4b 5a 69 78 87 96 a5 b4 c3 d2 e1 f0 ff 0e 1d 2c 3b 4a 59 68 77 86 95 a4 b3 c2 d1    @(maptimes [low (* _ screen_columns)] screen_rows)
239d: 4 5672 :           paddle_xlat: @(paddle-xlat)
249d: 4 5676 : 68 68 66 66 66 66 66 64 64 64 64 64 64 62 62 62 62 62 60 60 60 60 60 5e 5e 5e 5e 5e 5e 5c 5c 5c 5c 5c 5a 5a 5a 5a 5a 58 58 58 58 58 56 56 56 56 56 56 54 54 54 54 54 52 52 52 52 52 50 50 50 50 50 4e 4e 4e 4e 4e 4e 4c 4c 4c 4c 4c 4a 4a 4a 4a 4a 48 48 48 48 48 48 46 46 46 46 46 44 44 44 44 44 42 42 42 42 42 40 40 40 40 40 40 3e 3e 3e 3e 3e 3c 3c 3c 3c 3c 3a 3a 3a 3a 3a 3a 38 38 38 38 38 36 36 36 36 36 34 34 34 34 34 32 32 32 32 32 32 30 30 30 30 30 2e 2e 2e 2e 2e 2c 2c 2c 2c 2c 2a 2a 2a 2a 2a 2a 28 28 28 28 28 26 26 26 26 26 24 24 24 24 24 24 22 22 22 22 22 20 20 20 20 20 1e 1e 1e 1e 1e 1c 1c 1c 1c 1c 1c 1a 1a 1a 1a 1a 18 18 18 18 18 16 16 16 16 16 16 14 14 14 14 14 12 12 12 12 12 10 10 10 10 10 0e 0e 0e 0e 0e 0e 0c 0c 0c 0c 0c 0a 0a 0a 0a 0a 08 08 08 08 08 08paddle_xlat: @(paddle-xlat)
249d: 4 5680 :           ball_directions_x:  @(ball-directions-x)
259d: 4 5684 : 00 01 03 05 07 09 0b 0d 0e 10 12 14 16 17 19 1b 1d 1e 20 22 23 25 27 28 2a 2b 2d 2e 30 31 33 34 35 37 38 39 3a 3c 3d 3e 3f 40 41 42 43 44 44 45 46 47 47 48 48 49 49 4a 4a 4b 4b 4b 4b 4b 4c 4c 4c 4c 4b 4b 4b 4b 4b 4a 4a 49 49 48 48 47 47 46 45 44 44 43 42 41 40 3f 3e 3d 3c 3a 39 38 37 35 34 33 31 30 2e 2d 2b 2a 28 27 25 23 22 20 1e 1d 1b 19 17 16 14 12 10 0e 0d 0b 09 07 05 03 01 00 00 ff fd fb f9 f7 f5 f3 f2 f0 ee ec ea e9 e7 e5 e3 e2 e0 de dd db d9 d8 d6 d5 d3 d2 d0 cf cd cc cb c9 c8 c7 c6 c4 c3 c2 c1 c0 bf be bd bc bc bb ba b9 b9 b8 b8 b7 b7 b6 b6 b5 b5 b5 b5 b5 b4 b4 b4 b4 b5 b5 b5 b5 b5 b6 b6 b7 b7 b8 b8 b9 b9 ba bb bc bc bd be bf c0 c1 c2 c3 c4 c6 c7 c8 c9 cb cc cd cf d0 d2 d3 d5 d6 d8 d9 db dd de e0 e2 e3 e5 e7 e9 ea ec ee f0 f2 f3 f5 f7 f9 fb fd ff 00ball_directions_x:  @(ball-directions-x)
259d: 4 5688 :           ball_directions_y:  @(ball-directions-y)
269d: 4 5692 : 7f 7e 7e 7e 7e 7e 7d 7d 7c 7b 7b 7a 79 78 77 76 75 74 72 71 70 6e 6c 6b 69 67 66 64 62 60 5e 5b 59 57 55 52 50 4e 4b 49 46 43 41 3e 3b 39 36 33 30 2d 2a 27 24 21 1e 1b 18 15 12 0f 0c 09 06 03 fd fa f7 f4 f1 ee eb e8 e5 e2 df dc d9 d6 d3 d0 cd ca c7 c5 c2 bf bd ba b7 b5 b2 b0 ae ab a9 a7 a5 a2 a0 9e 9c 9a 99 97 95 94 92 90 8f 8e 8c 8b 8a 89 88 87 86 85 85 84 83 83 82 82 82 82 82 81 81 82 82 82 82 82 83 83 84 85 85 86 87 88 89 8a 8b 8c 8e 8f 90 92 94 95 97 99 9a 9c 9e a0 a2 a5 a7 a9 ab ae b0 b2 b5 b7 ba bd bf c2 c5 c7 ca cd d0 d3 d6 d9 dc df e2 e5 e8 eb ee f1 f4 f7 fa fd 03 06 09 0c 0f 12 15 18 1b 1e 21 24 27 2a 2d 30 33 36 39 3b 3e 41 43 46 49 4b 4e 50 52 55 57 59 5b 5e 60 62 64 66 67 69 6b 6c 6e 70 71 72 74 75 76 77 78 79 7a 7b 7b 7c 7d 7d 7e 7e 7e 7e 7e 7fball_directions_y:  @(ball-directions-y)
269d: 4 5696 :           scores:     0 0 0 0 0 5 0
269e: 4 5700 : 00        scores:     0 0 0 0 0 5 0
269f: 4 5704 : 00        scores:     0 0 0 0 0 5 0
26a0: 4 5708 : 00        scores:     0 0 0 0 0 5 0
26a1: 4 5712 : 00        scores:     0 0 0 0 0 5 0
26a2: 4 5716 : 00        scores:     0 0 0 0 0 5 0
26a3: 4 5720 : 05        scores:     0 0 0 0 0 5 0
26a4: 4 5724 : 00        scores:     0 0 0 0 0 5 0
26a4: 4 5728 :           score_50:   0 0 0 0 0 6 0
26a5: 4 5732 : 00        score_50:   0 0 0 0 0 6 0
26a6: 4 5736 : 00        score_50:   0 0 0 0 0 6 0
26a7: 4 5740 : 00        score_50:   0 0 0 0 0 6 0
26a8: 4 5744 : 00        score_50:   0 0 0 0 0 6 0
26a9: 4 5748 : 00        score_50:   0 0 0 0 0 6 0
26aa: 4 5752 : 06        score_50:   0 0 0 0 0 6 0
26ab: 4 5756 : 00        score_50:   0 0 0 0 0 6 0
26ab: 4 5760 :           score_60:   0 0 0 0 0 7 0
26ac: 4 5764 : 00        score_60:   0 0 0 0 0 7 0
26ad: 4 5768 : 00        score_60:   0 0 0 0 0 7 0
26ae: 4 5772 : 00        score_60:   0 0 0 0 0 7 0
26af: 4 5776 : 00        score_60:   0 0 0 0 0 7 0
26b0: 4 5780 : 00        score_60:   0 0 0 0 0 7 0
26b1: 4 5784 : 07        score_60:   0 0 0 0 0 7 0
26b2: 4 5788 : 00        score_60:   0 0 0 0 0 7 0
26b2: 4 5792 :           score_70:   0 0 0 0 0 8 0
26b3: 4 5796 : 00        score_70:   0 0 0 0 0 8 0
26b4: 4 5800 : 00        score_70:   0 0 0 0 0 8 0
26b5: 4 5804 : 00        score_70:   0 0 0 0 0 8 0
26b6: 4 5808 : 00        score_70:   0 0 0 0 0 8 0
26b7: 4 5812 : 00        score_70:   0 0 0 0 0 8 0
26b8: 4 5816 : 08        score_70:   0 0 0 0 0 8 0
26b9: 4 5820 : 00        score_70:   0 0 0 0 0 8 0
26b9: 4 5824 :           score_80:   0 0 0 0 0 9 0
26ba: 4 5828 : 00        score_80:   0 0 0 0 0 9 0
26bb: 4 5832 : 00        score_80:   0 0 0 0 0 9 0
26bc: 4 5836 : 00        score_80:   0 0 0 0 0 9 0
26bd: 4 5840 : 00        score_80:   0 0 0 0 0 9 0
26be: 4 5844 : 00        score_80:   0 0 0 0 0 9 0
26bf: 4 5848 : 09        score_80:   0 0 0 0 0 9 0
26c0: 4 5852 : 00        score_80:   0 0 0 0 0 9 0
26c0: 4 5856 :           score_90:   0 0 0 0 1 0 0
26c1: 4 5860 : 00        score_90:   0 0 0 0 1 0 0
26c2: 4 5864 : 00        score_90:   0 0 0 0 1 0 0
26c3: 4 5868 : 00        score_90:   0 0 0 0 1 0 0
26c4: 4 5872 : 00        score_90:   0 0 0 0 1 0 0
26c5: 4 5876 : 01        score_90:   0 0 0 0 1 0 0
26c6: 4 5880 : 00        score_90:   0 0 0 0 1 0 0
26c7: 4 5884 : 00        score_90:   0 0 0 0 1 0 0
26c7: 4 5888 :           score_100:  0 0 0 0 1 1 0
26c8: 4 5892 : 00        score_100:  0 0 0 0 1 1 0
26c9: 4 5896 : 00        score_100:  0 0 0 0 1 1 0
26ca: 4 5900 : 00        score_100:  0 0 0 0 1 1 0
26cb: 4 5904 : 00        score_100:  0 0 0 0 1 1 0
26cc: 4 5908 : 01        score_100:  0 0 0 0 1 1 0
26cd: 4 5912 : 01        score_100:  0 0 0 0 1 1 0
26ce: 4 5916 : 00        score_100:  0 0 0 0 1 1 0
26ce: 4 5920 :           score_110:  0 0 0 0 1 2 0
26cf: 4 5924 : 00        score_110:  0 0 0 0 1 2 0
26d0: 4 5928 : 00        score_110:  0 0 0 0 1 2 0
26d1: 4 5932 : 00        score_110:  0 0 0 0 1 2 0
26d2: 4 5936 : 00        score_110:  0 0 0 0 1 2 0
26d3: 4 5940 : 01        score_110:  0 0 0 0 1 2 0
26d4: 4 5944 : 02        score_110:  0 0 0 0 1 2 0
26d5: 4 5948 : 00        score_110:  0 0 0 0 1 2 0
26d5: 4 5952 :           score_120:  0 0 0 1 0 0 0
26d6: 4 5956 : 00        score_120:  0 0 0 1 0 0 0
26d7: 4 5960 : 00        score_120:  0 0 0 1 0 0 0
26d8: 4 5964 : 00        score_120:  0 0 0 1 0 0 0
26d9: 4 5968 : 01        score_120:  0 0 0 1 0 0 0
26da: 4 5972 : 00        score_120:  0 0 0 1 0 0 0
26db: 4 5976 : 00        score_120:  0 0 0 1 0 0 0
26dc: 4 5980 : 00        score_120:  0 0 0 1 0 0 0
26dc: 4 5984 :           score_1000:
26dc: 4 5988 :           color_scores:
26dd: 4 5992 : 00            0
26de: 4 5996 : 07            @(- score_50 scores)    ; 1 white
26df: 4 6000 : 23            @(- score_90 scores)    ; 2 red
26e0: 4 6004 : 15            @(- score_70 scores)    ; 3 cyan
26e1: 4 6008 : 31            @(- score_110 scores)   ; 4 purple
26e2: 4 6012 : 1c            @(- score_80 scores)    ; 5 green
26e3: 4 6016 : 2a            @(- score_100 scores)   ; 6 blue
26e4: 4 6020 : 38            @(- score_120 scores)   ; 7 yellow
26e5: 4 6024 : 00            0 0 0 0 0 0 0
26e6: 4 6028 : 00            0 0 0 0 0 0 0
26e7: 4 6032 : 00            0 0 0 0 0 0 0
26e8: 4 6036 : 00            0 0 0 0 0 0 0
26e9: 4 6040 : 00            0 0 0 0 0 0 0
26ea: 4 6044 : 00            0 0 0 0 0 0 0
26eb: 4 6048 : 00            0 0 0 0 0 0 0
26ec: 4 6052 : 0e            @(- score_60 scores)    ; 15 orange
26ec: 4 6056 :           b_white = 1
26ec: 4 6060 :           b_orange = 2
26ec: 4 6064 :           b_cyan = 3
26ec: 4 6068 :           b_green = 4
26ec: 4 6072 :           b_red = 5
26ec: 4 6076 :           b_blue = 6
26ec: 4 6080 :           b_purple = 7
26ec: 4 6084 :           b_yellow = 8
26ec: 4 6088 :           b_silver = 9
26ec: 4 6092 :           b_golden = 10
26ec: 4 6096 :           brick_colors:
26ed: 4 6100 : 01            white
26ee: 4 6104 : 0f            @(+ yellow multicolor)
26ef: 4 6108 : 03            cyan
26f0: 4 6112 : 05            green
26f1: 4 6116 : 02            red
26f2: 4 6120 : 06            blue
26f3: 4 6124 : 04            purple
26f4: 4 6128 : 07            yellow
26f5: 4 6132 : 01            white
26f6: 4 6136 : 07            yellow
26f6: 4 6140 :           brick_scores:
26f7: 4 6144 : 32            50
26f8: 4 6148 : 3c            60
26f9: 4 6152 : 46            70
26fa: 4 6156 : 50            80
26fb: 4 6160 : 5a            90
26fc: 4 6164 : 64            100
26fd: 4 6168 : 6e            110
26fe: 4 6172 : 78            120
26fe: 4 6176 :           sprite_init_x           = 0
26fe: 4 6180 :           sprite_init_y           = 1
26fe: 4 6184 :           sprite_init_flags       = 2
26fe: 4 6188 :           sprite_init_color       = 3
26fe: 4 6192 :           sprite_init_gfx_l       = 4
26fe: 4 6196 :           sprite_init_ctrl_l      = 5
26fe: 4 6200 :           sprite_init_ctrl_h      = 6
26fe: 4 6204 :           sprite_init_dimensions  = 7
26fe: 4 6208 :           sprite_init_data        = 8
26fe: 4 6212 :           is_inactive  = 128
26fe: 4 6216 :           was_cleared  = 64
26fe: 4 6220 :           fg_collision = 32
26fe: 4 6224 :           is_ball      = 8
26fe: 4 6228 :           is_obstacle  = 4
26fe: 4 6232 :           is_bonus     = 2
26fe: 4 6236 :           is_vaus      = 1
26fe: 4 6240 :           vaus_y      = @(* 29 8)
26fe: 4 6244 :           multiwhite  = @(+ multicolor white)
26fe: 4 6248 :           sprite_inits:
26fe: 4 6252 :           vaus_init:
26ff: 4 6256 : 40            64 vaus_y is_vaus     multiwhite <vaus          <ctrl_vaus >ctrl_vaus 10 0
2700: 4 6260 : e8            64 vaus_y is_vaus     multiwhite <vaus          <ctrl_vaus >ctrl_vaus 10 0
2701: 4 6264 : 01            64 vaus_y is_vaus     multiwhite <vaus          <ctrl_vaus >ctrl_vaus 10 0
2702: 4 6268 : 09            64 vaus_y is_vaus     multiwhite <vaus          <ctrl_vaus >ctrl_vaus 10 0
2703: 4 6272 : 00            64 vaus_y is_vaus     multiwhite <vaus          <ctrl_vaus >ctrl_vaus 10 0
2704: 4 6276 : b7            64 vaus_y is_vaus     multiwhite <vaus          <ctrl_vaus >ctrl_vaus 10 0
2705: 4 6280 : 31            64 vaus_y is_vaus     multiwhite <vaus          <ctrl_vaus >ctrl_vaus 10 0
2706: 4 6284 : 0a            64 vaus_y is_vaus     multiwhite <vaus          <ctrl_vaus >ctrl_vaus 10 0
2707: 4 6288 : 00            64 vaus_y is_vaus     multiwhite <vaus          <ctrl_vaus >ctrl_vaus 10 0
2707: 4 6292 :           ball_init:
2708: 4 6296 : 46            70 0      is_ball     white      <ball          <ctrl_ball >ctrl_ball 9 0
2709: 4 6300 : 00            70 0      is_ball     white      <ball          <ctrl_ball >ctrl_ball 9 0
270a: 4 6304 : 08            70 0      is_ball     white      <ball          <ctrl_ball >ctrl_ball 9 0
270b: 4 6308 : 01            70 0      is_ball     white      <ball          <ctrl_ball >ctrl_ball 9 0
270c: 4 6312 : 38            70 0      is_ball     white      <ball          <ctrl_ball >ctrl_ball 9 0
270d: 4 6316 : 5c            70 0      is_ball     white      <ball          <ctrl_ball >ctrl_ball 9 0
270e: 4 6320 : 33            70 0      is_ball     white      <ball          <ctrl_ball >ctrl_ball 9 0
270f: 4 6324 : 09            70 0      is_ball     white      <ball          <ctrl_ball >ctrl_ball 9 0
2710: 4 6328 : 00            70 0      is_ball     white      <ball          <ctrl_ball >ctrl_ball 9 0
2710: 4 6332 :           laser_init:
2711: 4 6336 : 00            0 vaus_y  0           white      <laser         <ctrl_laser >ctrl_laser 9 0
2712: 4 6340 : e8            0 vaus_y  0           white      <laser         <ctrl_laser >ctrl_laser 9 0
2713: 4 6344 : 00            0 vaus_y  0           white      <laser         <ctrl_laser >ctrl_laser 9 0
2714: 4 6348 : 01            0 vaus_y  0           white      <laser         <ctrl_laser >ctrl_laser 9 0
2715: 4 6352 : 48            0 vaus_y  0           white      <laser         <ctrl_laser >ctrl_laser 9 0
2716: 4 6356 : d4            0 vaus_y  0           white      <laser         <ctrl_laser >ctrl_laser 9 0
2717: 4 6360 : 32            0 vaus_y  0           white      <laser         <ctrl_laser >ctrl_laser 9 0
2718: 4 6364 : 09            0 vaus_y  0           white      <laser         <ctrl_laser >ctrl_laser 9 0
2719: 4 6368 : 00            0 vaus_y  0           white      <laser         <ctrl_laser >ctrl_laser 9 0
2719: 4 6372 :           bonus_init:
271a: 4 6376 : 00            0 0       is_bonus    black      <bonus_l       <ctrl_bonus >ctrl_bonus 9 0
271b: 4 6380 : 00            0 0       is_bonus    black      <bonus_l       <ctrl_bonus >ctrl_bonus 9 0
271c: 4 6384 : 02            0 0       is_bonus    black      <bonus_l       <ctrl_bonus >ctrl_bonus 9 0
271d: 4 6388 : 00            0 0       is_bonus    black      <bonus_l       <ctrl_bonus >ctrl_bonus 9 0
271e: 4 6392 : 50            0 0       is_bonus    black      <bonus_l       <ctrl_bonus >ctrl_bonus 9 0
271f: 4 6396 : 43            0 0       is_bonus    black      <bonus_l       <ctrl_bonus >ctrl_bonus 9 0
2720: 4 6400 : 35            0 0       is_bonus    black      <bonus_l       <ctrl_bonus >ctrl_bonus 9 0
2721: 4 6404 : 09            0 0       is_bonus    black      <bonus_l       <ctrl_bonus >ctrl_bonus 9 0
2722: 4 6408 : 00            0 0       is_bonus    black      <bonus_l       <ctrl_bonus >ctrl_bonus 9 0
2722: 4 6412 :           obstacle_ball_init:
2723: 4 6416 : 1c            28 12     is_obstacle white      <obstacle_ball <ctrl_obstacle >ctrl_obstacle 17 0
2724: 4 6420 : 0c            28 12     is_obstacle white      <obstacle_ball <ctrl_obstacle >ctrl_obstacle 17 0
2725: 4 6424 : 04            28 12     is_obstacle white      <obstacle_ball <ctrl_obstacle >ctrl_obstacle 17 0
2726: 4 6428 : 01            28 12     is_obstacle white      <obstacle_ball <ctrl_obstacle >ctrl_obstacle 17 0
2727: 4 6432 : 88            28 12     is_obstacle white      <obstacle_ball <ctrl_obstacle >ctrl_obstacle 17 0
2728: 4 6436 : 02            28 12     is_obstacle white      <obstacle_ball <ctrl_obstacle >ctrl_obstacle 17 0
2729: 4 6440 : 37            28 12     is_obstacle white      <obstacle_ball <ctrl_obstacle >ctrl_obstacle 17 0
272a: 4 6444 : 11            28 12     is_obstacle white      <obstacle_ball <ctrl_obstacle >ctrl_obstacle 17 0
272b: 4 6448 : 00            28 12     is_obstacle white      <obstacle_ball <ctrl_obstacle >ctrl_obstacle 17 0
272b: 4 6452 :           dummy_init:
272c: 4 6456 : 00            0 0       is_inactive  black      0             <ctrl_dummy >ctrl_dummy 9 0
272d: 4 6460 : 00            0 0       is_inactive  black      0             <ctrl_dummy >ctrl_dummy 9 0
272e: 4 6464 : 80            0 0       is_inactive  black      0             <ctrl_dummy >ctrl_dummy 9 0
272f: 4 6468 : 00            0 0       is_inactive  black      0             <ctrl_dummy >ctrl_dummy 9 0
2730: 4 6472 : 00            0 0       is_inactive  black      0             <ctrl_dummy >ctrl_dummy 9 0
2731: 4 6476 : 93            0 0       is_inactive  black      0             <ctrl_dummy >ctrl_dummy 9 0
2732: 4 6480 : 32            0 0       is_inactive  black      0             <ctrl_dummy >ctrl_dummy 9 0
2733: 4 6484 : 09            0 0       is_inactive  black      0             <ctrl_dummy >ctrl_dummy 9 0
2734: 4 6488 : 00            0 0       is_inactive  black      0             <ctrl_dummy >ctrl_dummy 9 0
2734: 4 6492 :           sprite_inits_end:
2734: 4 6496 :           inc_bcp:
2737: 5 6500 : e6 0e         inc bcp
2739: 2 6505 : d0 02         bne +n
273b: 5 6507 : e6 0f         inc @(++ bcp)
273b: 5 6512 :           n:  rts
273d: 6 6517 : 60        n:  rts
273d: 6 6523 :           inc_bca:
273e: 5 6529 : e6 10         inc bca
2740: 2 6534 : d0 02         bne +n
2742: 5 6536 : e6 11         inc @(++ bca)
2742: 5 6541 :           n:  rts
2744: 6 6546 : 60        n:  rts
2744: 6 6552 :           exec_script:
2745: 4 6558 : 68            pla ; Y
2746: 4 6562 : 68            pla ; X
2747: 3 6566 : 85 13         sta srx
2749: 4 6569 : 68            pla ; A
274a: 4 6573 : 28            plp ; flags
274b: 4 6577 : 68            pla
274c: 3 6581 : 85 0e         sta bcp
274e: 4 6584 : 68            pla
274f: 3 6588 : 85 0f         sta @(++ bcp)
2751: 3 6591 : a5 0e         lda bcp
2753: 2 6594 : 38            sec
2754: 2 6596 : e9 01         sbc #1
2756: 3 6598 : 85 0e         sta bcp
2758: 2 6601 : b0 02         bcs +n
275a: 5 6603 : c6 0f         dec @(++ bcp)
275a: 5 6608 :           n:
275a: 5 6613 :           next_bytecode:
275c: 2 6618 : a0 00         ldy #0
275e: 5 6620 : b1 0e         lda (bcp),y
2760: 2 6625 : f0 36         beq +done       ; Return to native code…
2762: 2 6627 : aa            tax
2763: 2 6629 : ca            dex
2764: 4 6631 : bd 4c 28      lda syscall_vectors_l,x
2767: 4 6635 : 8d 93 27      sta @(+ 1 mod_call)
276a: 4 6639 : bd 53 28      lda syscall_vectors_h,x
276d: 4 6643 : 8d 94 27      sta @(+ 2 mod_call)
2770: 4 6647 : bd 5a 28      lda syscall_args_l,x
2773: 3 6651 : 85 10         sta bca
2775: 4 6654 : bd 61 28      lda syscall_args_h,x
2778: 3 6658 : 85 11         sta @(++ bca)
277a: 5 6661 : b1 10         lda (bca),y
277c: 3 6666 : 85 12         sta num_args
277c: 3 6669 :           next_arg:
277e: 6 6672 : 20 37 27      jsr inc_bcp
2781: 5 6678 : c6 12         dec num_args
2783: 2 6683 : 30 0d         bmi script_call
2785: 6 6685 : 20 3e 27      jsr inc_bca
2788: 5 6691 : b1 10         lda (bca),y     ; Get zero page address from argument info.
278a: 2 6696 : aa            tax
278b: 5 6698 : b1 0e         lda (bcp),y     ; Copy in argument value.
278d: 4 6703 : 95 00         sta 0,x
278f: 4 6707 : 4c 7e 27      jmp next_arg
278f: 4 6711 :           script_call:
278f: 4 6715 :           mod_call:
2792: 6 6719 : 20 ff ff      jsr $ffff
2795: 4 6725 : 4c 5c 27      jmp next_bytecode
2795: 4 6729 :           done:
2798: 3 6733 : a5 0f         lda @(++ bcp)
279a: 3 6736 : 48            pha
279b: 3 6739 : a5 0e         lda bcp
279d: 3 6742 : 48            pha
279e: 3 6745 : a6 13         ldx srx
27a0: 6 6748 : 60            rts
27a0: 6 6754 :           apply:
27a1: 5 6760 : b1 0e         lda (bcp),y
27a3: 2 6765 : aa            tax
27a4: 2 6767 : ca            dex
27a5: 6 6769 : 20 37 27      jsr inc_bcp
27a8: 4 6775 : bd 4c 28      lda syscall_vectors_l,x
27ab: 4 6779 : 8d b5 27      sta @(+ 1 +mod_call)
27ae: 4 6783 : bd 53 28      lda syscall_vectors_h,x
27b1: 4 6787 : 8d b6 27      sta @(+ 2 +mod_call)
27b1: 4 6791 :           mod_call:
27b4: 4 6795 : 4c ff ff      jmp $ffff
27b4: 4 6799 :           setzw:
27b7: 3 6803 : a6 14         ldx a0
27b9: 3 6806 : a5 15         lda a1
27bb: 4 6809 : 95 00         sta 0,x
27bd: 3 6813 : a5 16         lda a2
27bf: 4 6816 : 95 01         sta 1,x
27c1: 6 6820 : 60            rts
27c1: 6 6826 :           setsd:
27c2: 3 6832 : a5 14         lda a0
27c4: 3 6835 : 85 00         sta s
27c6: 3 6838 : a5 15         lda a1
27c8: 3 6841 : 85 01         sta @(++ s)
27ca: 3 6844 : a5 16         lda a2
27cc: 3 6847 : 85 02         sta d
27ce: 3 6850 : a5 17         lda a3
27d0: 3 6853 : 85 03         sta @(++ d)
27d2: 6 6856 : 60            rts
27d2: 6 6862 :           clrmb:
27d3: 3 6868 : a5 14         lda a0
27d5: 2 6871 : 38            sec
27d6: 2 6873 : e9 01         sbc #1
27d8: 3 6875 : 85 02         sta d
27da: 3 6878 : a5 15         lda a1
27dc: 2 6881 : e9 00         sbc #0
27de: 3 6883 : 85 03         sta @(++ d)
27e0: 3 6886 : a4 16         ldy a2
27e2: 2 6889 : a9 00         lda #0
27e2: 2 6891 :           l:  sta (d),y
27e4: 5 6893 : 91 02     l:  sta (d),y
27e6: 2 6898 : 88            dey
27e7: 2 6900 : d0 fb         bne -l
27e9: 6 6902 : 60            rts
27e9: 6 6908 :           clrmw:
27ea: 3 6914 : a5 14         lda a0
27ec: 3 6917 : 85 02         sta d
27ee: 3 6920 : a5 15         lda a1
27f0: 3 6923 : 85 03         sta @(++ d)
27f2: 3 6926 : a5 16         lda a2
27f4: 3 6929 : 85 04         sta c
27f6: 3 6932 : a4 17         ldy a3
27f8: 2 6935 : c8            iny
27f9: 3 6937 : 84 05         sty @(++ c)
27fb: 2 6940 : a9 00         lda #0
27fd: 2 6942 : a8            tay
27fd: 2 6944 :           l:  sta (d),y
27fe: 5 6946 : 91 02     l:  sta (d),y
2800: 5 6951 : e6 02         inc d
2802: 2 6956 : d0 02         bne +n
2804: 5 6958 : e6 03         inc @(++ d)
2804: 5 6963 :           n:  dec c
2806: 5 6968 : c6 04     n:  dec c
2808: 2 6973 : d0 f4         bne -l
280a: 5 6975 : c6 05         dec @(++ c)
280c: 2 6980 : d0 f0         bne -l
280e: 6 6982 : 60            rts
280e: 6 6988 :           setmb:
280f: 3 6994 : a5 14         lda a0
2811: 2 6997 : 38            sec
2812: 2 6999 : e9 01         sbc #1
2814: 3 7001 : 85 02         sta d
2816: 3 7004 : a5 15         lda a1
2818: 2 7007 : e9 00         sbc #0
281a: 3 7009 : 85 03         sta @(++ d)
281c: 3 7012 : a4 16         ldy a2
281e: 3 7015 : a5 17         lda a3
281e: 3 7018 :           l:  sta (d),y
2820: 5 7021 : 91 02     l:  sta (d),y
2822: 2 7026 : 88            dey
2823: 2 7028 : d0 fb         bne -l
2825: 6 7030 : 60            rts
2825: 6 7036 :           setmw:
2826: 3 7042 : a5 14         lda a0
2828: 3 7045 : 85 02         sta d
282a: 3 7048 : a5 15         lda a1
282c: 3 7051 : 85 03         sta @(++ d)
282e: 3 7054 : a5 16         lda a2
2830: 3 7057 : 85 04         sta c
2832: 3 7060 : a4 17         ldy a3
2834: 2 7063 : c8            iny
2835: 3 7065 : 84 05         sty @(++ c)
2837: 3 7068 : a5 18         lda a4
2839: 2 7071 : a0 00         ldy #0
2839: 2 7073 :           l:  sta (d),y
283b: 5 7075 : 91 02     l:  sta (d),y
283d: 5 7080 : e6 02         inc d
283f: 2 7085 : d0 02         bne +n
2841: 5 7087 : e6 03         inc @(++ d)
2841: 5 7092 :           n:  dec c
2843: 5 7097 : c6 04     n:  dec c
2845: 2 7102 : d0 f4         bne -l
2847: 5 7104 : c6 05         dec @(++ c)
2849: 2 7109 : d0 f0         bne -l
284b: 6 7111 : 60            rts
284b: 6 7117 :           c_setzw=1
284b: 6 7123 :           c_setsd=2
284b: 6 7129 :           c_clrmb=3
284b: 6 7135 :           c_clrmw=4
284b: 6 7141 :           c_setmb=5
284b: 6 7147 :           c_setmw=6
284b: 6 7153 :           c_apply=7
284b: 6 7159 :           syscall_vectors_l: <setzw <setsd <clrmb <clrmw <setmb <setmw <apply
284c: 6 7165 : b7        syscall_vectors_l: <setzw <setsd <clrmb <clrmw <setmb <setmw <apply
284d: 6 7171 : c2        syscall_vectors_l: <setzw <setsd <clrmb <clrmw <setmb <setmw <apply
284e: 6 7177 : d3        syscall_vectors_l: <setzw <setsd <clrmb <clrmw <setmb <setmw <apply
284f: 6 7183 : ea        syscall_vectors_l: <setzw <setsd <clrmb <clrmw <setmb <setmw <apply
2850: 6 7189 : 0f        syscall_vectors_l: <setzw <setsd <clrmb <clrmw <setmb <setmw <apply
2851: 6 7195 : 26        syscall_vectors_l: <setzw <setsd <clrmb <clrmw <setmb <setmw <apply
2852: 6 7201 : a1        syscall_vectors_l: <setzw <setsd <clrmb <clrmw <setmb <setmw <apply
2852: 6 7207 :           syscall_vectors_h: >setzw >setsd >clrmb >clrmw >setmb >setmw >apply
2853: 6 7213 : 27        syscall_vectors_h: >setzw >setsd >clrmb >clrmw >setmb >setmw >apply
2854: 6 7219 : 27        syscall_vectors_h: >setzw >setsd >clrmb >clrmw >setmb >setmw >apply
2855: 6 7225 : 27        syscall_vectors_h: >setzw >setsd >clrmb >clrmw >setmb >setmw >apply
2856: 6 7231 : 27        syscall_vectors_h: >setzw >setsd >clrmb >clrmw >setmb >setmw >apply
2857: 6 7237 : 28        syscall_vectors_h: >setzw >setsd >clrmb >clrmw >setmb >setmw >apply
2858: 6 7243 : 28        syscall_vectors_h: >setzw >setsd >clrmb >clrmw >setmb >setmw >apply
2859: 6 7249 : 27        syscall_vectors_h: >setzw >setsd >clrmb >clrmw >setmb >setmw >apply
2859: 6 7255 :           syscall_args_l: <args_setzw <args_setsd <args_clrmb <args_clrmw <args_setmb <args_setmw <args_apply
285a: 6 7261 : 68        syscall_args_l: <args_setzw <args_setsd <args_clrmb <args_clrmw <args_setmb <args_setmw <args_apply
285b: 6 7267 : 6c        syscall_args_l: <args_setzw <args_setsd <args_clrmb <args_clrmw <args_setmb <args_setmw <args_apply
285c: 6 7273 : 71        syscall_args_l: <args_setzw <args_setsd <args_clrmb <args_clrmw <args_setmb <args_setmw <args_apply
285d: 6 7279 : 75        syscall_args_l: <args_setzw <args_setsd <args_clrmb <args_clrmw <args_setmb <args_setmw <args_apply
285e: 6 7285 : 7a        syscall_args_l: <args_setzw <args_setsd <args_clrmb <args_clrmw <args_setmb <args_setmw <args_apply
285f: 6 7291 : 7f        syscall_args_l: <args_setzw <args_setsd <args_clrmb <args_clrmw <args_setmb <args_setmw <args_apply
2860: 6 7297 : 85        syscall_args_l: <args_setzw <args_setsd <args_clrmb <args_clrmw <args_setmb <args_setmw <args_apply
2860: 6 7303 :           syscall_args_h: >args_setzw >args_setsd >args_clrmb >args_clrmw >args_setmb >args_setmw >args_apply
2861: 6 7309 : 28        syscall_args_h: >args_setzw >args_setsd >args_clrmb >args_clrmw >args_setmb >args_setmw >args_apply
2862: 6 7315 : 28        syscall_args_h: >args_setzw >args_setsd >args_clrmb >args_clrmw >args_setmb >args_setmw >args_apply
2863: 6 7321 : 28        syscall_args_h: >args_setzw >args_setsd >args_clrmb >args_clrmw >args_setmb >args_setmw >args_apply
2864: 6 7327 : 28        syscall_args_h: >args_setzw >args_setsd >args_clrmb >args_clrmw >args_setmb >args_setmw >args_apply
2865: 6 7333 : 28        syscall_args_h: >args_setzw >args_setsd >args_clrmb >args_clrmw >args_setmb >args_setmw >args_apply
2866: 6 7339 : 28        syscall_args_h: >args_setzw >args_setsd >args_clrmb >args_clrmw >args_setmb >args_setmw >args_apply
2867: 6 7345 : 28        syscall_args_h: >args_setzw >args_setsd >args_clrmb >args_clrmw >args_setmb >args_setmw >args_apply
2867: 6 7351 :           args_setzw: 3 a0 a1 a2
2868: 6 7357 : 03        args_setzw: 3 a0 a1 a2
2869: 6 7363 : 14        args_setzw: 3 a0 a1 a2
286a: 6 7369 : 15        args_setzw: 3 a0 a1 a2
286b: 6 7375 : 16        args_setzw: 3 a0 a1 a2
286b: 6 7381 :           args_setsd: 4 a0 a1 a2 a3
286c: 6 7387 : 04        args_setsd: 4 a0 a1 a2 a3
286d: 6 7393 : 14        args_setsd: 4 a0 a1 a2 a3
286e: 6 7399 : 15        args_setsd: 4 a0 a1 a2 a3
286f: 6 7405 : 16        args_setsd: 4 a0 a1 a2 a3
2870: 6 7411 : 17        args_setsd: 4 a0 a1 a2 a3
2870: 6 7417 :           args_clrmb: 3 a0 a1 a2
2871: 6 7423 : 03        args_clrmb: 3 a0 a1 a2
2872: 6 7429 : 14        args_clrmb: 3 a0 a1 a2
2873: 6 7435 : 15        args_clrmb: 3 a0 a1 a2
2874: 6 7441 : 16        args_clrmb: 3 a0 a1 a2
2874: 6 7447 :           args_clrmw: 4 a0 a1 a2 a3
2875: 6 7453 : 04        args_clrmw: 4 a0 a1 a2 a3
2876: 6 7459 : 14        args_clrmw: 4 a0 a1 a2 a3
2877: 6 7465 : 15        args_clrmw: 4 a0 a1 a2 a3
2878: 6 7471 : 16        args_clrmw: 4 a0 a1 a2 a3
2879: 6 7477 : 17        args_clrmw: 4 a0 a1 a2 a3
2879: 6 7483 :           args_setmb: 4 a0 a1 a2 a3
287a: 6 7489 : 04        args_setmb: 4 a0 a1 a2 a3
287b: 6 7495 : 14        args_setmb: 4 a0 a1 a2 a3
287c: 6 7501 : 15        args_setmb: 4 a0 a1 a2 a3
287d: 6 7507 : 16        args_setmb: 4 a0 a1 a2 a3
287e: 6 7513 : 17        args_setmb: 4 a0 a1 a2 a3
287e: 6 7519 :           args_setmw: 5 a0 a1 a2 a3 a4
287f: 6 7525 : 05        args_setmw: 5 a0 a1 a2 a3 a4
2880: 6 7531 : 14        args_setmw: 5 a0 a1 a2 a3 a4
2881: 6 7537 : 15        args_setmw: 5 a0 a1 a2 a3 a4
2882: 6 7543 : 16        args_setmw: 5 a0 a1 a2 a3 a4
2883: 6 7549 : 17        args_setmw: 5 a0 a1 a2 a3 a4
2884: 6 7555 : 18        args_setmw: 5 a0 a1 a2 a3 a4
2884: 6 7561 :           args_apply: 0
2885: 6 7567 : 00        args_apply: 0
2885: 6 7573 :           reuse_char:
2886: 3 7579 : a5 0d         lda curcol
2888: 3 7582 : a4 0a         ldy scrx
288a: 5 7585 : 91 08         sta (col),y
288c: 2 7590 : 8a            txa
288d: 3 7592 : 85 0c         sta curchar
288d: 3 7595 :           get_char_addr:
288f: 3 7598 : 85 1b         sta tmp
2891: 2 7601 : 0a            asl
2892: 2 7603 : 0a            asl
2893: 2 7605 : 0a            asl
2893: 2 7607 :           if @*add-charset-base?*
2894: 2 7609 : 18            clc
2895: 2 7611 : 69 00         adc #<charset
2897: 3 7613 : 08            php
2897: 3 7616 :           end
2898: 3 7619 : 85 02         sta d
289a: 3 7622 : a5 1b         lda tmp
289c: 2 7625 : 4a            lsr
289d: 2 7627 : 4a            lsr
289e: 2 7629 : 4a            lsr
289f: 2 7631 : 4a            lsr
28a0: 2 7633 : 4a            lsr
28a0: 2 7635 :           if @*add-charset-base?*
28a1: 4 7637 : 28            plp
28a2: 2 7641 : 69 14         adc #>charset
28a2: 2 7643 :           end
28a2: 2 7645 :           if @(not *add-charset-base?*)
28a2: 2 7647 :               ora #>charset
28a2: 2 7649 :           end
28a4: 3 7651 : 85 03         sta @(++ d)
28a6: 6 7654 : 60            rts
28a6: 6 7660 :           get_char_addr_s:
28a7: 3 7666 : 85 1b         sta tmp
28a9: 2 7669 : 0a            asl
28aa: 2 7671 : 0a            asl
28ab: 2 7673 : 0a            asl
28ab: 2 7675 :           if @*add-charset-base?*
28ac: 2 7677 : 18            clc
28ad: 2 7679 : 69 00         adc #<charset
28af: 3 7681 : 08            php
28af: 3 7684 :           end
28b0: 3 7687 : 85 00         sta s
28b2: 3 7690 : a5 1b         lda tmp
28b4: 2 7693 : 4a            lsr
28b5: 2 7695 : 4a            lsr
28b6: 2 7697 : 4a            lsr
28b7: 2 7699 : 4a            lsr
28b8: 2 7701 : 4a            lsr
28b8: 2 7703 :           if @*add-charset-base?*
28b9: 4 7705 : 28            plp
28ba: 2 7709 : 69 14         adc #>charset
28ba: 2 7711 :           end
28ba: 2 7713 :           if @(not *add-charset-base?*)
28ba: 2 7715 :               ora #>charset
28ba: 2 7717 :           end
28bc: 3 7719 : 85 01         sta @(++ s)
28be: 6 7722 : 60            rts
28be: 6 7728 :           alloc_wrap:
28bf: 3 7734 : a5 26         lda spriteframe
28c1: 2 7737 : 09 01         ora #first_sprite_char
28c3: 4 7739 : 4c d2 28      jmp fetch_char
28c3: 4 7743 :           alloc_char:
28c6: 3 7747 : a5 21         lda next_sprite_char
28c8: 2 7750 : 29 60         and #foreground
28ca: 2 7752 : c9 60         cmp #foreground
28cc: 2 7754 : f0 f1         beq alloc_wrap      ; No chars left…
28ce: 3 7756 : a5 21         lda next_sprite_char
28d0: 5 7759 : e6 21         inc next_sprite_char
28d0: 5 7764 :           fetch_char:
28d2: 2 7769 : 29 ff         and #charsetmask
28d4: 3 7771 : 48            pha
28d5: 6 7774 : 20 8f 28      jsr get_char_addr
28d8: 6 7780 : 20 b8 29      jsr blit_clear_char
28db: 4 7786 : 68            pla
28dc: 2 7790 : c8            iny
28dd: 6 7792 : 60            rts
28dd: 6 7798 :           test_position:
28de: 3 7804 : a5 0b         lda scry
28e0: 2 7807 : c9 20         cmp #screen_rows
28e2: 2 7809 : b0 04         bcs +l
28e4: 3 7811 : a5 0a         lda scrx
28e6: 2 7814 : c9 0f         cmp #screen_columns
28e6: 2 7816 :           l:  tay
28e8: 2 7818 : a8        l:  tay
28e9: 6 7820 : 60            rts
28e9: 6 7826 :           scraddr_get_char:
28ea: 6 7832 : 20 57 29      jsr scrcoladdr
28ea: 6 7838 :           get_char:
28ed: 6 7844 : 20 de 28      jsr test_position
28f0: 2 7850 : b0 2f         bcs cant_use_position
28f2: 5 7852 : b1 06         lda (scr),y
28f4: 2 7857 : f0 0e         beq +l              ; Screen char isn't used, yet…
28f6: 2 7859 : aa            tax
28f7: 2 7861 : 29 60         and #foreground
28f9: 2 7863 : c9 60         cmp #foreground
28fb: 2 7865 : f0 20         beq on_foreground   ; Can't draw on foreground…
28fd: 2 7867 : 8a            txa
28fe: 2 7869 : 29 80         and #framemask
2900: 3 7871 : c5 26         cmp spriteframe
2902: 2 7874 : f0 82         beq reuse_char      ; Already used by a sprite in current frame…
2902: 2 7876 :           l:  jsr alloc_char
2904: 6 7878 : 20 c6 28  l:  jsr alloc_char
2907: 3 7884 : 85 0c         sta curchar
2909: 6 7887 : 60            rts
2909: 6 7893 :           set_char:
290a: 3 7899 : 08            php
290b: 2 7902 : 98            tya
290c: 3 7904 : 48            pha
290d: 3 7907 : a5 0c         lda curchar
290f: 2 7910 : f0 08         beq +n
2911: 3 7912 : a4 0a         ldy scrx
2913: 5 7915 : 91 06         sta (scr),y
2915: 3 7920 : a5 0d         lda curcol
2917: 5 7923 : 91 08         sta (col),y
2917: 5 7928 :           n:  pla
2919: 4 7933 : 68        n:  pla
291a: 2 7937 : a8            tay
291b: 4 7939 : 28            plp
291c: 6 7943 : 60            rts
291c: 6 7949 :           on_foreground:
291d: 2 7955 : a9 20         lda #fg_collision
291f: 3 7957 : 85 28         sta foreground_collision
291f: 3 7960 :           cant_use_position:
2921: 2 7963 : a9 f0         lda #$f0            ; Draw into ROM.
2923: 3 7965 : 85 03         sta @(++ d)
2925: 2 7968 : a9 00         lda #0
2927: 3 7970 : 85 0c         sta curchar
2929: 6 7973 : 60            rts
2929: 6 7979 :           scraddr_clear_char:
292a: 6 7985 : 20 57 29      jsr scrcoladdr
292a: 6 7991 :           clear_char:
292d: 5 7997 : b1 06         lda (scr),y
292f: 2 8002 : f0 12         beq +l              ; Nothing to clear…
2931: 2 8004 : 29 60         and #foreground
2933: 2 8006 : c9 60         cmp #foreground
2935: 2 8008 : f0 0c         beq +l              ; Don't remove foreground chars…
2937: 5 8010 : b1 06         lda (scr),y
2939: 2 8015 : 29 80         and #framemask
293b: 3 8017 : c5 26         cmp spriteframe
293d: 2 8020 : f0 04         beq +l              ; Current frame…
293f: 2 8022 : a9 00         lda #0
2941: 5 8024 : 91 06         sta (scr),y
2941: 5 8029 :           l:  rts
2943: 6 8034 : 60        l:  rts
2943: 6 8040 :           scraddr:
2944: 3 8046 : a4 0b         ldy scry
2946: 4 8049 : b9 80 23      lda line_addresses,y
2949: 3 8053 : 85 06         sta scr
294b: 3 8056 : 85 08         sta col
294d: 2 8059 : c0 12         cpy #@(++ (/ 256 screen_columns))
294f: 2 8061 : a9 08         lda #@(half (high screen))
2951: 2 8063 : 2a            rol
2952: 3 8065 : 85 07         sta @(++ scr)
2954: 3 8068 : a4 0a         ldy scrx
2956: 6 8071 : 60            rts
2956: 6 8077 :           scrcoladdr:
2957: 3 8083 : a4 0b         ldy scry
2959: 4 8086 : b9 80 23      lda line_addresses,y
295c: 3 8090 : 85 06         sta scr
295e: 3 8093 : 85 08         sta col
2960: 2 8096 : c0 12         cpy #@(++ (/ 256 screen_columns))
2962: 2 8098 : a9 08         lda #@(half (high screen))
2964: 2 8100 : 2a            rol
2965: 3 8102 : 85 07         sta @(++ scr)
2967: 2 8105 : 29 01         and #1
2969: 2 8107 : 09 94         ora #>colors
296b: 3 8109 : 85 09         sta @(++ col)
296d: 3 8112 : a4 0a         ldy scrx
296f: 6 8115 : 60            rts
296f: 6 8121 :           clear_screen:
2970: 6 8127 : 00            0
2971: 6 8133 : 04            c_clrmw <screen >screen @(low 512) @(high 512)
2972: 6 8139 : 00            c_clrmw <screen >screen @(low 512) @(high 512)
2973: 6 8145 : 10            c_clrmw <screen >screen @(low 512) @(high 512)
2974: 6 8151 : 00            c_clrmw <screen >screen @(low 512) @(high 512)
2975: 6 8157 : 02            c_clrmw <screen >screen @(low 512) @(high 512)
2976: 6 8163 : 06            c_setmw <colors >colors @(low 512) @(high 512) @(+ multicolor white)
2977: 6 8169 : 00            c_setmw <colors >colors @(low 512) @(high 512) @(+ multicolor white)
2978: 6 8175 : 94            c_setmw <colors >colors @(low 512) @(high 512) @(+ multicolor white)
2979: 6 8181 : 00            c_setmw <colors >colors @(low 512) @(high 512) @(+ multicolor white)
297a: 6 8187 : 02            c_setmw <colors >colors @(low 512) @(high 512) @(+ multicolor white)
297b: 6 8193 : 09            c_setmw <colors >colors @(low 512) @(high 512) @(+ multicolor white)
297c: 6 8199 : 00            0
297d: 6 8205 : 60            rts
297d: 6 8211 :           blit_right:
297e: 3 8217 : 85 00         sta s
297e: 3 8220 :           _blit_right_loop:
2980: 5 8223 : b1 00         lda (s),y
2982: 2 8228 : 18            clc
2982: 2 8230 :           blit_right_addr:
2983: 2 8232 : 90 07         bcc +l
2985: 2 8234 : 4a            lsr
2986: 2 8236 : 4a            lsr
2987: 2 8238 : 4a            lsr
2988: 2 8240 : 4a            lsr
2989: 2 8242 : 4a            lsr
298a: 2 8244 : 4a            lsr
298b: 2 8246 : 4a            lsr
298b: 2 8248 :           l:  ora (d),y
298c: 5 8250 : 11 02     l:  ora (d),y
298e: 5 8255 : 91 02         sta (d),y
2990: 2 8260 : 88            dey
2991: 2 8262 : 10 ed         bpl _blit_right_loop
2993: 4 8264 : ad 9d 29      lda @(++ blit_left_addr)
2996: 6 8268 : 60            rts
2996: 6 8274 :           blit_left:
2997: 3 8280 : 85 00         sta s
2997: 3 8283 :           _blit_left_loop:
2999: 5 8286 : b1 00         lda (s),y
299b: 2 8291 : 18            clc
299b: 2 8293 :           blit_left_addr:
299c: 2 8295 : 90 08         bcc +l
299e: 2 8297 : 0a            asl
299f: 2 8299 : 0a            asl
29a0: 2 8301 : 0a            asl
29a1: 2 8303 : 0a            asl
29a2: 2 8305 : 0a            asl
29a3: 2 8307 : 0a            asl
29a4: 2 8309 : 0a            asl
29a5: 2 8311 : 0a            asl
29a5: 2 8313 :           l:  ora (d),y
29a6: 5 8315 : 11 02     l:  ora (d),y
29a8: 5 8320 : 91 02         sta (d),y
29aa: 2 8325 : 88            dey
29ab: 2 8327 : 10 ec         bpl _blit_left_loop
29ad: 6 8329 : 60            rts
29ad: 6 8335 :           blit_char:
29ae: 2 8341 : a0 07         ldy #7
29ae: 2 8343 :           l1: lda (s),y
29b0: 5 8345 : b1 00     l1: lda (s),y
29b2: 5 8350 : 91 02         sta (d),y
29b4: 2 8355 : 88            dey
29b5: 2 8357 : 10 f9         bpl -l1
29b7: 6 8359 : 60            rts
29b7: 6 8365 :           blit_clear_char:
29b8: 2 8371 : a0 07         ldy #7
29ba: 2 8373 : a9 00         lda #0
29ba: 2 8375 :           l:  sta (d),y
29bc: 5 8377 : 91 02     l:  sta (d),y
29be: 2 8382 : 88            dey
29bf: 2 8384 : 10 fb         bpl -l
29c1: 6 8386 : 60            rts
29c1: 6 8392 :           random:
29c2: 3 8398 : a5 36         lda last_random_value
29c4: 2 8401 : 2a            rol
29c5: 2 8403 : 69 00         adc #0
29c7: 4 8405 : 4d 04 90      eor vicreg_rasterhi
29ca: 3 8409 : 85 36         sta last_random_value
29cc: 6 8412 : 60            rts
29cc: 6 8418 :           abs:
29cd: 2 8424 : 10 05         bpl _abs_end
29cd: 2 8426 :           neg:eor #$ff
29cf: 2 8428 : 49 ff     neg:eor #$ff
29d1: 2 8430 : 18            clc
29d2: 2 8432 : 69 01         adc #1
29d2: 2 8434 :           _abs_end:
29d4: 6 8436 : 60            rts
29d4: 6 8442 :           init_game_mode:
29d5: 2 8448 : a2 07         ldx #7
29d7: 2 8450 : a9 00         lda #0
29d7: 2 8452 :           l:  sta charset,x
29d9: 4 8454 : 9d 00 14  l:  sta charset,x
29dc: 2 8458 : ca            dex
29dd: 2 8460 : 10 fa         bpl -l
29df: 2 8462 : a2 88         ldx #@(- gfx_background_end gfx_background)
29df: 2 8464 :           l:  lda @(-- gfx_background),x
29e1: 4 8466 : bd 37 20  l:  lda @(-- gfx_background),x
29e4: 4 8470 : 9d ff 1a      sta @(-- (+ charset (* bg_start 8))),x
29e7: 2 8474 : ca            dex
29e8: 2 8476 : d0 f7         bne -l
29ea: 4 8478 : ad e4 ed      lda $ede4
29ed: 2 8482 : c9 0c         cmp #$0c
29ef: 2 8484 : f0 0d         beq +pal
29ef: 2 8486 :           ntsc:
29f1: 2 8488 : a9 0c         lda #12         ; Horizontal screen origin.
29f3: 4 8490 : 8d 00 90      sta $9000
29f6: 2 8494 : a9 05         lda #5          ; Vertical screen origin.
29f8: 4 8496 : 8d 01 90      sta $9001
29fb: 4 8500 : 4c 08 2a      jmp +n
29fb: 4 8504 :           pal:
29fe: 2 8508 : a9 14         lda #20         ; Horizontal screen origin.
2a00: 4 8510 : 8d 00 90      sta $9000
2a03: 2 8514 : a9 15         lda #21         ; Vertical screen origin.
2a05: 4 8516 : 8d 01 90      sta $9001
2a05: 4 8520 :           n:  lda #15         ; Number of columns.
2a08: 2 8524 : a9 0f     n:  lda #15         ; Number of columns.
2a0a: 4 8526 : 8d 02 90      sta $9002
2a0d: 2 8530 : a9 40         lda #@(* 32 2)  ; Number of rows.
2a0f: 4 8532 : 8d 03 90      sta $9003
2a12: 2 8536 : a9 cd         lda #@(+ vic_screen_1000 vic_charset_1400)
2a14: 4 8538 : 8d 05 90      sta $9005
2a17: 4 8542 : ad 0e 90      lda $900e
2a1a: 2 8546 : 29 0f         and #$0f
2a1c: 2 8548 : 09 b0         ora #@(* light_cyan 16) ; Auxiliary color.
2a1e: 4 8550 : 8d 0e 90      sta $900e
2a21: 2 8554 : a9 0a         lda #@(+ reverse red)   ; Screen and border color.
2a23: 4 8556 : 8d 0f 90      sta $900f
2a26: 6 8560 : 60            rts
2a26: 6 8566 :           print4x8:
2a27: 3 8572 : 86 1e         stx p_x
2a29: 3 8575 : 84 1f         sty p_y
2a2b: 3 8578 : 08            php
2a2c: 2 8581 : a0 00         ldy #0
2a2e: 3 8583 : 84 1c         sty tmp2
2a30: 2 8586 : 0a            asl
2a31: 5 8588 : 26 1c         rol tmp2
2a33: 2 8593 : 0a            asl
2a34: 5 8595 : 26 1c         rol tmp2
2a36: 2 8600 : 0a            asl
2a37: 5 8602 : 26 1c         rol tmp2
2a39: 2 8607 : 18            clc
2a3a: 2 8609 : 69 98         adc #<charset4x8
2a3c: 3 8611 : 85 1b         sta tmp
2a3e: 3 8614 : a5 1c         lda tmp2
2a40: 2 8617 : 69 21         adc #>charset4x8
2a42: 3 8619 : 85 1c         sta tmp2
2a44: 4 8622 : 28            plp
2a45: 2 8626 : b0 0f         bcs +n
2a47: 2 8628 : a0 07         ldy #7
2a47: 2 8630 :           l:  lda (tmp),y
2a49: 5 8632 : b1 1b     l:  lda (tmp),y
2a4b: 2 8637 : 0a            asl
2a4c: 2 8639 : 0a            asl
2a4d: 2 8641 : 0a            asl
2a4e: 2 8643 : 0a            asl
2a4f: 5 8645 : 91 02         sta (d),y
2a51: 2 8650 : 88            dey
2a52: 2 8652 : 10 f5         bpl -l
2a54: 2 8654 : 30 0b         bmi +r
2a54: 2 8656 :           n:  ldy #7
2a56: 2 8658 : a0 07     n:  ldy #7
2a56: 2 8660 :           l:  lda (tmp),y
2a58: 5 8662 : b1 1b     l:  lda (tmp),y
2a5a: 5 8667 : 11 02         ora (d),y
2a5c: 5 8672 : 91 02         sta (d),y
2a5e: 2 8677 : 88            dey
2a5f: 2 8679 : 10 f7         bpl -l
2a5f: 2 8681 :           r:  ldx p_x
2a61: 3 8683 : a6 1e     r:  ldx p_x
2a63: 3 8686 : a4 1f         ldy p_y
2a65: 6 8689 : 60            rts
2a65: 6 8695 :           add_sprite:
2a66: 3 8701 : 86 1e         stx add_sprite_x
2a68: 3 8704 : 84 1f         sty add_sprite_y
2a6a: 2 8707 : a0 0f         ldy #@(-- num_sprites)
2a6a: 2 8709 :           l:  lda sprite_rr
2a6c: 3 8711 : a5 27     l:  lda sprite_rr
2a6e: 2 8714 : 29 0f         and #@(-- num_sprites)
2a70: 2 8716 : aa            tax
2a71: 5 8718 : e6 27         inc sprite_rr
2a73: 4 8723 : b5 79         lda sprites_i,x     ; Decorative?
2a75: 2 8727 : 30 0b         bmi replace_sprite2 ; Yes…
2a77: 2 8729 : 88            dey
2a78: 2 8731 : 10 f2         bpl -l
2a7a: 2 8733 : a2 ff         ldx #255
2a7a: 2 8735 :           sprite_added:
2a7c: 2 8737 : 8a            txa
2a7c: 2 8739 :           r:  ldx add_sprite_x
2a7d: 3 8741 : a6 1e     r:  ldx add_sprite_x
2a7f: 3 8744 : a4 1f         ldy add_sprite_y
2a81: 6 8747 : 60            rts
2a81: 6 8753 :           replace_sprite2:
2a82: 2 8759 : 8a            txa
2a83: 3 8761 : a4 1f         ldy add_sprite_y
2a85: 4 8764 : 4c 99 2a      jmp replace_sprite
2a85: 4 8768 :           remove_sprite:
2a88: 2 8772 : 8a            txa
2a89: 2 8774 : 29 f0         and #$f0
2a8b: 2 8776 : f0 01         beq +ok
2a8b: 2 8778 :           stop:
2a8d: 2 8780 : ea            nop
2a8d: 2 8782 :           ok:
2a8e: 3 8784 : 86 1e         stx add_sprite_x
2a90: 3 8787 : 84 1f         sty add_sprite_y
2a90: 3 8790 :           remove_sprite_regs_already_saved:
2a92: 2 8793 : a9 80         lda #is_inactive
2a94: 4 8795 : 95 79         sta sprites_i,x
2a96: 4 8799 : 4c 7d 2a      jmp -r
2a96: 4 8803 :           replace_sprite:
2a99: 2 8807 : a9 59         lda #sprites_x          ; Copy descriptor to sprite table.
2a9b: 4 8809 : 8d a2 2a      sta @(++ +selfmod)
2a9b: 4 8813 :           l:  lda sprite_inits,y
2a9e: 4 8817 : b9 01 27  l:  lda sprite_inits,y
2a9e: 4 8821 :           selfmod:
2aa1: 4 8825 : 95 59         sta sprites_x,x
2aa3: 2 8829 : c8            iny
2aa4: 4 8831 : ad a2 2a      lda @(++ -selfmod)
2aa7: 2 8835 : c9 d9         cmp #sprites_d
2aa9: 2 8837 : f0 d1         beq sprite_added
2aab: 2 8839 : 69 10         adc #num_sprites
2aad: 4 8841 : 8d a2 2a      sta @(++ -selfmod)
2ab0: 4 8845 : 4c 9e 2a      jmp -l
2ab0: 4 8849 :           remove_sprites:
2ab3: 2 8853 : a2 0f         ldx #@(-- num_sprites)
2ab3: 2 8855 :           l:  jsr remove_sprite
2ab5: 6 8857 : 20 88 2a  l:  jsr remove_sprite
2ab8: 2 8863 : ca            dex
2ab9: 2 8865 : 10 fa         bpl -l
2abb: 6 8867 : 60            rts
2abb: 6 8873 :           sprite_up:
2abc: 6 8879 : 20 cf 29      jsr neg
2abc: 6 8885 :           sprite_down:
2abf: 2 8891 : 18            clc
2ac0: 4 8893 : 75 69         adc sprites_y,x
2ac2: 4 8897 : 95 69         sta sprites_y,x
2ac4: 6 8901 : 60            rts
2ac4: 6 8907 :           sprite_left:
2ac5: 6 8913 : 20 cf 29      jsr neg
2ac5: 6 8919 :           sprite_right:
2ac8: 2 8925 : 18            clc
2ac9: 4 8927 : 75 59         adc sprites_x,x
2acb: 4 8931 : 95 59         sta sprites_x,x
2acd: 6 8935 : 60            rts
2acd: 6 8941 :           test_sprite_out:
2ace: 4 8947 : b5 59         lda sprites_x,x
2ad0: 2 8951 : 18            clc
2ad1: 2 8953 : 69 08         adc #8
2ad3: 2 8955 : c9 80         cmp #@(* (++ screen_columns) 8)
2ad5: 2 8957 : b0 07         bcs +out
2ad7: 4 8959 : b5 69         lda sprites_y,x
2ad9: 2 8963 : 18            clc
2ada: 2 8965 : 69 08         adc #8
2adc: 2 8967 : c9 08         cmp #@(* (++ screen_rows) 8)
2adc: 2 8969 :           out:rts
2ade: 6 8971 : 60        out:rts
2ade: 6 8977 :           find_hit:
2adf: 3 8983 : 86 1b         stx tmp
2ae1: 4 8986 : b5 c9         lda sprites_dimensions,x
2ae3: 2 8990 : 29 07         and #%111
2ae5: 2 8992 : 0a            asl
2ae6: 2 8994 : 0a            asl
2ae7: 2 8996 : 0a            asl
2ae8: 2 8998 : 18            clc
2ae9: 4 9000 : 75 59         adc sprites_x,x
2aeb: 3 9004 : 85 1c         sta tmp2
2aed: 4 9007 : b5 c9         lda sprites_dimensions,x
2aef: 2 9011 : 29 38         and #%111000
2af1: 2 9013 : 18            clc
2af2: 4 9015 : 75 69         adc sprites_y,x
2af4: 3 9019 : 85 1d         sta tmp3
2af6: 2 9022 : a0 0f         ldy #@(-- num_sprites)
2af6: 2 9024 :           l:  cpy tmp             ; Skip same sprite.
2af8: 3 9026 : c4 1b     l:  cpy tmp             ; Skip same sprite.
2afa: 2 9029 : f0 32         beq +n
2afc: 4 9031 : b9 79 00      lda sprites_i,y     ; Skip inactive sprite.
2aff: 2 9035 : 30 2d         bmi +n
2b01: 4 9037 : b9 59 00      lda sprites_x,y
2b04: 3 9041 : c5 1c         cmp tmp2
2b06: 2 9044 : b0 26         bcs +n
2b08: 4 9046 : b9 c9 00      lda sprites_dimensions,y
2b0b: 2 9050 : 29 07         and #%111
2b0d: 2 9052 : 0a            asl
2b0e: 2 9054 : 0a            asl
2b0f: 2 9056 : 0a            asl
2b10: 2 9058 : 18            clc
2b11: 4 9060 : 79 59 00      adc sprites_x,y
2b14: 4 9064 : d5 59         cmp sprites_x,x
2b16: 2 9068 : 90 16         bcc +n
2b18: 4 9070 : b9 69 00      lda sprites_y,y
2b1b: 3 9074 : c5 1d         cmp tmp3
2b1d: 2 9077 : b0 0f         bcs +n
2b1f: 4 9079 : b9 c9 00      lda sprites_dimensions,y
2b22: 2 9083 : 29 38         and #%111000
2b24: 2 9085 : 18            clc
2b25: 4 9087 : 79 69 00      adc sprites_y,y
2b28: 4 9091 : d5 69         cmp sprites_y,x
2b2a: 2 9095 : 90 02         bcc +n
2b2c: 2 9097 : 18            clc
2b2d: 6 9099 : 60            rts
2b2d: 6 9105 :           n:  dey
2b2e: 2 9111 : 88        n:  dey
2b2f: 2 9113 : 10 c7         bpl -l
2b31: 2 9115 : 38            sec
2b31: 2 9117 :           ok: rts
2b32: 6 9119 : 60        ok: rts
2b32: 6 9125 :           call_sprite_controllers:
2b33: 2 9131 : a2 0f         ldx #@(-- num_sprites)
2b33: 2 9133 :           l1: lda sprites_i,x
2b35: 4 9135 : b5 79     l1: lda sprites_i,x
2b37: 2 9139 : 30 11         bmi +n1
2b39: 4 9141 : b5 b9         lda sprites_fh,x
2b3b: 4 9145 : 8d 47 2b      sta @(+ +m1 2)
2b3e: 4 9149 : b5 a9         lda sprites_fl,x
2b40: 4 9153 : 8d 46 2b      sta @(++ +m1)
2b43: 3 9157 : 86 20         stx call_controllers_x
2b43: 3 9160 :           m1: jsr $1234
2b45: 6 9163 : 20 34 12  m1: jsr $1234
2b48: 3 9169 : a6 20         ldx call_controllers_x
2b48: 3 9172 :           n1: dex
2b4a: 2 9175 : ca        n1: dex
2b4b: 2 9177 : 10 e8         bpl -l1
2b4d: 6 9179 : 60            rts
2b4d: 6 9185 :           draw_sprites:
2b4e: 2 9191 : a2 0f         ldx #@(-- num_sprites)
2b4e: 2 9193 :           l:  sei
2b50: 2 9195 : 78        l:  sei
2b50: 2 9197 :           if @*show-cpu?*
2b50: 2 9199 :               lda #@(+ 8 4)
2b50: 2 9201 :               sta $900f
2b50: 2 9203 :           end
2b51: 4 9205 : b5 79         lda sprites_i,x
2b53: 2 9209 : 30 0d         bmi +n
2b55: 2 9211 : a9 00         lda #0
2b57: 3 9213 : 85 28         sta foreground_collision
2b59: 6 9216 : 20 a6 2c      jsr draw_huge_sprite
2b5c: 4 9222 : b5 79         lda sprites_i,x
2b5e: 3 9226 : 05 28         ora foreground_collision
2b60: 4 9229 : 95 79         sta sprites_i,x
2b60: 4 9233 :           n:
2b62: 2 9237 : c9 c0         cmp #@(+ is_inactive was_cleared)
2b64: 2 9239 : f0 49         beq +n
2b64: 2 9241 :           if @*show-cpu?*
2b64: 2 9243 :               lda #@(+ 8 1)
2b64: 2 9245 :               sta $900f
2b64: 2 9247 :           end
2b66: 4 9249 : bd 20 02      lda sprites_ox,x
2b69: 3 9253 : 85 0a         sta scrx
2b6b: 4 9256 : bd 80 02      lda sprites_ow,x
2b6e: 4 9260 : 8d a3 02      sta sprite_cols
2b6e: 4 9264 :           l2: lda sprites_oy,x
2b71: 4 9268 : bd 30 02  l2: lda sprites_oy,x
2b74: 3 9272 : 85 0b         sta scry
2b76: 4 9275 : bd 90 02      lda sprites_oh,x
2b79: 4 9279 : 8d a5 02      sta sprite_rows
2b79: 4 9283 :           l3: jsr scraddr_clear_char
2b7c: 6 9287 : 20 2a 29  l3: jsr scraddr_clear_char
2b7f: 5 9293 : e6 0b         inc scry
2b81: 6 9298 : ce a5 02      dec sprite_rows
2b84: 2 9304 : 10 f6         bpl -l3
2b86: 5 9306 : e6 0a         inc scrx
2b88: 6 9311 : ce a3 02      dec sprite_cols
2b8b: 2 9317 : 10 e4         bpl -l2
2b8d: 4 9319 : b5 59         lda sprites_x,x
2b8f: 2 9323 : 4a            lsr
2b90: 2 9325 : 4a            lsr
2b91: 2 9327 : 4a            lsr
2b92: 4 9329 : 9d 20 02      sta sprites_ox,x
2b95: 4 9333 : b5 69         lda sprites_y,x
2b97: 2 9337 : 4a            lsr
2b98: 2 9339 : 4a            lsr
2b99: 2 9341 : 4a            lsr
2b9a: 4 9343 : 9d 30 02      sta sprites_oy,x
2b9d: 4 9347 : bd 60 02      lda sprites_w,x
2ba0: 4 9351 : 9d 80 02      sta sprites_ow,x
2ba3: 4 9355 : bd 70 02      lda sprites_h,x
2ba6: 4 9359 : 9d 90 02      sta sprites_oh,x
2ba9: 4 9363 : b5 79         lda sprites_i,x
2bab: 2 9367 : 09 40         ora #was_cleared
2bad: 4 9369 : 95 79         sta sprites_i,x
2bad: 4 9373 :           n:
2bad: 4 9377 :           if @*show-cpu?*
2bad: 4 9381 :               lda #@(+ 8 2)
2bad: 4 9385 :               sta $900f
2bad: 4 9389 :           end
2baf: 2 9393 : 58            cli
2bb0: 2 9395 : ca            dex
2bb1: 2 9397 : 10 9d         bpl -l
2bb3: 6 9399 : 60            rts
2bb3: 6 9405 :           clear_sprites:
2bb4: 2 9411 : a2 00         ldx #0
2bb4: 2 9413 :           l:  lda screen,x
2bb6: 4 9415 : bd 00 10  l:  lda screen,x
2bb9: 2 9419 : 29 60         and #foreground
2bbb: 2 9421 : c9 60         cmp #foreground
2bbd: 2 9423 : f0 05         beq +n
2bbf: 2 9425 : a9 00         lda #0
2bc1: 4 9427 : 9d 00 10      sta screen,x
2bc1: 4 9431 :           n:  lda @(+ 258 screen),x
2bc4: 4 9435 : bd 02 11  n:  lda @(+ 258 screen),x
2bc7: 2 9439 : 29 60         and #foreground
2bc9: 2 9441 : c9 60         cmp #foreground
2bcb: 2 9443 : f0 05         beq +n
2bcd: 2 9445 : a9 00         lda #0
2bcf: 4 9447 : 9d 02 11      sta @(+ 258 screen),x
2bcf: 4 9451 :           n:  dex
2bd2: 2 9455 : ca        n:  dex
2bd3: 2 9457 : d0 e1         bne -l
2bd5: 6 9459 : 60            rts
2bd5: 6 9465 :           draw_sprite:
2bd6: 3 9471 : 86 1f         stx draw_sprite_x
2bd8: 2 9474 : a9 21         lda #>sprite_gfx
2bda: 3 9476 : 85 01         sta @(++ s)
2bdc: 4 9479 : b5 99         lda sprites_l,x
2bde: 3 9483 : 85 00         sta s
2be0: 3 9486 : 85 23         sta sprite_data_top
2be2: 4 9489 : b5 89         lda sprites_c,x
2be4: 3 9493 : 85 0d         sta curcol
2be6: 4 9496 : b5 59         lda sprites_x,x
2be8: 2 9500 : 4a            lsr
2be9: 2 9502 : 4a            lsr
2bea: 2 9504 : 4a            lsr
2beb: 3 9506 : 85 0a         sta scrx
2bed: 4 9509 : b5 69         lda sprites_y,x
2bef: 2 9513 : 4a            lsr
2bf0: 2 9515 : 4a            lsr
2bf1: 2 9517 : 4a            lsr
2bf2: 3 9519 : 85 0b         sta scry
2bf4: 4 9522 : b5 59         lda sprites_x,x
2bf6: 2 9526 : 29 07         and #%111
2bf8: 4 9528 : 8d 9d 29      sta @(++ blit_left_addr)
2bfb: 2 9532 : a8            tay
2bfc: 4 9534 : b9 78 23      lda negate7,y
2bff: 4 9538 : 8d 84 29      sta @(++ blit_right_addr)
2c02: 4 9542 : b5 69         lda sprites_y,x
2c04: 2 9546 : 29 07         and #%111
2c06: 3 9548 : 85 22         sta sprite_shift_y
2c08: 2 9551 : a8            tay
2c09: 4 9553 : b9 78 23      lda negate7,y
2c0c: 3 9557 : 85 25         sta sprite_height_top
2c0e: 6 9560 : 20 57 29      jsr scrcoladdr
2c11: 6 9566 : 20 57 2c      jsr prepare_upper_blit
2c14: 6 9572 : 20 7e 29      jsr blit_right
2c17: 6 9578 : 20 0a 29      jsr set_char
2c1a: 2 9584 : f0 0d         beq +n
2c1c: 5 9586 : e6 0a         inc scrx
2c1e: 6 9591 : 20 57 2c      jsr prepare_upper_blit
2c21: 6 9597 : 20 97 29      jsr blit_left
2c24: 6 9603 : 20 0a 29      jsr set_char
2c27: 5 9609 : c6 0a         dec scrx
2c27: 5 9614 :           n:  lda sprite_shift_y
2c29: 3 9619 : a5 22     n:  lda sprite_shift_y
2c2b: 2 9622 : f0 27         beq +n
2c2d: 5 9624 : e6 0b         inc scry
2c2f: 6 9629 : 20 ea 28      jsr scraddr_get_char
2c32: 3 9635 : a5 00         lda s
2c34: 2 9638 : 38            sec
2c35: 3 9640 : 65 25         adc sprite_height_top
2c37: 3 9643 : 85 24         sta sprite_data_bottom
2c39: 3 9646 : a4 22         ldy sprite_shift_y
2c3b: 2 9649 : 88            dey
2c3c: 6 9651 : 20 7e 29      jsr blit_right
2c3f: 6 9657 : 20 0a 29      jsr set_char
2c42: 2 9663 : f0 10         beq +n
2c44: 5 9665 : e6 0a         inc scrx
2c46: 6 9670 : 20 ed 28      jsr get_char
2c49: 3 9676 : a5 24         lda sprite_data_bottom
2c4b: 3 9679 : a4 22         ldy sprite_shift_y
2c4d: 2 9682 : 88            dey
2c4e: 6 9684 : 20 97 29      jsr blit_left
2c51: 6 9690 : 20 0a 29      jsr set_char
2c51: 6 9696 :           n:  ldx draw_sprite_x
2c54: 3 9702 : a6 1f     n:  ldx draw_sprite_x
2c56: 6 9705 : 60            rts
2c56: 6 9711 :           prepare_upper_blit:
2c57: 6 9717 : 20 ed 28      jsr get_char
2c5a: 3 9723 : a5 02         lda d
2c5c: 2 9726 : 18            clc
2c5d: 3 9728 : 65 22         adc sprite_shift_y
2c5f: 3 9731 : 85 02         sta d
2c61: 3 9734 : a5 23         lda sprite_data_top
2c63: 3 9737 : a4 25         ldy sprite_height_top
2c65: 6 9740 : 60            rts
2c65: 6 9746 :           sprites_nchars: @(gen-sprite-nchars)
2ca5: 6 9752 : 00 00 00 00 00 00 00 00 00 01 02 03 04 05 06 07 00 02 04 06 08 0a 0c 0e 00 03 06 09 0c 0f 12 15 00 04 08 0c 10 14 18 1c 00 05 0a 0f 14 19 1e 23 00 06 0c 12 18 1e 24 2a 00 07 0e 15 1c 23 2a 31sprites_nchars: @(gen-sprite-nchars)
2ca5: 6 9758 :           draw_huge_sprite:
2ca6: 4 9764 : b5 59         lda sprites_x,x
2ca8: 2 9768 : 4a            lsr
2ca9: 2 9770 : 4a            lsr
2caa: 2 9772 : 4a            lsr
2cab: 4 9774 : 8d a1 02      sta sprite_x
2cae: 4 9778 : b5 69         lda sprites_y,x
2cb0: 2 9782 : 4a            lsr
2cb1: 2 9784 : 4a            lsr
2cb2: 2 9786 : 4a            lsr
2cb3: 4 9788 : 8d a2 02      sta sprite_y
2cb6: 4 9792 : b5 c9         lda sprites_dimensions,x
2cb8: 2 9796 : 29 07         and #%111
2cba: 4 9798 : 8d a3 02      sta sprite_cols
2cbd: 4 9802 : 8d a4 02      sta sprite_inner_cols
2cc0: 4 9806 : b5 59         lda sprites_x,x
2cc2: 2 9810 : 29 07         and #%111
2cc4: 2 9812 : f0 03         beq +n
2cc6: 6 9814 : ee a3 02      inc sprite_cols
2cc6: 6 9820 :           n:
2cc9: 4 9826 : b5 c9         lda sprites_dimensions,x
2ccb: 2 9830 : 4a            lsr
2ccc: 2 9832 : 4a            lsr
2ccd: 2 9834 : 4a            lsr
2cce: 4 9836 : 8d a5 02      sta sprite_rows
2cd1: 4 9840 : 8d a6 02      sta sprite_inner_rows
2cd4: 2 9844 : 0a            asl
2cd5: 2 9846 : 0a            asl
2cd6: 2 9848 : 0a            asl
2cd7: 4 9850 : 8d a9 02      sta sprite_inner_lines
2cda: 4 9854 : 8d a8 02      sta sprite_lines
2cdd: 4 9858 : b5 69         lda sprites_y,x
2cdf: 2 9862 : 29 07         and #%111
2ce1: 2 9864 : f0 0c         beq +n
2ce3: 6 9866 : ee a5 02      inc sprite_rows
2ce6: 4 9872 : ad a8 02      lda sprite_lines
2ce9: 2 9876 : 18            clc
2cea: 2 9878 : 69 08         adc #8
2cec: 4 9880 : 8d a8 02      sta sprite_lines
2cec: 4 9884 :           n:
2cef: 4 9888 : ad a3 02      lda sprite_cols
2cf2: 4 9892 : 9d 60 02      sta sprites_w,x
2cf5: 4 9896 : ad a5 02      lda sprite_rows
2cf8: 4 9900 : 9d 70 02      sta sprites_h,x
2cfb: 3 9904 : a5 21         lda next_sprite_char
2cfb: 3 9907 :           l:  sta sprite_char
2cfd: 4 9910 : 8d a0 02  l:  sta sprite_char
2d00: 6 9914 : 20 8f 28      jsr get_char_addr
2d03: 4 9920 : ad a5 02      lda sprite_rows
2d06: 2 9924 : 0a            asl
2d07: 2 9926 : 0a            asl
2d08: 2 9928 : 0a            asl
2d09: 4 9930 : 0d a3 02      ora sprite_cols
2d0c: 2 9934 : a8            tay
2d0d: 4 9936 : b9 66 2c      lda sprites_nchars,y
2d10: 2 9940 : 18            clc
2d11: 3 9942 : 65 21         adc next_sprite_char
2d13: 3 9945 : 85 21         sta next_sprite_char
2d15: 2 9948 : 29 60         and #foreground
2d17: 2 9950 : c9 60         cmp #foreground                                                                                          
2d19: 2 9952 : d0 09         bne +n
2d1b: 3 9954 : a5 26         lda spriteframe
2d1d: 2 9957 : 09 01         ora #first_sprite_char
2d1f: 3 9959 : 85 21         sta next_sprite_char
2d21: 4 9962 : 4c fd 2c      jmp -l
2d21: 4 9966 :           n:
2d24: 4 9970 : ad a3 02      lda sprite_cols
2d27: 3 9974 : 85 1d         sta tmp3
2d29: 4 9977 : ad a1 02      lda sprite_x
2d2c: 3 9981 : 85 0a         sta scrx
2d2c: 3 9984 :           l2: lda sprite_rows
2d2e: 4 9987 : ad a5 02  l2: lda sprite_rows
2d31: 3 9991 : 85 1c         sta tmp2
2d33: 4 9994 : ad a2 02      lda sprite_y
2d36: 3 9998 : 85 0b         sta scry
2d36: 3 10001 :          l:  jsr scraddr
2d38: 6 10004 : 20 44 29 l:  jsr scraddr
2d3b: 5 10010 : b1 06        lda (scr),y
2d3d: 2 10015 : a8           tay
2d3e: 2 10017 : 29 80        and #framemask
2d40: 3 10019 : c5 26        cmp spriteframe
2d42: 2 10022 : d0 0a        bne +m
2d44: 2 10024 : 98           tya
2d45: 6 10026 : 20 a7 28     jsr get_char_addr_s
2d48: 6 10032 : 20 ae 29     jsr blit_char
2d4b: 4 10038 : 4c 51 2d     jmp +n
2d4b: 4 10042 :          m:  jsr blit_clear_char
2d4e: 6 10046 : 20 b8 29 m:  jsr blit_clear_char
2d4e: 6 10052 :          n:
2d51: 5 10058 : e6 0b        inc scry
2d53: 3 10063 : a5 02        lda d
2d55: 2 10066 : 18           clc
2d56: 2 10068 : 69 08        adc #8
2d58: 3 10070 : 85 02        sta d
2d5a: 2 10073 : 90 02        bcc +n
2d5c: 5 10075 : e6 03        inc @(++ d)
2d5c: 5 10080 :          n:  dec tmp2
2d5e: 5 10085 : c6 1c    n:  dec tmp2
2d60: 2 10090 : d0 d6        bne -l
2d62: 5 10092 : e6 0a        inc scrx
2d64: 5 10097 : c6 1d        dec tmp3
2d66: 2 10102 : d0 c6        bne -l2
2d68: 4 10104 : b5 59        lda sprites_x,x
2d6a: 2 10108 : 29 07        and #%111
2d6c: 4 10110 : 8d 9d 29     sta @(++ blit_left_addr)
2d6f: 2 10114 : a8           tay
2d70: 4 10116 : b9 78 23     lda negate7,y
2d73: 4 10120 : 8d 84 29     sta @(++ blit_right_addr)
2d76: 4 10124 : ad a0 02     lda sprite_char
2d79: 6 10128 : 20 8f 28     jsr get_char_addr
2d7c: 4 10134 : b5 69        lda sprites_y,x
2d7e: 2 10138 : 29 07        and #%111
2d80: 2 10140 : 18           clc
2d81: 3 10142 : 65 02        adc d
2d83: 3 10145 : 85 02        sta d
2d85: 2 10148 : 90 02        bcc +n
2d87: 5 10150 : e6 03        inc @(++ d)
2d87: 5 10155 :          n:
2d89: 4 10160 : b5 99        lda sprites_l,x
2d8b: 3 10164 : 85 00        sta s
2d8d: 2 10167 : a9 21        lda #>sprite_gfx
2d8f: 3 10169 : 85 01        sta @(++ s)
2d91: 4 10172 : ad a4 02     lda sprite_inner_cols
2d94: 3 10176 : 85 1c        sta tmp2
2d94: 3 10179 :          l:  ldy sprite_inner_lines
2d96: 4 10182 : ac a9 02 l:  ldy sprite_inner_lines
2d99: 2 10186 : 88           dey
2d9a: 6 10188 : 20 80 29     jsr _blit_right_loop
2d9d: 3 10194 : a5 02        lda d
2d9f: 2 10197 : 18           clc
2da0: 4 10199 : 6d a8 02     adc sprite_lines
2da3: 3 10203 : 85 02        sta d
2da5: 2 10206 : 90 02        bcc +n
2da7: 5 10208 : e6 03        inc @(++ d)
2da7: 5 10213 :          n:
2da9: 4 10218 : b5 59        lda sprites_x,x
2dab: 2 10222 : 29 07        and #%111
2dad: 2 10224 : f0 07        beq +n
2daf: 4 10226 : ac a9 02     ldy sprite_inner_lines
2db2: 2 10230 : 88           dey
2db3: 6 10232 : 20 99 29     jsr _blit_left_loop
2db3: 6 10238 :          n:
2db6: 5 10244 : c6 1c        dec tmp2
2db8: 2 10249 : f0 0f        beq +plot_chars
2dba: 3 10251 : a5 00        lda s
2dbc: 2 10254 : 18           clc
2dbd: 4 10256 : 6d a9 02     adc sprite_inner_lines
2dc0: 3 10260 : 85 00        sta s
2dc2: 2 10263 : 90 d2        bcc -l
2dc4: 5 10265 : e6 01        inc @(++ s)
2dc6: 4 10270 : 4c 96 2d     jmp -l
2dc6: 4 10274 :          plot_chars:
2dc9: 4 10278 : ad a0 02     lda sprite_char
2dcc: 3 10282 : 85 1b        sta tmp
2dce: 4 10285 : ad a1 02     lda sprite_x
2dd1: 3 10289 : 85 0a        sta scrx
2dd3: 4 10292 : ad a3 02     lda sprite_cols
2dd6: 3 10296 : 85 1d        sta tmp3
2dd6: 3 10299 :          l2: lda sprite_y
2dd8: 4 10302 : ad a2 02 l2: lda sprite_y
2ddb: 3 10306 : 85 0b        sta scry
2ddd: 4 10309 : ad a5 02     lda sprite_rows
2de0: 3 10313 : 85 1c        sta tmp2
2de0: 3 10316 :          l:  lda scry
2de2: 3 10319 : a5 0b    l:  lda scry
2de4: 2 10322 : c9 01        cmp #1
2de6: 2 10324 : 90 13        bcc +n
2de8: 6 10326 : 20 57 29     jsr scrcoladdr
2deb: 5 10332 : b1 06        lda (scr),y
2ded: 2 10337 : 29 60        and #foreground
2def: 2 10339 : c9 60        cmp #foreground
2df1: 2 10341 : f0 08        beq +n
2df3: 3 10343 : a5 1b        lda tmp
2df5: 5 10346 : 91 06        sta (scr),y
2df7: 4 10351 : b5 89        lda sprites_c,x
2df9: 5 10355 : 91 08        sta (col),y
2df9: 5 10360 :          n:  inc tmp
2dfb: 5 10365 : e6 1b    n:  inc tmp
2dfd: 5 10370 : e6 0b        inc scry
2dff: 5 10375 : c6 1c        dec tmp2
2e01: 2 10380 : d0 df        bne -l
2e03: 5 10382 : e6 0a        inc scrx
2e05: 5 10387 : c6 1d        dec tmp3
2e07: 2 10392 : d0 cf        bne -l2
2e09: 6 10394 : 60           rts
2e09: 6 10400 :          init_music = $799a
2e09: 6 10406 :          play_music = $7053
2e09: 6 10412 :          current_song = $702b
2e09: 6 10418 :          requested_song = $702d
2e09: 6 10424 :          snd_test              = 3
2e09: 6 10430 :          snd_theme             = 1
2e09: 6 10436 :          snd_round             = 2
2e09: 6 10442 :          snd_bonus_life        = 3
2e09: 6 10448 :          snd_game_over         = 4
2e09: 6 10454 :          snd_doh_round         = 5
2e09: 6 10460 :          snd_hiscore           = 6
2e09: 6 10466 :          snd_reflection_low    = 7
2e09: 6 10472 :          snd_reflection_high   = 8
2e09: 6 10478 :          snd_reflection_silver = 9
2e09: 6 10484 :          snd_caught_ball       = 10
2e09: 6 10490 :          snd_miss              = 11
2e09: 6 10496 :          snd_coin              = 11
2e09: 6 10502 :          snd_hit_doh           = 12
2e09: 6 10508 :          snd_doh_dissolving    = 13
2e09: 6 10514 :          snd_growing_vaus      = 14
2e09: 6 10520 :          snd_hit_distractor    = 15
2e09: 6 10526 :          snd_laser             = 16
2e09: 6 10532 :          snd_round_break       = 17
2e09: 6 10538 :          sound_priorities:
2e0a: 6 10544 : 00           0 ; no sound
2e0b: 6 10550 : 02           2 ; 1
2e0c: 6 10556 : 02           2 ; 2
2e0d: 6 10562 : 02           2 ; 3
2e0e: 6 10568 : 02           2 ; 4
2e0f: 6 10574 : 02           2 ; 5
2e10: 6 10580 : 02           2 ; 6
2e11: 6 10586 : 00           0 ; 7
2e12: 6 10592 : 00           0 ; 8
2e13: 6 10598 : 00           0 ; 9
2e14: 6 10604 : 00           0 ; 10
2e15: 6 10610 : 02           2 ; 11
2e16: 6 10616 : 01           1 ; 12
2e17: 6 10622 : 02           2 ; 13
2e18: 6 10628 : 02           2 ; 14
2e19: 6 10634 : 01           1 ; 15
2e1a: 6 10640 : 01           1 ; 16
2e1b: 6 10646 : 01           1 ; 17
2e1b: 6 10652 :          play_sound:
2e1c: 3 10658 : 85 1b        sta tmp
2e1e: 2 10661 : 8a           txa
2e1f: 3 10663 : 48           pha
2e20: 2 10666 : 98           tya
2e21: 3 10668 : 48           pha
2e22: 3 10671 : a6 1b        ldx tmp
2e24: 4 10674 : ac 2b 70     ldy current_song
2e27: 4 10678 : b9 0a 2e     lda sound_priorities,y
2e2a: 4 10682 : dd 0a 2e     cmp sound_priorities,x
2e2d: 2 10686 : f0 02        beq +m
2e2f: 2 10688 : b0 05        bcs +n
2e2f: 2 10690 :          m:  lda tmp
2e31: 3 10692 : a5 1b    m:  lda tmp
2e33: 4 10695 : 8d 2d 70     sta requested_song
2e33: 4 10699 :          n:  pla
2e36: 4 10703 : 68       n:  pla
2e37: 2 10707 : a8           tay
2e38: 4 10709 : 68           pla
2e39: 2 10713 : aa           tax
2e3a: 6 10715 : 60           rts
2e3a: 6 10721 :          wait_sound:
2e3b: 6 10727 : 20 c2 29     jsr random              ; Avoid CRTC hsync sine wave wobble.
2e3e: 4 10733 : ad 2d 70     lda requested_song
2e41: 2 10737 : d0 f8        bne wait_sound
2e43: 6 10739 : 60           rts
2e43: 6 10745 :          digitound_timer = @(/ 1108404 4329)
2e43: 6 10751 :          digisound_xlat_low:
2e43: 6 10757 :          digisound_xlat_high:
2e43: 6 10763 :          play_audio_sample:
2e44: 3 10769 : 48           pha
2e45: 2 10772 : 8a           txa
2e46: 3 10774 : 48           pha
2e47: 2 10777 : a9 01        lda #>digitound_timer
2e49: 4 10779 : 8d 15 91     sta $9115
2e49: 4 10783 :          digisound_src:
2e4c: 4 10787 : ae ff ff     ldx $ffff
2e4c: 4 10791 :          digisound_xlat_src:
2e4f: 4 10795 : bd ff ff     lda $ffff,x
2e52: 4 10799 : 8d 0e 90     sta $900e
2e55: 6 10803 : ee 4d 2e     inc @(++ digisound_src)
2e58: 2 10809 : d0 03        bne +n
2e5a: 6 10811 : ee 4e 2e     inc @(+ 2 digisound_src)
2e5a: 6 10817 :          n:
2e5d: 5 10823 : c6 43        dec digisound_counter
2e5f: 2 10828 : d0 04        bne +n
2e61: 5 10830 : c6 44        dec @(++ digisound_counter)
2e63: 2 10835 : f0 04        beq stop_digisound
2e63: 2 10837 :          n:
2e63: 2 10839 :          n:  pla
2e65: 4 10841 : 68       n:  pla
2e66: 2 10845 : aa           tax
2e67: 4 10847 : 68           pla
2e68: 6 10851 : 40           rti
2e68: 6 10857 :          stop_digisound:
2e69: 2 10863 : a9 7f        lda #$7f    ; TODO: Only stop NMI.
2e6b: 4 10865 : 8d 1e 91     sta $911e
2e6e: 4 10869 : 8d 2e 91     sta $912e
2e71: 4 10873 : 8d 2d 91     sta $912d
2e74: 6 10877 : 60           rts
2e74: 6 10883 :          start_digisound:
2e75: 4 10889 : 8e 4c 2e     stx digisound_src
2e78: 4 10893 : 8c 4d 2e     sty @(++ digisound_src)
2e7b: 2 10897 : a2 44        ldx #<digisound_xlat_low
2e7d: 2 10899 : a0 44        ldy #<digisound_xlat_low
2e7f: 2 10901 : 09 00        ora #0
2e81: 2 10903 : f0 04        beq +n
2e83: 2 10905 : a2 44        ldx #<digisound_xlat_high
2e85: 2 10907 : a0 44        ldy #<digisound_xlat_high
2e85: 2 10909 :          n:  stx @(++ digisound_xlat_src)
2e87: 4 10911 : 8e 50 2e n:  stx @(++ digisound_xlat_src)
2e8a: 4 10915 : 8c 51 2e     sty @(+ 2 digisound_xlat_src)
2e8d: 2 10919 : a9 40        lda #$40        ; Enable NMI timer and interrupt.
2e8f: 4 10921 : 8d 1b 91     sta $911b
2e92: 2 10925 : a9 c0        lda #$c0
2e94: 4 10927 : 8d 1e 91     sta $911e
2e97: 2 10931 : a9 00        lda #<digitound_timer
2e99: 4 10933 : 8d 14 91     sta $9114
2e9c: 2 10937 : a9 01        lda #>digitound_timer
2e9e: 4 10939 : 8d 15 91     sta $9115
2ea1: 2 10943 : a9 44        lda #<play_audio_sample
2ea3: 4 10945 : 8d 18 03     sta $318
2ea6: 2 10949 : a9 2e        lda #>play_audio_sample
2ea8: 4 10951 : 8d 19 03     sta $319
2eab: 2 10955 : 58           cli
2eac: 6 10957 : 60           rts
2eac: 6 10963 :          wait_fire:
2eac: 6 10969 :          l:  lda #0              ; Fetch joystick status.
2ead: 2 10975 : a9 00    l:  lda #0              ; Fetch joystick status.
2eaf: 4 10977 : 8d 13 91     sta $9113
2eb2: 4 10981 : ad 11 91     lda $9111
2eb5: 2 10985 : aa           tax
2eb6: 2 10987 : 29 20        and #joy_fire
2eb8: 2 10989 : d0 f3        bne -l
2eb8: 2 10991 :          l:  lda #0              ; Fetch joystick status.
2eba: 2 10993 : a9 00    l:  lda #0              ; Fetch joystick status.
2ebc: 4 10995 : 8d 13 91     sta $9113
2ebf: 4 10999 : ad 11 91     lda $9111
2ec2: 2 11003 : aa           tax
2ec3: 2 11005 : 29 20        and #joy_fire
2ec5: 2 11007 : f0 f3        beq -l
2ec7: 6 11009 : 60           rts
2ec7: 6 11015 :          lifes_on_screen = @(+ (* 31 15) 1 screen)
2ec7: 6 11021 :          lifes_on_colors = @(+ (* 31 15) 1 colors)
2ec7: 6 11027 :          draw_lifes:
2ec8: 2 11033 : 8a           txa
2ec9: 3 11035 : 48           pha
2eca: 3 11038 : a6 39        ldx lifes
2ecc: 2 11041 : ca           dex
2ecd: 2 11043 : e0 0d        cpx #13
2ecf: 2 11045 : b0 17        bcs +n
2ed1: 2 11047 : a9 00        lda #0
2ed3: 4 11049 : 9d d2 11     sta lifes_on_screen,x
2ed3: 4 11053 :          l:  cpx #14
2ed6: 2 11057 : e0 0e    l:  cpx #14
2ed8: 2 11059 : b0 0e        bcs +n
2eda: 2 11061 : e0 00        cpx #0
2edc: 2 11063 : f0 0e        beq +done
2ede: 2 11065 : a9 f0        lda #bg_minivaus
2ee0: 4 11067 : 9d d1 11     sta @(-- lifes_on_screen),x
2ee3: 2 11071 : a9 09        lda #@(+ multicolor white)
2ee5: 4 11073 : 9d d1 95     sta @(-- lifes_on_colors),x
2ee5: 4 11077 :          n:  dex
2ee8: 2 11081 : ca       n:  dex
2ee9: 4 11083 : 4c d6 2e     jmp -l
2ee9: 4 11087 :          done:
2eec: 4 11091 : 68           pla
2eed: 2 11095 : aa           tax
2eee: 6 11097 : 60           rts
2eee: 6 11103 :          draw_level:
2eef: 2 11109 : a9 10        lda #16
2ef1: 3 11111 : 85 49        sta bricks_in_line
2ef3: 2 11114 : a9 00        lda #0
2ef5: 3 11116 : 85 32        sta bricks_left
2ef7: 3 11119 : 85 0a        sta scrx
2ef9: 6 11122 : 20 36 2f     jsr fetch_brick
2efc: 3 11128 : 85 0b        sta scry
2efe: 6 11131 : 20 57 29     jsr scrcoladdr
2f01: 6 11137 : 20 77 2f     jsr brick_inc
2f01: 6 11143 :          l:  jsr fetch_brick
2f04: 6 11149 : 20 36 2f l:  jsr fetch_brick
2f07: 2 11155 : c9 0f        cmp #15
2f09: 2 11157 : f0 2a        beq +done
2f0b: 2 11159 : aa           tax
2f0c: 4 11161 : bd ee 26     lda @(-- brick_colors),x
2f0f: 3 11165 : 85 0d        sta curcol
2f11: 2 11168 : 8a           txa
2f12: 2 11170 : e0 00        cpx #0
2f14: 2 11172 : f0 19        beq +plot
2f16: 2 11174 : a9 e0        lda #bg_brick_orange
2f18: 2 11176 : e0 02        cpx #b_orange
2f1a: 2 11178 : f0 13        beq +plot
2f1c: 2 11180 : a9 e1        lda #bg_brick
2f1e: 2 11182 : e0 09        cpx #b_silver
2f20: 2 11184 : 90 0d        bcc +plot
2f22: 2 11186 : e0 0a        cpx #b_golden
2f24: 2 11188 : d0 07        bne +m
2f26: 5 11190 : c6 32        dec bricks_left
2f28: 2 11195 : a9 e2        lda #bg_brick_special1
2f2a: 4 11197 : 4c 2f 2f     jmp +plot
2f2a: 4 11201 :          m:  lda #bg_brick_special2
2f2d: 2 11205 : a9 e3    m:  lda #bg_brick_special2
2f2d: 2 11207 :          plot:
2f2f: 6 11209 : 20 69 2f     jsr plot_brick
2f32: 4 11215 : 4c 04 2f     jmp -l
2f32: 4 11219 :          done:
2f35: 6 11223 : 60           rts
2f35: 6 11229 :          fetch_brick:
2f36: 5 11235 : c6 49        dec bricks_in_line
2f38: 3 11240 : a5 49        lda bricks_in_line
2f3a: 2 11243 : 29 fe        and #%11111110
2f3c: 2 11245 : d0 0d        bne +n
2f3e: 2 11247 : a9 00        lda #0
2f40: 3 11249 : a6 49        ldx bricks_in_line
2f42: 2 11252 : d0 f1        bne -done
2f44: 2 11254 : a2 0f        ldx #15
2f46: 3 11256 : 86 49        stx bricks_in_line
2f48: 4 11259 : 4c 35 2f     jmp -done
2f48: 4 11263 :          n:  ldy #0
2f4b: 2 11267 : a0 00    n:  ldy #0
2f4d: 5 11269 : b1 19        lda (current_level),y
2f4f: 3 11274 : a6 48        ldx current_half
2f51: 2 11277 : d0 09        bne +n
2f53: 2 11279 : 4a           lsr
2f54: 2 11281 : 4a           lsr
2f55: 2 11283 : 4a           lsr
2f56: 2 11285 : 4a           lsr
2f57: 5 11287 : e6 48        inc current_half
2f59: 4 11292 : 4c 68 2f     jmp +r
2f59: 4 11296 :          n:  and #$0f
2f5c: 2 11300 : 29 0f    n:  and #$0f
2f5e: 5 11302 : c6 48        dec current_half
2f5e: 5 11307 :          done:
2f60: 2 11312 : a2 19        ldx #current_level
2f60: 2 11314 :          inc_zp:
2f62: 6 11316 : f6 00        inc 0,x
2f64: 2 11322 : d0 02        bne +r
2f66: 6 11324 : f6 01        inc 1,x
2f66: 6 11330 :          r:  rts
2f68: 6 11336 : 60       r:  rts
2f68: 6 11342 :          plot_brick:
2f69: 2 11348 : c9 00        cmp #0
2f6b: 2 11350 : f0 0a        beq brick_inc
2f6d: 2 11352 : a0 00        ldy #0
2f6f: 5 11354 : 91 06        sta (scr),y
2f71: 3 11359 : a5 0d        lda curcol
2f73: 5 11362 : 91 08        sta (col),y
2f75: 5 11367 : e6 32        inc bricks_left
2f75: 5 11372 :          brick_inc:
2f77: 2 11377 : a2 06        ldx #scr
2f79: 6 11379 : 20 62 2f     jsr inc_zp
2f7c: 2 11385 : a2 08        ldx #col
2f7e: 4 11387 : 4c 62 2f     jmp inc_zp
2f7e: 4 11391 :          draw_walls:
2f81: 2 11395 : 8a           txa
2f82: 3 11397 : 48           pha
2f83: 2 11400 : a2 0d        ldx #13
2f85: 2 11402 : a9 ec        lda #bg_top_1
2f85: 2 11404 :          l:  sta @(+ screen 30),x
2f87: 4 11406 : 9d 1e 10 l:  sta @(+ screen 30),x
2f8a: 2 11410 : ca           dex
2f8b: 2 11412 : d0 fa        bne -l
2f8d: 2 11414 : a9 ed        lda #bg_top_2
2f8f: 4 11416 : 9d 21 10     sta @(+ screen 30 3),x
2f92: 4 11420 : 9d 28 10     sta @(+ screen 30 10),x
2f95: 2 11424 : a9 ee        lda #bg_top_3
2f97: 4 11426 : 9d 22 10     sta @(+ screen 30 4),x
2f9a: 4 11430 : 9d 29 10     sta @(+ screen 30 11),x
2f9d: 2 11434 : a9 eb        lda #bg_corner_left
2f9f: 4 11436 : 8d 1e 10     sta @(+ screen 30)
2fa2: 2 11440 : a9 ef        lda #bg_corner_right
2fa4: 4 11442 : 8d 2c 10     sta @(+ screen 30 14)
2fa7: 2 11446 : a9 00        lda #0
2fa9: 3 11448 : 85 0a        sta scrx
2fab: 2 11451 : a9 03        lda #3
2fad: 3 11453 : 85 0b        sta scry
2fad: 3 11456 :          a:  ldx #5
2faf: 2 11459 : a2 05    a:  ldx #5
2fb1: 2 11461 : a9 e6        lda #bg_side
2fb1: 2 11463 :          l:  pha
2fb3: 3 11465 : 48       l:  pha
2fb4: 3 11468 : a5 0b        lda scry
2fb6: 2 11471 : c9 20        cmp #32
2fb8: 2 11473 : f0 15        beq +done
2fba: 6 11475 : 20 57 29     jsr scrcoladdr
2fbd: 4 11481 : 68           pla
2fbe: 5 11485 : 91 06        sta (scr),y
2fc0: 2 11490 : a0 0e        ldy #14
2fc2: 5 11492 : 91 06        sta (scr),y
2fc4: 2 11497 : 18           clc
2fc5: 2 11499 : 69 01        adc #1
2fc7: 5 11501 : e6 0b        inc scry
2fc9: 2 11506 : ca           dex
2fca: 2 11508 : d0 e7        bne -l
2fcc: 4 11510 : 4c af 2f     jmp -a
2fcc: 4 11514 :          done:
2fcf: 4 11518 : 68           pla
2fd0: 4 11522 : 68           pla
2fd1: 2 11526 : aa           tax
2fd2: 6 11528 : 60           rts
2fd2: 6 11534 :          num_score_chars = 32
2fd2: 6 11540 :          score_chars     = @(- (half num_chars) num_score_chars)
2fd2: 6 11546 :          score_charset   = @(+ charset (* 8 score_chars))
2fd2: 6 11552 :          make_score_screen:
2fd3: 2 11558 : a9 00        lda #0
2fd5: 2 11560 : aa           tax
2fd5: 2 11562 :          l:  sta score_charset,x
2fd6: 4 11564 : 9d 00 17 l:  sta score_charset,x
2fd9: 2 11568 : ca           dex
2fda: 2 11570 : d0 fa        bne -l
2fdc: 2 11572 : a2 1e        ldx #@(* 2 screen_columns)
2fde: 2 11574 : a0 00        ldy #0
2fe0: 2 11576 : a9 60        lda #score_chars
2fe0: 2 11578 :          l:  sta screen,y
2fe2: 4 11580 : 99 00 10 l:  sta screen,y
2fe5: 2 11584 : 18           clc
2fe6: 2 11586 : 69 01        adc #1
2fe8: 2 11588 : c8           iny
2fe9: 2 11590 : ca           dex
2fea: 2 11592 : d0 f6        bne -l
2fec: 2 11594 : a2 0e        ldx #@(-- screen_columns)
2fec: 2 11596 :          l:  lda #2
2fee: 2 11598 : a9 02    l:  lda #2
2ff0: 4 11600 : 9d 00 94     sta colors,x
2ff3: 2 11604 : a9 01        lda #1
2ff5: 4 11606 : 9d 0f 94     sta @(+ colors screen_columns),x
2ff8: 2 11610 : ca           dex
2ff9: 2 11612 : 10 f3        bpl -l
2ff9: 2 11614 :          txt_hiscore_charset = @(+ score_charset 40)
2ffb: 2 11616 : a2 ff        ldx #$ff
2ffd: 2 11618 : a9 28        lda #<txt_hiscore_charset
2fff: 3 11620 : 85 02        sta d
3001: 2 11623 : a9 17        lda #>txt_hiscore_charset
3003: 3 11625 : 85 03        sta @(++ d)
3005: 2 11628 : a9 11        lda #<txt_hiscore
3007: 3 11630 : 85 00        sta s
3009: 2 11633 : a9 39        lda #>txt_hiscore
300b: 3 11635 : 85 01        sta @(++ s)
300d: 4 11638 : 4c 37 30     jmp print_string
300d: 4 11642 :          score_charset0 = @(+ score_charset (* screen_columns 8))
300d: 4 11646 :          score_charset1 = @(+ score_charset0 48)
300d: 4 11650 :          display_score:
3010: 2 11654 : a2 07        ldx #num_score_digits
3012: 2 11656 : a9 78        lda #<score_charset0
3014: 3 11658 : 85 02        sta d
3016: 2 11661 : a9 17        lda #>score_charset0
3018: 3 11663 : 85 03        sta @(++ d)
301a: 2 11666 : a9 52        lda #<score
301c: 3 11668 : 85 00        sta s
301e: 2 11671 : a9 00        lda #>score
3020: 3 11673 : 85 01        sta @(++ s)
3022: 6 11676 : 20 37 30     jsr print_string
3025: 2 11682 : a2 07        ldx #num_score_digits
3027: 2 11684 : a9 a8        lda #<score_charset1
3029: 3 11686 : 85 02        sta d
302b: 2 11689 : a9 17        lda #>score_charset1
302d: 3 11691 : 85 03        sta @(++ d)
302f: 2 11694 : a9 f5        lda #<hiscore
3031: 3 11696 : 85 00        sta s
3033: 2 11699 : a9 00        lda #>hiscore
3035: 3 11701 : 85 01        sta @(++ s)
3035: 3 11704 :          print_string:
3037: 2 11707 : a0 00        ldy #0
3037: 2 11709 :          print_string2:
3037: 2 11711 :          l:  tya
3039: 2 11713 : 98       l:  tya
303a: 2 11715 : 4a           lsr
303b: 5 11717 : b1 00        lda (s),y
303d: 2 11722 : 30 18        bmi +r
303f: 3 11724 : 08           php
3040: 6 11727 : 20 27 2a     jsr print4x8
3043: 4 11733 : 28           plp
3044: 2 11737 : 90 0d        bcc +n
3046: 3 11739 : a5 02        lda d
3048: 2 11742 : 18           clc
3049: 2 11744 : 69 08        adc #8
304b: 3 11746 : 85 02        sta d
304d: 3 11749 : a5 03        lda @(++ d)
304f: 2 11752 : 69 00        adc #0
3051: 3 11754 : 85 03        sta @(++ d)
3051: 3 11757 :          n:  iny
3053: 2 11760 : c8       n:  iny
3054: 2 11762 : ca           dex
3055: 2 11764 : d0 e2        bne -l
3055: 2 11766 :          r:  rts
3057: 6 11768 : 60       r:  rts
3057: 6 11774 :          init_score:
3058: 6 11780 : 00           0
3059: 6 11786 : 05           c_setmb <score >score num_score_digits score_char0
305a: 6 11792 : 52           c_setmb <score >score num_score_digits score_char0
305b: 6 11798 : 00           c_setmb <score >score num_score_digits score_char0
305c: 6 11804 : 07           c_setmb <score >score num_score_digits score_char0
305d: 6 11810 : 10           c_setmb <score >score num_score_digits score_char0
305e: 6 11816 : 00           0
305f: 6 11822 : 60           rts
305f: 6 11828 :          init_hiscore:
3060: 6 11834 : 00           0
3061: 6 11840 : 05           c_setmb <hiscore >hiscore num_score_digits score_char0
3062: 6 11846 : f5           c_setmb <hiscore >hiscore num_score_digits score_char0
3063: 6 11852 : 00           c_setmb <hiscore >hiscore num_score_digits score_char0
3064: 6 11858 : 07           c_setmb <hiscore >hiscore num_score_digits score_char0
3065: 6 11864 : 10           c_setmb <hiscore >hiscore num_score_digits score_char0
3066: 6 11870 : 00           0
3067: 6 11876 : 60           rts
3067: 6 11882 :          add_to_score:
3068: 5 11888 : e6 50        inc has_new_score
306a: 2 11893 : 8a           txa
306b: 3 11895 : 48           pha
306c: 2 11898 : 98           tya
306d: 3 11900 : 48           pha
306e: 2 11903 : a2 06        ldx #@(-- num_score_digits)
3070: 2 11905 : 18           clc
3070: 2 11907 :          l:  lda score,x
3071: 4 11909 : b5 52    l:  lda score,x
3073: 4 11913 : 79 9f 26     adc @(-- scores),y
3076: 2 11917 : c9 1a        cmp #@(+ score_char0 10)
3078: 2 11919 : 90 10        bcc +n
307a: 2 11921 : e0 03        cpx #@(- num_score_digits 4)
307c: 2 11923 : d0 09        bne +j
307e: 3 11925 : 48           pha
307f: 2 11928 : 8a           txa
3080: 3 11930 : 48           pha
3081: 6 11933 : 20 3a 36     jsr apply_bonus_p
3084: 4 11939 : 68           pla
3085: 2 11943 : aa           tax
3086: 4 11945 : 68           pla
3086: 4 11949 :          j:  sec
3087: 2 11953 : 38       j:  sec
3088: 2 11955 : e9 0a        sbc #10
3088: 2 11957 :          n:  sta score,x
308a: 4 11959 : 95 52    n:  sta score,x
308c: 2 11963 : 88           dey
308d: 2 11965 : ca           dex
308e: 2 11967 : 10 e1        bpl -l
3090: 2 11969 : e8           inx
3091: 2 11971 : a0 06        ldy #@(-- num_score_digits)
3091: 2 11973 :          loop:
3093: 4 11975 : b5 52        lda score,x
3095: 4 11979 : d5 f5        cmp hiscore,x
3097: 2 11983 : f0 0f        beq +next
3099: 2 11985 : 90 11        bcc +done
3099: 2 11987 :          new_hiscore:
309b: 2 11989 : a9 01        lda #1
309d: 3 11991 : 85 51        sta has_hiscore
309f: 2 11994 : a2 06        ldx #@(-- num_score_digits)
309f: 2 11996 :          l:  lda score,x
30a1: 4 11998 : b5 52    l:  lda score,x
30a3: 4 12002 : 95 f5        sta hiscore,x
30a5: 2 12006 : ca           dex
30a6: 2 12008 : 10 f9        bpl -l
30a6: 2 12010 :          next:
30a8: 2 12012 : e8           inx
30a9: 2 12014 : 88           dey
30aa: 2 12016 : 10 e7        bpl -loop
30aa: 2 12018 :          done:
30ac: 4 12020 : 68           pla
30ad: 2 12024 : a8           tay
30ae: 4 12026 : 68           pla
30af: 2 12030 : aa           tax
30b0: 6 12032 : 60           rts
30b0: 6 12038 :          get_soft_collision:
30b1: 2 12044 : 4a           lsr
30b2: 2 12046 : 4a           lsr
30b3: 2 12048 : 4a           lsr
30b4: 3 12050 : 85 0a        sta scrx
30b6: 2 12053 : 98           tya
30b7: 2 12055 : 4a           lsr
30b8: 2 12057 : 4a           lsr
30b9: 2 12059 : 4a           lsr
30ba: 3 12061 : 85 0b        sta scry
30ba: 3 12064 :          get_hard_collision:
30bc: 6 12067 : 20 57 29     jsr scrcoladdr
30bf: 5 12073 : b1 06        lda (scr),y
30c1: 2 12078 : c9 f0        cmp #bg_minivaus    ; Ignore miniature Vaus displaying # of lifes.
30c3: 2 12080 : f0 05        beq +n
30c5: 2 12082 : 29 60        and #foreground
30c7: 2 12084 : c9 60        cmp #foreground
30c7: 2 12086 :          r:  rts
30c9: 6 12088 : 60       r:  rts
30c9: 6 12094 :          n:  lda #1
30ca: 2 12100 : a9 01    n:  lda #1
30cc: 6 12102 : 60           rts
30cc: 6 12108 :          reflect_h:
30cd: 4 12114 : b5 d9        lda sprites_d,x         ; Moving to the left?
30cf: 2 12118 : 10 0d        bpl +n                  ; No…
30d1: 3 12120 : a4 46        ldy ball_x
30d3: 2 12123 : 88           dey
30d4: 2 12125 : 98           tya
30d5: 3 12127 : a4 47        ldy ball_y
30d7: 6 12130 : 20 b1 30     jsr get_soft_collision
30da: 2 12136 : d0 4e        bne +r
30dc: 2 12138 : f0 0b        beq +j
30dc: 2 12140 :          n:  ldy ball_x
30de: 3 12142 : a4 46    n:  ldy ball_x
30e0: 2 12145 : c8           iny
30e1: 2 12147 : 98           tya
30e2: 3 12149 : a4 47        ldy ball_y
30e4: 6 12152 : 20 b1 30     jsr get_soft_collision
30e7: 2 12158 : d0 41        bne +r
30e7: 2 12160 :          j:  lda #64
30e9: 2 12162 : a9 40    j:  lda #64
30eb: 4 12164 : 4c 1c 31     jmp +l
30eb: 4 12168 :          reflect:
30ee: 4 12172 : b4 59        ldy sprites_x,x
30f0: 2 12176 : c8           iny
30f1: 3 12178 : 84 46        sty ball_x
30f3: 2 12181 : 98           tya
30f4: 4 12183 : b4 69        ldy sprites_y,x
30f6: 2 12187 : c8           iny
30f7: 2 12189 : c8           iny
30f8: 3 12191 : 84 47        sty ball_y
30fa: 6 12194 : 20 cd 30     jsr reflect_h
30fa: 6 12200 :          reflect_v:
30fd: 4 12206 : b5 d9        lda sprites_d,x         ; Are we flying upwards?
30ff: 2 12210 : 18           clc
3100: 2 12212 : 69 40        adc #64
3102: 2 12214 : 10 0c        bpl +n                  ; No…
3104: 3 12216 : a5 46        lda ball_x
3106: 3 12219 : a4 47        ldy ball_y
3108: 2 12222 : 88           dey
3109: 6 12224 : 20 b1 30     jsr get_soft_collision
310c: 2 12230 : d0 1c        bne +r
310e: 2 12232 : f0 0a        beq +j
310e: 2 12234 :          n:  lda ball_x
3110: 3 12236 : a5 46    n:  lda ball_x
3112: 3 12239 : a4 47        ldy ball_y
3114: 2 12242 : c8           iny
3115: 6 12244 : 20 b1 30     jsr get_soft_collision
3118: 2 12250 : d0 10        bne +r
3118: 2 12252 :          j:  lda #128
311a: 2 12254 : a9 80    j:  lda #128
311a: 2 12256 :          l:  clc
311c: 2 12258 : 18       l:  clc
311d: 3 12260 : 65 2c        adc side_degrees
311f: 3 12263 : 85 2c        sta side_degrees
3121: 5 12266 : e6 45        inc has_collision
3123: 6 12271 : 20 44 31     jsr hit_brick
3126: 2 12277 : b0 02        bcs +r
3128: 5 12279 : e6 4a        inc has_hit_brick
3128: 5 12284 :          r:  rts
312a: 6 12289 : 60       r:  rts
312a: 6 12295 :          apply_reflection:
312b: 4 12301 : b5 d9        lda sprites_d,x     ; Get degrees.
312d: 2 12305 : 38           sec
312e: 3 12307 : e5 2c        sbc side_degrees    ; Rotate back to zero degrees.
3130: 6 12310 : 20 cf 29     jsr neg             ; Get opposite deviation from general direction.
3133: 2 12316 : 18           clc
3134: 3 12318 : 65 2c        adc side_degrees    ; Rotate back to original axis.
3136: 2 12321 : 18           clc
3137: 2 12323 : 69 80        adc #128            ; Rotate to opposite direction.
3139: 4 12325 : 95 d9        sta sprites_d,x
313b: 2 12329 : a9 00        lda #0
313d: 4 12331 : 9d 00 02     sta sprites_dx,x
3140: 4 12335 : 9d 10 02     sta sprites_dy,x
3143: 6 12339 : 60           rts
3143: 6 12345 :          hit_brick:
3144: 3 12351 : a4 0a        ldy scrx
3146: 5 12354 : b1 06        lda (scr),y
3148: 2 12359 : c9 e5        cmp #bg_brick_special4
314a: 2 12361 : b0 5a        bcs +r              ; Not a brick of any type…
314c: 2 12363 : c9 e2        cmp #bg_brick_special1
314e: 2 12365 : f0 16        beq check_golden_brick
3150: 2 12367 : c9 e0        cmp #bg_brick_orange
3152: 2 12369 : 90 52        bcc +r              ; Not a brick of any type…
3154: 2 12371 : f0 29        beq remove_brick
3156: 2 12373 : c9 e1        cmp #bg_brick
3158: 2 12375 : f0 25        beq remove_brick
315a: 2 12377 : a9 09        lda #snd_reflection_silver
315c: 3 12379 : 85 41        sta snd_reflection
315e: 5 12382 : b1 06        lda (scr),y
3160: 2 12387 : 38           sec
3161: 2 12389 : e9 01        sbc #1
3163: 4 12391 : 4c 9c 31     jmp modify_brick
3163: 4 12395 :          check_golden_brick:
3166: 5 12399 : b1 08        lda (col),y
3168: 2 12404 : 29 0f        and #$0f
316a: 2 12406 : c9 07        cmp #yellow
316c: 2 12408 : f0 32        beq +golden
316e: 2 12410 : 8a           txa
316f: 3 12412 : 48           pha
3170: 3 12415 : a6 31        ldx level
3170: 3 12418 :          l:  ldy #@(- score_50 scores)
3172: 2 12421 : a0 07    l:  ldy #@(- score_50 scores)
3174: 6 12423 : 20 68 30     jsr add_to_score
3177: 2 12429 : ca           dex
3178: 2 12431 : d0 f8        bne -l
317a: 4 12433 : 68           pla
317b: 2 12437 : aa           tax
317c: 4 12439 : 4c 96 31     jmp +o
317c: 4 12443 :          remove_brick:
317f: 3 12447 : a5 4f        lda is_testing_laser_hit
3181: 2 12450 : d0 05        bne +n
3183: 5 12452 : e6 4d        inc num_brick_hits
3185: 6 12457 : 20 ed 34     jsr adjust_ball_speed
3185: 6 12463 :          n:
3188: 3 12469 : a4 0a        ldy scrx
318a: 5 12472 : b1 08        lda (col),y
318c: 2 12477 : 29 0f        and #$0f
318e: 2 12479 : a8           tay
318f: 4 12481 : b9 df 26     lda color_scores,y
3192: 2 12485 : a8           tay
3193: 6 12487 : 20 68 30     jsr add_to_score
3193: 6 12493 :          o:  dec bricks_left
3196: 5 12499 : c6 32    o:  dec bricks_left
3198: 2 12504 : a9 00        lda #0
319a: 3 12506 : a4 0a        ldy scrx
319a: 3 12509 :          modify_brick:
319c: 5 12512 : 91 06        sta (scr),y
319e: 2 12517 : 18           clc
319f: 6 12519 : 60           rts
319f: 6 12525 :          golden:
31a0: 5 12531 : e6 4b        inc has_hit_golden_brick
31a2: 2 12536 : a9 09        lda #snd_reflection_silver
31a4: 3 12538 : 85 41        sta snd_reflection
31a4: 3 12541 :          r:  sec
31a6: 2 12544 : 38       r:  sec
31a7: 6 12546 : 60           rts
31a7: 6 12552 :          test_vaus_hit_right:
31a8: 3 12558 : a4 29        ldy mode
31aa: 2 12561 : c0 04        cpy #mode_extended
31ac: 2 12563 : d0 06        bne +n
31ae: 2 12565 : c9 58        cmp #@(* (- screen_columns 4) 8)
31b0: 2 12567 : b0 04        bcs +r
31b2: 2 12569 : 90 02        bcc +r
31b2: 2 12571 :          n:  cmp #@(* (- screen_columns 3) 8)
31b4: 2 12573 : c9 60    n:  cmp #@(* (- screen_columns 3) 8)
31b4: 2 12575 :          r:  rts
31b6: 6 12577 : 60       r:  rts
31b6: 6 12583 :          ctrl_vaus:
31b7: 2 12589 : a9 00        lda #0              ; Fetch joystick status.
31b9: 4 12591 : 8d 13 91     sta $9113
31bc: 4 12595 : ad 11 91     lda $9111
31bf: 3 12599 : 85 35        sta joystick_status
31c1: 3 12602 : a5 3f        lda is_using_paddle
31c3: 2 12605 : d0 11        bne handle_paddle
31c5: 4 12607 : ad 08 90     lda $9008
31c8: 2 12611 : 38           sec
31c9: 3 12613 : e5 42        sbc old_paddle_value
31cb: 6 12616 : 20 cd 29     jsr abs
31ce: 2 12622 : 29 f8        and #%11111000
31d0: 2 12624 : f0 3a        beq handle_joystick
31d2: 2 12626 : a9 01        lda #1
31d4: 3 12628 : 85 3f        sta is_using_paddle
31d4: 3 12631 :          handle_paddle:
31d6: 4 12634 : ac 08 90     ldy $9008
31d9: 4 12638 : b9 a0 23     lda paddle_xlat,y
31dc: 6 12642 : 20 a8 31     jsr test_vaus_hit_right
31df: 2 12648 : 90 0e        bcc +n
31e1: 3 12650 : a4 2a        ldy mode_break
31e3: 2 12653 : f0 05        beq +m
31e5: 2 12655 : a9 00        lda #0
31e7: 3 12657 : 85 32        sta bricks_left
31e9: 6 12660 : 60           rts
31e9: 6 12666 :          m:  lda #@(* (- screen_columns 1) 8)
31ea: 2 12672 : a9 70    m:  lda #@(* (- screen_columns 1) 8)
31ec: 2 12674 : 38           sec
31ed: 3 12676 : e5 30        sbc vaus_width
31ed: 3 12679 :          n:  sec
31ef: 2 12682 : 38       n:  sec
31f0: 4 12684 : f5 59        sbc sprites_x,x
31f2: 3 12688 : 85 1c        sta tmp2
31f4: 6 12691 : 20 c8 2a     jsr sprite_right
31f7: 3 12697 : a5 2d        lda caught_ball
31f9: 2 12700 : 30 0a        bmi +n
31fb: 3 12702 : 86 1b        stx tmp
31fd: 2 12705 : aa           tax
31fe: 3 12707 : a5 1c        lda tmp2
3200: 6 12710 : 20 c8 2a     jsr sprite_right
3203: 3 12716 : a6 1b        ldx tmp
3203: 3 12719 :          n:  lda joystick_status
3205: 3 12722 : a5 35    n:  lda joystick_status
3207: 2 12725 : 29 10        and #joy_left
3209: 2 12727 : f0 4d        beq do_fire
320b: 6 12729 : 60           rts
320b: 6 12735 :          handle_joystick:
320b: 6 12741 :          n:  lda joystick_status
320c: 3 12747 : a5 35    n:  lda joystick_status
320e: 2 12750 : 29 10        and #joy_left
3210: 2 12752 : d0 1c        bne +n
3212: 4 12754 : b5 59        lda sprites_x,x
3214: 2 12758 : c9 09        cmp #9
3216: 2 12760 : 90 16        bcc +n
3218: 2 12762 : a9 02        lda #2
321a: 6 12764 : 20 c5 2a     jsr sprite_left
321d: 3 12770 : a5 2d        lda caught_ball
321f: 2 12773 : 30 31        bmi handle_joystick_fire
3221: 3 12775 : 86 1b        stx tmp
3223: 2 12778 : aa           tax
3224: 2 12780 : a9 02        lda #2
3226: 6 12782 : 20 c5 2a     jsr sprite_left
3229: 3 12788 : a6 1b        ldx tmp
322b: 4 12791 : 4c 52 32     jmp handle_joystick_fire
322b: 4 12795 :          n:  lda #0          ;Fetch rest of joystick status.
322e: 2 12799 : a9 00    n:  lda #0          ;Fetch rest of joystick status.
3230: 4 12801 : 8d 22 91     sta $9122
3233: 4 12805 : ad 20 91     lda $9120
3236: 2 12809 : 30 1a        bmi handle_joystick_fire
3238: 4 12811 : b5 59        lda sprites_x,x
323a: 6 12815 : 20 a8 31     jsr test_vaus_hit_right
323d: 2 12821 : b0 55        bcs handle_break_mode
323f: 2 12823 : a9 02        lda #2
3241: 6 12825 : 20 c8 2a     jsr sprite_right
3244: 3 12831 : a5 2d        lda caught_ball
3246: 2 12834 : 30 0a        bmi handle_joystick_fire
3248: 3 12836 : 86 1b        stx tmp
324a: 2 12839 : aa           tax
324b: 2 12841 : a9 02        lda #2
324d: 6 12843 : 20 c8 2a     jsr sprite_right
3250: 3 12849 : a6 1b        ldx tmp
3250: 3 12852 :          handle_joystick_fire:
3252: 3 12855 : a5 35        lda joystick_status
3254: 2 12858 : 29 20        and #joy_fire
3256: 2 12860 : d0 3b        bne +r
3256: 2 12862 :          do_fire:
3258: 3 12864 : a4 2d        ldy caught_ball
325a: 2 12867 : 30 0f        bmi +n
325c: 2 12869 : a9 e3        lda #@(- (* 29 8) 5)
325e: 4 12871 : 99 69 00     sta sprites_y,y
3261: 2 12875 : a9 38        lda #<ball
3263: 4 12877 : 99 99 00     sta sprites_l,y
3266: 2 12881 : a9 07        lda #snd_reflection_low
3268: 6 12883 : 20 1c 2e     jsr play_sound
3268: 6 12889 :          n:  lda #255
326b: 2 12895 : a9 ff    n:  lda #255
326d: 3 12897 : 85 2d        sta caught_ball
326f: 3 12900 : a5 29        lda mode
3271: 2 12903 : c9 01        cmp #mode_laser
3273: 2 12905 : d0 1e        bne +r
3275: 3 12907 : a5 3e        lda is_firing
3277: 2 12910 : f0 04        beq +n
3279: 5 12912 : c6 3e        dec is_firing
327b: 2 12917 : d0 16        bne +r
327b: 2 12919 :          n:  lda #snd_laser
327d: 2 12921 : a9 10    n:  lda #snd_laser
327f: 6 12923 : 20 1c 2e     jsr play_sound
3282: 2 12929 : a9 09        lda #9              ;  TODO: constant fire_delay
3284: 3 12931 : 85 3e        sta is_firing
3286: 4 12934 : b5 59        lda sprites_x,x
3288: 2 12938 : 18           clc
3289: 2 12940 : 69 04        adc #4
328b: 4 12942 : 8d 13 27     sta @(+ laser_init sprite_init_x)
328e: 2 12946 : a0 12        ldy #@(- laser_init sprite_inits)
3290: 4 12948 : 4c 66 2a     jmp add_sprite
3290: 4 12952 :          ctrl_dummy:
3290: 4 12956 :          r:  rts
3293: 6 12960 : 60       r:  rts
3293: 6 12966 :          handle_break_mode:
3294: 3 12972 : a5 2a        lda mode_break
3296: 2 12975 : f0 1b        beq +n
3298: 2 12977 : a0 0f        ldy #@(-- num_sprites)
3298: 2 12979 :          l:  lda sprites_i,y
329a: 4 12981 : b9 79 00 l:  lda sprites_i,y
329d: 2 12985 : 29 01        and #is_vaus
329f: 2 12987 : d0 05        bne +m
32a1: 2 12989 : a9 80        lda #is_inactive
32a3: 4 12991 : 99 79 00     sta sprites_i,y
32a3: 4 12995 :          m:  dey
32a6: 2 12999 : 88       m:  dey
32a7: 2 13001 : 10 f1        bpl -l
32a9: 2 13003 : a9 11        lda #snd_round_break
32ab: 6 13005 : 20 1c 2e     jsr play_sound
32ae: 2 13011 : a9 00        lda #0
32b0: 3 13013 : 85 32        sta bricks_left
32b2: 6 13016 : 60           rts
32b2: 6 13022 :          n:  lda #@(* (- screen_columns 1) 8)
32b3: 2 13028 : a9 70    n:  lda #@(* (- screen_columns 1) 8)
32b5: 2 13030 : 38           sec
32b6: 3 13032 : e5 30        sbc vaus_width
32b8: 4 13035 : 95 59        sta sprites_x,x
32ba: 6 13039 : 60           rts
32ba: 6 13045 :          spriteidx_vaus = @(- num_sprites 1)
32ba: 6 13051 :          make_vaus:
32bb: 2 13057 : a2 0f        ldx #spriteidx_vaus
32bd: 2 13059 : a0 00        ldy #@(- vaus_init sprite_inits)
32bf: 6 13061 : 20 99 2a     jsr replace_sprite 
32bf: 6 13067 :          set_vaus_color:
32c2: 3 13073 : a5 29        lda mode
32c4: 2 13076 : c9 01        cmp #mode_laser
32c6: 2 13078 : d0 0b        bne +n
32c8: 2 13080 : a0 00        ldy #<vaus
32ca: 3 13082 : a5 37        lda framecounter
32cc: 2 13085 : 4a           lsr
32cd: 2 13087 : b0 02        bcs +m
32cf: 2 13089 : a0 28        ldy #<vaus_laser
32cf: 2 13091 :          m:  sty @(+ sprites_l spriteidx_vaus)
32d1: 3 13093 : 84 a8    m:  sty @(+ sprites_l spriteidx_vaus)
32d1: 3 13096 :          n:  rts
32d3: 6 13099 : 60       n:  rts
32d3: 6 13105 :          ctrl_laser:
32d4: 2 13111 : a9 01        lda #1
32d6: 3 13113 : 85 4f        sta is_testing_laser_hit
32d8: 2 13116 : a9 00        lda #0              ; No brick hit.
32da: 3 13118 : 85 4e        sta laser_has_hit
32dc: 3 13121 : 85 4b        sta has_hit_golden_brick
32de: 4 13124 : b5 69        lda sprites_y,x
32e0: 2 13128 : c9 18        cmp #24
32e2: 2 13130 : 90 2f        bcc +n              ; Laser left the playfield.
32e4: 4 13132 : b5 59        lda sprites_x,x
32e6: 4 13136 : b4 69        ldy sprites_y,x
32e8: 6 13140 : 20 b1 30     jsr get_soft_collision
32eb: 2 13146 : d0 07        bne +o              ; Nothing, try on the right…
32ed: 6 13148 : 20 44 31     jsr hit_brick
32f0: 2 13154 : b0 02        bcs +o              ; No brick hit.
32f2: 5 13156 : e6 4e        inc laser_has_hit
32f2: 5 13161 :          o:  lda sprites_x,x
32f4: 4 13166 : b5 59    o:  lda sprites_x,x
32f6: 2 13170 : 18           clc
32f7: 2 13172 : 69 07        adc #7
32f9: 4 13174 : b4 69        ldy sprites_y,x
32fb: 6 13178 : 20 b1 30     jsr get_soft_collision
32fe: 2 13184 : d0 05        bne +m
3300: 6 13186 : 20 44 31     jsr hit_brick
3303: 2 13192 : 90 0e        bcc +n              ; We hit a brick…
3303: 2 13194 :          m:  lda laser_has_hit
3305: 3 13196 : a5 4e    m:  lda laser_has_hit
3307: 3 13199 : 05 4b        ora has_hit_golden_brick
3309: 2 13202 : d0 08        bne +n
330b: 2 13204 : a9 08        lda #8
330d: 6 13206 : 20 bc 2a     jsr sprite_up
3310: 4 13212 : 4c 16 33     jmp +done
3310: 4 13216 :          n:  jsr remove_sprite   ; Remove laser sprite.
3313: 6 13220 : 20 88 2a n:  jsr remove_sprite   ; Remove laser sprite.
3313: 6 13226 :          done:
3316: 2 13232 : a9 00        lda #0
3318: 3 13234 : 85 4f        sta is_testing_laser_hit
331a: 6 13237 : 60           rts
331b: 6 13243 : 00           0 0
331c: 6 13249 : 00           0 0
331c: 6 13255 :          vaus_directions:
331d: 6 13261 : a8           168
331e: 6 13267 : a8           168 168 168 168
331f: 6 13273 : a8           168 168 168 168
3320: 6 13279 : a8           168 168 168 168
3321: 6 13285 : a8           168 168 168 168
3322: 6 13291 : 8a           138 138 138 138
3323: 6 13297 : 8a           138 138 138 138
3324: 6 13303 : 8a           138 138 138 138
3325: 6 13309 : 8a           138 138 138 138
3326: 6 13315 : 74           116 116 116 116
3327: 6 13321 : 74           116 116 116 116
3328: 6 13327 : 74           116 116 116 116
3329: 6 13333 : 74           116 116 116 116
332a: 6 13339 : 58           88 88 88 88
332b: 6 13345 : 58           88 88 88 88
332c: 6 13351 : 58           88 88 88 88
332d: 6 13357 : 58           88 88 88 88
332e: 6 13363 : 58           88
332f: 6 13369 : 00           0 0
3330: 6 13375 : 00           0 0
3330: 6 13381 :          vaus_directions_extended:
3331: 6 13387 : a8           168
3332: 6 13393 : a8           168 168 168 168
3333: 6 13399 : a8           168 168 168 168
3334: 6 13405 : a8           168 168 168 168
3335: 6 13411 : a8           168 168 168 168
3336: 6 13417 : a8           168 168 168 168
3337: 6 13423 : a8           168 168 168 168
3338: 6 13429 : a8           168 168 168 168
3339: 6 13435 : a8           168 168 168 168
333a: 6 13441 : 8a           138 138 138 138
333b: 6 13447 : 8a           138 138 138 138
333c: 6 13453 : 8a           138 138 138 138
333d: 6 13459 : 8a           138 138 138 138
333e: 6 13465 : 8a           138 138 138 138
333f: 6 13471 : 8a           138 138 138 138
3340: 6 13477 : 8a           138 138 138 138
3341: 6 13483 : 8a           138 138 138 138
3342: 6 13489 : 74           116 116 116 116
3343: 6 13495 : 74           116 116 116 116
3344: 6 13501 : 74           116 116 116 116
3345: 6 13507 : 74           116 116 116 116
3346: 6 13513 : 74           116 116 116 116
3347: 6 13519 : 74           116 116 116 116
3348: 6 13525 : 74           116 116 116 116
3349: 6 13531 : 74           116 116 116 116
334a: 6 13537 : 58           88 88 88 88
334b: 6 13543 : 58           88 88 88 88
334c: 6 13549 : 58           88 88 88 88
334d: 6 13555 : 58           88 88 88 88
334e: 6 13561 : 58           88 88 88 88
334f: 6 13567 : 58           88 88 88 88
3350: 6 13573 : 58           88 88 88 88
3351: 6 13579 : 58           88 88 88 88
3352: 6 13585 : 58           88
3353: 6 13591 : 00           0 0
3354: 6 13597 : 00           0 0
3354: 6 13603 :          l:  dec ball_release_timer
3355: 5 13609 : c6 2e    l:  dec ball_release_timer
3357: 2 13614 : d0 17        bne +r
3359: 6 13616 : 20 11 35     jsr release_ball
3359: 6 13622 :          ctrl_ball:
335c: 3 13628 : a5 2d        lda caught_ball
335e: 2 13631 : 10 f5        bpl -l
3360: 3 13633 : a4 3d        ldy ball_speed
3360: 3 13636 :          l:  tya
3362: 2 13639 : 98       l:  tya
3363: 3 13641 : 48           pha
3364: 6 13644 : 20 73 33     jsr ctrl_ball_subpixel
3367: 4 13650 : b5 79        lda sprites_i,x
3369: 2 13654 : 30 06        bmi +e              ; Ball sprite has been removed…
336b: 4 13656 : 68           pla
336c: 2 13660 : a8           tay
336d: 2 13662 : 88           dey
336e: 2 13664 : d0 f2        bne -l
336e: 2 13666 :          r:  rts
3370: 6 13668 : 60       r:  rts
3370: 6 13674 :          e:  pla
3371: 4 13680 : 68       e:  pla
3372: 6 13684 : 60           rts
3372: 6 13690 :          ctrl_ball_subpixel:
3373: 2 13696 : a9 00        lda #0
3375: 3 13698 : 85 4c        sta has_hit_vaus
3377: 4 13701 : b5 69        lda sprites_y,x
3379: 2 13705 : c9 e4        cmp #@(- vaus_y ball_height -1)
337b: 2 13707 : 90 63        bcc no_vaus_hit
337d: 2 13709 : c9 f0        cmp #@(+ vaus_y 8)
337f: 2 13711 : b0 5f        bcs no_vaus_hit
3381: 4 13713 : b4 59        ldy sprites_x,x
3383: 2 13717 : c8           iny
3384: 3 13719 : 84 1b        sty tmp
3386: 3 13722 : a4 68        ldy @(+ sprites_x (-- num_sprites))     ; Vaus position left.
3388: 2 13725 : 88           dey                 ; Allow one pixel off to the left.
3389: 3 13727 : 84 1c        sty tmp2
338b: 3 13730 : c4 1b        cpy tmp
338d: 2 13733 : b0 51        bcs +no_vaus_hit
338d: 2 13735 :          h:  lda tmp2
338f: 3 13737 : a5 1c    h:  lda tmp2
3391: 2 13740 : 18           clc
3392: 2 13742 : 69 01        adc #1              ; Allow a pixel off to the right as well.
3394: 3 13744 : 65 30        adc vaus_width
3396: 3 13747 : c5 1b        cmp tmp
3398: 2 13750 : 90 46        bcc +no_vaus_hit
339a: 5 13752 : e6 4c        inc has_hit_vaus
339c: 3 13757 : a5 1b        lda tmp
339e: 2 13760 : 38           sec
339f: 3 13762 : e5 1c        sbc tmp2
33a1: 2 13765 : a8           tay
33a2: 2 13767 : a9 10        lda #16
33a4: 3 13769 : c5 30        cmp vaus_width
33a6: 2 13772 : 90 06        bcc +n
33a8: 4 13774 : b9 1d 33     lda vaus_directions,y
33ab: 4 13778 : 4c b1 33     jmp +m
33ab: 4 13782 :          n:  lda vaus_directions_extended,y
33ae: 4 13786 : b9 31 33 n:  lda vaus_directions_extended,y
33ae: 4 13790 :          m:  sta sprites_d,x
33b1: 4 13794 : 95 d9    m:  sta sprites_d,x
33b3: 2 13798 : a9 e3        lda #@(- vaus_y ball_height)
33b5: 4 13800 : 95 69        sta sprites_y,x
33b7: 2 13804 : a9 00        lda #0
33b9: 3 13806 : 85 2f        sta reflections_since_last_vaus_hit
33bb: 3 13809 : a5 29        lda mode
33bd: 2 13812 : c9 02        cmp #mode_catching
33bf: 2 13814 : d0 16        bne +n
33c1: 3 13816 : 86 2d        stx caught_ball
33c3: 2 13819 : a9 40        lda #<ball_caught
33c5: 4 13821 : 95 99        sta sprites_l,x
33c7: 2 13825 : a9 e0        lda #@(* 28 8)
33c9: 4 13827 : 95 69        sta sprites_y,x
33cb: 6 13831 : 20 08 34     jsr applied_reflection
33ce: 2 13837 : a9 80        lda #delay_until_ball_is_released
33d0: 3 13839 : 85 2e        sta ball_release_timer
33d2: 2 13842 : a9 0a        lda #snd_caught_ball
33d4: 4 13844 : 4c 1c 2e     jmp play_sound
33d4: 4 13848 :          n:  jmp applied_reflection
33d7: 4 13852 : 4c 08 34 n:  jmp applied_reflection
33d7: 4 13856 :          m:  jsr avoid_endless_flight
33da: 6 13860 : 20 57 34 m:  jsr avoid_endless_flight
33dd: 4 13866 : 4c 1d 34     jmp move_ball
33dd: 4 13870 :          no_vaus_hit:
33e0: 2 13874 : a9 00        lda #0
33e2: 3 13876 : 85 2c        sta side_degrees
33e4: 3 13879 : 85 45        sta has_collision
33e6: 3 13882 : 85 4a        sta has_hit_brick
33e8: 6 13885 : 20 ee 30     jsr reflect
33eb: 3 13891 : a5 45        lda has_collision
33ed: 2 13894 : f0 eb        beq -m
33ef: 3 13896 : a5 4a        lda has_hit_brick
33f1: 2 13899 : f0 10        beq hit_solid
33f3: 2 13901 : a9 00        lda #0
33f5: 3 13903 : 85 2f        sta reflections_since_last_vaus_hit
33f7: 3 13906 : a5 29        lda mode
33f9: 2 13909 : c9 03        cmp #mode_disruption    ; No bonuses in disruption mode.
33fb: 2 13911 : f0 08        beq do_apply_reflection
33fd: 6 13913 : 20 ae 36     jsr make_bonus
3400: 4 13919 : 4c 05 34     jmp do_apply_reflection
3400: 4 13923 :          hit_solid:
3403: 5 13927 : e6 2f        inc reflections_since_last_vaus_hit
3403: 5 13932 :          do_apply_reflection:
3405: 6 13937 : 20 2b 31     jsr apply_reflection
3405: 6 13943 :          applied_reflection:
3408: 3 13949 : a5 4a        lda has_hit_brick
340a: 3 13952 : 05 4c        ora has_hit_vaus
340c: 2 13955 : f0 0f        beq +move_ball
340e: 3 13957 : a5 41        lda snd_reflection
3410: 2 13960 : d0 09        bne +n
3412: 3 13962 : a5 40        lda sfx_reflection
3414: 2 13965 : 29 01        and #1
3416: 2 13967 : 18           clc
3417: 2 13969 : 69 07        adc #snd_reflection_low
3419: 3 13971 : 85 41        sta snd_reflection
3419: 3 13974 :          n:  inc sfx_reflection
341b: 5 13977 : e6 40    n:  inc sfx_reflection
341b: 5 13982 :          move_ball:
341d: 6 13987 : 20 73 34     jsr ball_step
3420: 6 13993 : 20 73 34     jsr ball_step
3423: 4 13999 : b5 69        lda sprites_y,x
3425: 2 14003 : c9 fc        cmp #@(- (* 8 screen_rows) 4)
3427: 2 14005 : 90 1a        bcc play_reflection_sound
3429: 5 14007 : c6 3a        dec balls
342b: 2 14012 : d0 09        bne still_balls_left
342d: 2 14014 : a9 00        lda #0
342f: 3 14016 : 85 3b        sta is_running_game
3431: 2 14019 : a9 0b        lda #snd_miss
3433: 4 14021 : 4c 1c 2e     jmp play_sound
3433: 4 14025 :          still_balls_left:
3436: 3 14029 : a5 3a        lda balls
3438: 2 14032 : c9 01        cmp #1
343a: 2 14034 : d0 04        bne +r
343c: 2 14036 : a9 00        lda #0              ; Reset from disruption bonus.
343e: 3 14038 : 85 29        sta mode
343e: 3 14041 :          r:  jmp remove_sprite
3440: 4 14044 : 4c 88 2a r:  jmp remove_sprite
3440: 4 14048 :          play_reflection_sound:
3443: 3 14052 : a5 4a        lda has_hit_brick
3445: 3 14055 : 05 4b        ora has_hit_golden_brick
3447: 3 14058 : 05 4c        ora has_hit_vaus
3449: 2 14061 : f0 0b        beq +n
344b: 3 14063 : a5 41        lda snd_reflection
344d: 2 14066 : f0 07        beq +n
344f: 2 14068 : a2 00        ldx #0
3451: 3 14070 : 86 41        stx snd_reflection
3453: 4 14073 : 4c 1c 2e     jmp play_sound
3453: 4 14077 :          n:  rts
3456: 6 14081 : 60       n:  rts
3456: 6 14087 :          avoid_endless_flight:
3457: 3 14093 : a5 2f        lda reflections_since_last_vaus_hit
3459: 2 14096 : c9 20        cmp #32
345b: 2 14098 : 90 15        bcc +r
345d: 4 14100 : b5 d9        lda sprites_d,x
345f: 2 14104 : 29 20        and #%00100000
3461: 2 14106 : d0 08        bne +n
3463: 4 14108 : b5 d9        lda sprites_d,x
3465: 2 14112 : 18           clc
3466: 2 14114 : 69 08        adc #8
3468: 4 14116 : 95 d9        sta sprites_d,x
346a: 6 14120 : 60           rts
346a: 6 14126 :          n:  lda sprites_d,x
346b: 4 14132 : b5 d9    n:  lda sprites_d,x
346d: 2 14136 : 38           sec
346e: 2 14138 : e9 08        sbc #8
3470: 4 14140 : 95 d9        sta sprites_d,x
3470: 4 14144 :          r:  rts
3472: 6 14148 : 60       r:  rts
3472: 6 14154 :          ball_step:
3473: 4 14160 : b4 d9        ldy sprites_d,x
3475: 4 14164 : b9 a0 24     lda ball_directions_x,y
3478: 2 14168 : 30 0e        bmi +m
347a: 4 14170 : bd 00 02     lda sprites_dx,x
347d: 2 14174 : 18           clc
347e: 4 14176 : 79 a0 24     adc ball_directions_x,y
3481: 2 14180 : 90 14        bcc +n
3483: 6 14182 : f6 59        inc sprites_x,x
3485: 4 14188 : 4c 97 34     jmp +n
3485: 4 14192 :          m:  jsr neg
3488: 6 14196 : 20 cf 29 m:  jsr neg
348b: 3 14202 : 85 1b        sta tmp
348d: 4 14205 : bd 00 02     lda sprites_dx,x
3490: 2 14209 : 38           sec
3491: 3 14211 : e5 1b        sbc tmp
3493: 2 14214 : b0 02        bcs +n
3495: 6 14216 : d6 59        dec sprites_x,x
3495: 6 14222 :          n:  sta sprites_dx,x
3497: 4 14228 : 9d 00 02 n:  sta sprites_dx,x
349a: 4 14232 : b9 a0 25     lda ball_directions_y,y
349d: 2 14236 : 30 0e        bmi +m
349f: 4 14238 : bd 10 02     lda sprites_dy,x
34a2: 2 14242 : 18           clc
34a3: 4 14244 : 79 a0 25     adc ball_directions_y,y
34a6: 2 14248 : 90 14        bcc +n
34a8: 6 14250 : f6 69        inc sprites_y,x
34aa: 4 14256 : 4c bc 34     jmp +n
34aa: 4 14260 :          m:  jsr neg
34ad: 6 14264 : 20 cf 29 m:  jsr neg
34b0: 3 14270 : 85 1b        sta tmp
34b2: 4 14273 : bd 10 02     lda sprites_dy,x
34b5: 2 14277 : 38           sec
34b6: 3 14279 : e5 1b        sbc tmp
34b8: 2 14282 : b0 02        bcs +n
34ba: 6 14284 : d6 69        dec sprites_y,x
34ba: 6 14290 :          n:  sta sprites_dy,x
34bc: 4 14296 : 9d 10 02 n:  sta sprites_dy,x
34bf: 6 14300 : 60           rts
34bf: 6 14306 :          make_ball:
34c0: 2 14312 : a0 09        ldy #@(- ball_init sprite_inits)
34c2: 6 14314 : 20 66 2a     jsr add_sprite
34c5: 3 14320 : 85 2d        sta caught_ball
34c7: 2 14323 : aa           tax
34c8: 2 14325 : a9 46        lda #70
34ca: 4 14327 : 95 59        sta sprites_x,x
34cc: 2 14331 : a9 e0        lda #@(* 28 8)
34ce: 4 14333 : 95 69        sta sprites_y,x
34d0: 2 14337 : a9 40        lda #<ball_caught
34d2: 4 14339 : 95 99        sta sprites_l,x
34d4: 2 14343 : a9 74        lda #default_ball_direction
34d6: 4 14345 : 95 d9        sta sprites_d,x
34d8: 2 14349 : a9 a0        lda #initial_delay_until_ball_is_released
34da: 3 14351 : 85 2e        sta ball_release_timer
34dc: 6 14354 : 60           rts
34dc: 6 14360 :          ball_accelerations_after_brick_hits:
34dd: 6 14366 : 00           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34de: 6 14372 : 0a           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34df: 6 14378 : 0f           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34e0: 6 14384 : 14           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34e1: 6 14390 : 1e           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34e2: 6 14396 : 28           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34e3: 6 14402 : 37           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34e4: 6 14408 : 50           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34e5: 6 14414 : 6e           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34e6: 6 14420 : 87           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34e7: 6 14426 : a0           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34e8: 6 14432 : b9           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34e9: 6 14438 : d2           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34ea: 6 14444 : e6           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34eb: 6 14450 : f5           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34ec: 6 14456 : ff           $00 $0a $0f $14 $1e $28 $37 $50 $6e $87 $a0 $b9 $d2 $e6 $f5 $ff ; TODO: Check if $ff really terminates.
34ec: 6 14462 :          adjust_ball_speed:
34ed: 2 14468 : a0 00        ldy #0
34ed: 2 14470 :          l:  lda ball_accelerations_after_brick_hits,y
34ef: 4 14472 : b9 dd 34 l:  lda ball_accelerations_after_brick_hits,y
34f2: 2 14476 : c9 ff        cmp #$ff
34f4: 2 14478 : f0 1a        beq +n
34f6: 3 14480 : c5 4d        cmp num_brick_hits
34f8: 2 14483 : f0 04        beq +l
34fa: 2 14485 : c8           iny
34fb: 4 14487 : 4c ef 34     jmp -l
34fb: 4 14491 :          l:  lda ball_speed
34fe: 3 14495 : a5 3d    l:  lda ball_speed
3500: 3 14498 : a4 3f        ldy is_using_paddle
3502: 2 14501 : d0 06        bne +m
3504: 2 14503 : c9 03        cmp #max_ball_speed_joystick
3506: 2 14505 : b0 08        bcs +n
3508: 2 14507 : 90 04        bcc +l
3508: 2 14509 :          m:  cmp #max_ball_speed
350a: 2 14511 : c9 06    m:  cmp #max_ball_speed
350c: 2 14513 : b0 02        bcs +n                  ; Already at maximum speed. Do nothing…
350c: 2 14515 :          l:  inc ball_speed          ; Play the blues…
350e: 5 14517 : e6 3d    l:  inc ball_speed          ; Play the blues…
350e: 5 14522 :          n:  rts
3510: 6 14527 : 60       n:  rts
3510: 6 14533 :          release_ball:
3511: 3 14539 : a4 2d        ldy caught_ball
3513: 4 14542 : b9 59 00     lda sprites_x,y
3516: 2 14546 : c9 6d        cmp #@(- (* (-- screen_columns) 8) 3)
3518: 2 14548 : 90 05        bcc +n
351a: 2 14550 : a9 6d        lda #@(- (* (-- screen_columns) 8) 3)
351c: 4 14552 : 99 59 00     sta sprites_x,y                                                                                               
351c: 4 14556 :          n:  cmp #7
351f: 2 14560 : c9 07    n:  cmp #7
3521: 2 14562 : b0 05        bcs +n
3523: 2 14564 : a9 08        lda #8
3525: 4 14566 : 99 59 00     sta sprites_x,y                                                                                               
3525: 4 14570 :          n:
3528: 2 14574 : a9 ff        lda #255
352a: 3 14576 : 85 2d        sta caught_ball
352c: 2 14579 : a9 07        lda #snd_reflection_low
352e: 6 14581 : 20 1c 2e     jsr play_sound
3531: 2 14587 : a9 00        lda #0
3533: 3 14589 : 85 40        sta sfx_reflection
3535: 6 14592 : 60           rts
3535: 6 14598 :          bonus_colors:
3536: 6 14604 : 0f           @(+ multicolor yellow)
3537: 6 14610 : 0e           @(+ multicolor blue)
3538: 6 14616 : 0d           @(+ multicolor green)
3539: 6 14622 : 0f           @(+ multicolor yellow)
353a: 6 14628 : 0c           @(+ multicolor purple)
353b: 6 14634 : 0b           @(+ multicolor cyan)
353c: 6 14640 : 09           @(+ multicolor white)
353c: 6 14646 :          bonus_probabilities:    ; TODO: Use this.
353d: 6 14652 : 07           $07 $df $3d $b9 $1b $5e   ; S C E D L B – P ???
353e: 6 14658 : df           $07 $df $3d $b9 $1b $5e   ; S C E D L B – P ???
353f: 6 14664 : 3d           $07 $df $3d $b9 $1b $5e   ; S C E D L B – P ???
3540: 6 14670 : b9           $07 $df $3d $b9 $1b $5e   ; S C E D L B – P ???
3541: 6 14676 : 1b           $07 $df $3d $b9 $1b $5e   ; S C E D L B – P ???
3542: 6 14682 : 5e           $07 $df $3d $b9 $1b $5e   ; S C E D L B – P ???
3542: 6 14688 :          ctrl_bonus:
3543: 4 14694 : b5 69        lda sprites_y,x
3545: 2 14698 : f0 50        beq +r              ; Bonus left playfield…
3547: 6 14700 : 20 df 2a     jsr find_hit
354a: 2 14706 : b0 4e        bcs +m              ; Nothing hit…
354c: 4 14708 : b9 79 00     lda sprites_i,y
354f: 2 14712 : 29 01        and #is_vaus
3551: 2 14714 : f0 47        beq +m              ; Didn't hit the Vaus…
3553: 4 14716 : b5 d9        lda sprites_d,x
3555: 3 14720 : 85 2b        sta current_bonus
3557: 2 14723 : a0 3f        ldy #@(- score_1000 scores)
3559: 6 14725 : 20 68 30     jsr add_to_score
355c: 3 14731 : a5 2d        lda caught_ball
355e: 2 14734 : 30 03        bmi +n
3560: 6 14736 : 20 11 35     jsr release_ball
3560: 6 14742 :          n:
3563: 3 14748 : a5 29        lda mode
3565: 2 14751 : c9 04        cmp #mode_extended
3567: 2 14753 : d0 19        bne +n
3569: 2 14755 : 8a           txa
356a: 3 14757 : 48           pha
356b: 2 14760 : a2 0f        ldx #spriteidx_vaus
356d: 2 14762 : a9 00        lda #<vaus
356f: 4 14764 : 95 99        sta sprites_l,x
3571: 2 14768 : a9 0a        lda #10
3573: 4 14770 : 95 c9        sta sprites_dimensions,x
3575: 4 14774 : b5 59        lda sprites_x,x
3577: 2 14778 : 18           clc
3578: 2 14780 : 69 04        adc #4
357a: 4 14782 : 95 59        sta sprites_x,x
357c: 2 14786 : a9 10        lda #16
357e: 3 14788 : 85 30        sta vaus_width
3580: 4 14791 : 68           pla
3581: 2 14795 : aa           tax
3581: 2 14797 :          n:
3582: 2 14799 : a9 00        lda #0
3584: 3 14801 : 85 29        sta mode
3586: 4 14804 : b4 d9        ldy sprites_d,x
3588: 4 14808 : b9 9f 35     lda bonus_funs_l,y
358b: 4 14812 : 8d 95 35     sta @(+ +selfmod 1)
358e: 4 14816 : b9 a6 35     lda bonus_funs_h,y
3591: 4 14820 : 8d 96 35     sta @(+ +selfmod 2)
3591: 4 14824 :          selfmod:
3594: 6 14828 : 20 34 12     jsr $1234
3594: 6 14834 :          r:  jmp remove_sprite
3597: 4 14840 : 4c 88 2a r:  jmp remove_sprite
3597: 4 14844 :          m:  lda #1
359a: 2 14848 : a9 01    m:  lda #1
359c: 4 14850 : 4c bf 2a     jmp sprite_down
359c: 4 14854 :          bonus_funs_l:
359d: 4 14858 : ad           <apply_bonus_l
359e: 4 14862 : b2           <apply_bonus_e
359f: 4 14866 : de           <apply_bonus_c
35a0: 4 14870 : e3           <apply_bonus_s
35a1: 4 14874 : ec           <apply_bonus_b
35a2: 4 14878 : 06           <apply_bonus_d
35a3: 4 14882 : 3a           <apply_bonus_p
35a3: 4 14886 :          bonus_funs_h:
35a4: 4 14890 : 35           >apply_bonus_l
35a5: 4 14894 : 35           >apply_bonus_e
35a6: 4 14898 : 35           >apply_bonus_c
35a7: 4 14902 : 35           >apply_bonus_s
35a8: 4 14906 : 35           >apply_bonus_b
35a9: 4 14910 : 36           >apply_bonus_d
35aa: 4 14914 : 36           >apply_bonus_p
35aa: 4 14918 :          apply_bonus_l:
35ad: 2 14922 : a9 01        lda #mode_laser
35af: 3 14924 : 85 29        sta mode
35b1: 6 14927 : 60           rts
35b1: 6 14933 :          apply_bonus_e:
35b2: 2 14939 : a0 0f        ldy #spriteidx_vaus
35b4: 4 14941 : b9 59 00     lda sprites_x,y
35b7: 2 14945 : 38           sec
35b8: 2 14947 : e9 04        sbc #4
35ba: 4 14949 : 99 59 00     sta sprites_x,y
35bd: 2 14953 : a9 10        lda #<vaus_extended
35bf: 4 14955 : 99 99 00     sta sprites_l,y
35c2: 2 14959 : a9 0b        lda #11
35c4: 4 14961 : 99 c9 00     sta sprites_dimensions,y
35c7: 2 14965 : c9 ff        cmp #255
35c9: 2 14967 : d0 06        bne +n
35cb: 6 14969 : 20 9b 36     jsr remove_bonuses  ; No slots left, last resort.
35ce: 4 14975 : 4c b2 35     jmp apply_bonus_e
35ce: 4 14979 :          n:  lda #mode_extended
35d1: 2 14983 : a9 04    n:  lda #mode_extended
35d3: 3 14985 : 85 29        sta mode
35d5: 2 14988 : a9 18        lda #24
35d7: 3 14990 : 85 30        sta vaus_width
35d9: 2 14993 : a9 0e        lda #snd_growing_vaus
35db: 4 14995 : 4c 1c 2e     jmp play_sound
35db: 4 14999 :          apply_bonus_c:
35de: 2 15003 : a9 02        lda #mode_catching
35e0: 3 15005 : 85 29        sta mode
35e2: 6 15008 : 60           rts
35e2: 6 15014 :          apply_bonus_s:
35e3: 2 15020 : a9 02        lda #min_ball_speed
35e5: 3 15022 : 85 3d        sta ball_speed
35e7: 2 15025 : a9 00        lda #0              ; Time acceleration back to default.
35e9: 3 15027 : 85 4d        sta num_brick_hits
35eb: 6 15030 : 60           rts
35eb: 6 15036 :          apply_bonus_b:
35ec: 5 15042 : e6 2a        inc mode_break
35ee: 2 15047 : a9 0e        lda #14
35f0: 3 15049 : 85 0a        sta scrx
35f2: 2 15052 : a9 1c        lda #28
35f4: 3 15054 : 85 0b        sta scry
35f4: 3 15057 :          l:  jsr scrcoladdr
35f6: 6 15060 : 20 57 29 l:  jsr scrcoladdr
35f9: 2 15066 : a9 00        lda #0
35fb: 5 15068 : 91 06        sta (scr),y
35fd: 5 15073 : e6 0b        inc scry
35ff: 3 15078 : a5 0b        lda scry
3601: 2 15081 : c9 1f        cmp #31
3603: 2 15083 : d0 f1        bne -l
3605: 6 15085 : 60           rts
3605: 6 15091 :          apply_bonus_d:
3606: 6 15097 : 20 9b 36     jsr remove_bonuses
3609: 2 15103 : a0 0f        ldy #@(-- num_sprites)
3609: 2 15105 :          l:  lda sprites_i,y
360b: 4 15107 : b9 79 00 l:  lda sprites_i,y
360e: 2 15111 : 29 08        and #is_ball
3610: 2 15113 : d0 03        bne +f
3612: 2 15115 : 88           dey
3613: 2 15117 : 10 f6        bpl -l
3613: 2 15119 :          f:  lda sprites_x,y                     ; Copy coordinates of current ball.
3615: 4 15121 : b9 59 00 f:  lda sprites_x,y                     ; Copy coordinates of current ball.
3618: 4 15125 : 8d 0a 27     sta @(+ ball_init sprite_init_x)
361b: 4 15129 : b9 69 00     lda sprites_y,y
361e: 4 15133 : 8d 0b 27     sta @(+ ball_init sprite_init_y)
3621: 4 15137 : b9 d9 00     lda sprites_d,y
3624: 4 15141 : 8d 12 27     sta @(+ ball_init sprite_init_data)
3627: 2 15145 : a0 09        ldy #@(- ball_init sprite_inits)
3629: 6 15147 : 20 66 2a     jsr add_sprite
362c: 2 15153 : a0 09        ldy #@(- ball_init sprite_inits)
362e: 6 15155 : 20 66 2a     jsr add_sprite
3631: 5 15161 : e6 3a        inc balls
3633: 5 15166 : e6 3a        inc balls
3635: 2 15171 : a9 03        lda #mode_disruption
3637: 3 15173 : 85 29        sta mode
3639: 6 15176 : 60           rts
3639: 6 15182 :          apply_bonus_p:
363a: 2 15188 : a9 03        lda #snd_bonus_life
363c: 6 15190 : 20 1c 2e     jsr play_sound
363f: 5 15196 : e6 39        inc lifes
3641: 4 15201 : 4c c8 2e     jmp draw_lifes
3641: 4 15205 :          rotate_bonus:
3644: 3 15209 : 85 00        sta s
3646: 3 15212 : 86 01        stx @(++ s)
3648: 2 15215 : a0 06        ldy #6
364a: 5 15217 : b1 00        lda (s),y
364c: 3 15222 : 48           pha
364d: 2 15225 : 88           dey
364d: 2 15227 :          l:  lda (s),y
364e: 5 15229 : b1 00    l:  lda (s),y
3650: 2 15234 : c8           iny
3651: 5 15236 : 91 00        sta (s),y
3653: 2 15241 : 88           dey
3654: 2 15243 : 88           dey
3655: 2 15245 : d0 f7        bne -l
3657: 4 15247 : 68           pla
3658: 2 15251 : c8           iny
3659: 5 15253 : 91 00        sta (s),y
3659: 5 15258 :          r:  rts
365b: 6 15263 : 60       r:  rts
365b: 6 15269 :          rotate_bonuses:
365c: 3 15275 : a5 37        lda framecounter
365e: 2 15278 : 4a           lsr
365f: 2 15280 : 90 fa        bcc -r
3661: 2 15282 : 4a           lsr
3662: 2 15284 : 90 1f        bcc +n
3664: 2 15286 : 4a           lsr
3665: 2 15288 : 90 0e        bcc +m
3667: 2 15290 : a9 50        lda #<bonus_l
3669: 2 15292 : a2 21        ldx #>bonus_l
366b: 6 15294 : 20 44 36     jsr rotate_bonus
366e: 2 15300 : a9 58        lda #<bonus_e
3670: 2 15302 : a2 21        ldx #>bonus_e
3672: 4 15304 : 4c 44 36     jmp rotate_bonus
3672: 4 15308 :          m:  lda #<bonus_c
3675: 2 15312 : a9 60    m:  lda #<bonus_c
3677: 2 15314 : a2 21        ldx #>bonus_c
3679: 6 15316 : 20 44 36     jsr rotate_bonus
367c: 2 15322 : a9 68        lda #<bonus_s
367e: 2 15324 : a2 21        ldx #>bonus_s
3680: 4 15326 : 4c 44 36     jmp rotate_bonus
3680: 4 15330 :          n:  lsr
3683: 2 15334 : 4a       n:  lsr
3684: 2 15336 : 90 0e        bcc +m
3686: 2 15338 : a9 70        lda #<bonus_b
3688: 2 15340 : a2 21        ldx #>bonus_b
368a: 6 15342 : 20 44 36     jsr rotate_bonus
368d: 2 15348 : a9 78        lda #<bonus_d
368f: 2 15350 : a2 21        ldx #>bonus_d
3691: 4 15352 : 4c 44 36     jmp rotate_bonus
3691: 4 15356 :          m:  lda #<bonus_p
3694: 2 15360 : a9 80    m:  lda #<bonus_p
3696: 2 15362 : a2 21        ldx #>bonus_p
3698: 4 15364 : 4c 44 36     jmp rotate_bonus
3698: 4 15368 :          remove_bonuses:
369b: 2 15372 : 8a           txa
369c: 3 15374 : 48           pha
369d: 2 15377 : a2 0e        ldx #@(- num_sprites 2)
369d: 2 15379 :          l:  lda sprites_i,x
369f: 4 15381 : b5 79    l:  lda sprites_i,x
36a1: 2 15385 : 29 02        and #is_bonus
36a3: 2 15387 : f0 03        beq +n
36a5: 6 15389 : 20 88 2a     jsr remove_sprite
36a5: 6 15395 :          n:  dex
36a8: 2 15401 : ca       n:  dex
36a9: 2 15403 : 10 f4        bpl -l
36ab: 4 15405 : 68           pla
36ac: 2 15409 : aa           tax
36ac: 2 15411 :          r:  rts
36ad: 6 15413 : 60       r:  rts
36ad: 6 15419 :          make_bonus:
36ae: 5 15425 : c6 33        dec bricks_until_bonus
36b0: 2 15430 : d0 fb        bne -r
36b2: 2 15432 : a9 08        lda #8
36b4: 3 15434 : 85 33        sta bricks_until_bonus
36b6: 3 15437 : a5 0a        lda scrx
36b8: 2 15440 : 0a           asl
36b9: 2 15442 : 0a           asl
36ba: 2 15444 : 0a           asl
36bb: 4 15446 : 8d 1c 27     sta @(+ bonus_init sprite_init_x)
36be: 3 15450 : a5 0b        lda scry
36c0: 2 15453 : 0a           asl
36c1: 2 15455 : 0a           asl
36c2: 2 15457 : 0a           asl
36c3: 4 15459 : 8d 1d 27     sta @(+ bonus_init sprite_init_y)
36c3: 4 15463 :          a:  jsr random
36c6: 6 15467 : 20 c2 29 a:  jsr random
36c9: 2 15473 : 29 07        and #%111
36cb: 2 15475 : c9 07        cmp #%111
36cd: 2 15477 : f0 f7        beq -a      ; Only seven bonuses available.
36cf: 3 15479 : c5 2b        cmp current_bonus
36d1: 2 15482 : f0 f3        beq -a
36d3: 4 15484 : 8d 24 27     sta @(+ bonus_init sprite_init_data)
36d6: 2 15488 : a8           tay
36d7: 2 15490 : 0a           asl
36d8: 2 15492 : 0a           asl
36d9: 2 15494 : 0a           asl
36da: 2 15496 : 18           clc
36db: 2 15498 : 69 50        adc #<bonus_l
36dd: 4 15500 : 8d 20 27     sta @(+ bonus_init sprite_init_gfx_l)
36e0: 4 15504 : b9 36 35     lda bonus_colors,y
36e3: 4 15508 : 8d 1f 27     sta @(+ bonus_init sprite_init_color)
36e6: 2 15512 : a0 1b        ldy #@(- bonus_init sprite_inits)
36e8: 4 15514 : 4c 66 2a     jmp add_sprite
36e8: 4 15518 :          control_obstacles:
36eb: 3 15522 : a5 34        lda num_obstacles
36ed: 2 15525 : c9 03        cmp #3
36ef: 2 15527 : f0 10        beq +done
36f1: 3 15529 : a5 37        lda framecounter
36f3: 2 15532 : d0 0c        bne +done
36f5: 2 15534 : a0 24        ldy #@(- obstacle_ball_init sprite_inits)
36f7: 6 15536 : 20 66 2a     jsr add_sprite
36fa: 2 15542 : aa           tax
36fb: 2 15544 : a9 20        lda #32        ; Direction
36fd: 4 15546 : 95 d9        sta sprites_d,x
36ff: 5 15550 : e6 34        inc num_obstacles
36ff: 5 15555 :          done:
3701: 6 15560 : 60           rts
3701: 6 15566 :          ctrl_obstacle:
3702: 4 15572 : b5 69        lda sprites_y,x
3704: 2 15576 : c9 18        cmp #24
3706: 2 15578 : b0 03        bcs +float
3708: 6 15580 : f6 69        inc sprites_y,x
370a: 6 15586 : 60           rts
370a: 6 15592 :          float:
370b: 6 15598 : 20 73 34     jsr ball_step
370e: 6 15604 : 20 73 34     jsr ball_step
3711: 6 15610 : 20 df 2a     jsr find_hit
3714: 2 15616 : b0 0c        bcs +done
3716: 4 15618 : b9 79 00     lda sprites_i,y
3719: 2 15622 : 29 01        and #is_vaus
371b: 2 15624 : f0 05        beq +done
371b: 2 15626 :          remove_obstacle:
371d: 5 15628 : c6 34        dec num_obstacles
371f: 4 15633 : 4c 88 2a     jmp remove_sprite
371f: 4 15637 :          done:
3722: 6 15641 : 60           rts
3722: 6 15647 :          n:
3723: 6 15653 : 60           rts
3723: 6 15659 :          frame_timer_pal = @(- (/ (cpu-cycles :pal) 50) 18)
3723: 6 15665 :          frame_timer_ntsc = @(- (/ (cpu-cycles :ntsc) 50) 158)
3723: 6 15671 :          start_irq:
3724: 2 15677 : a9 00        lda #0
3726: 3 15679 : 85 3b        sta is_running_game
3726: 3 15682 :          l:  lda $9004
3728: 4 15685 : ad 04 90 l:  lda $9004
372b: 2 15689 : d0 fb        bne -l
372d: 2 15691 : a9 58        lda #<irq
372f: 4 15693 : 8d 14 03     sta $314
3732: 2 15697 : a9 37        lda #>irq
3734: 4 15699 : 8d 15 03     sta $315
3737: 2 15703 : a2 86        ldx #<frame_timer_pal
3739: 2 15705 : a0 56        ldy #>frame_timer_pal
373b: 4 15707 : ad e4 ed     lda $ede4
373e: 2 15711 : c9 0c        cmp #$0c
3740: 2 15713 : f0 04        beq +p
3742: 2 15715 : a2 a3        ldx #<frame_timer_ntsc
3744: 2 15717 : a0 4f        ldy #>frame_timer_ntsc
3744: 2 15719 :          p:  stx $9124
3746: 4 15721 : 8e 24 91 p:  stx $9124
3749: 4 15725 : 8c 25 91     sty $9125
374c: 2 15729 : a9 40        lda #%01000000  : free-running
374e: 4 15731 : 8d 2b 91     sta $912b
3751: 2 15735 : a9 c0        lda #%11000000  ; IRQ enable
3753: 4 15737 : 8d 2e 91     sta $912e
3756: 2 15741 : 58           cli
3757: 6 15743 : 60           rts
3757: 6 15749 :          irq:
3757: 6 15755 :          if @*show-cpu?*
3757: 6 15761 :              lda #@(+ 8 3)
3757: 6 15767 :              sta $900f
3757: 6 15773 :          end
3758: 5 15779 : e6 37        inc framecounter
375a: 2 15784 : d0 02        bne +n
375c: 5 15786 : e6 38        inc @(++ framecounter)
375c: 5 15791 :          n:  jsr play_music
375e: 6 15796 : 20 53 70 n:  jsr play_music
3761: 6 15802 : 20 c2 32     jsr set_vaus_color
3764: 3 15808 : a5 3b        lda is_running_game
3766: 2 15811 : f0 11        beq +n
3768: 3 15813 : a5 32        lda bricks_left
376a: 2 15816 : f0 0d        beq +n
376c: 6 15818 : 20 33 2b     jsr call_sprite_controllers
376f: 6 15824 : 20 5c 36     jsr rotate_bonuses
3772: 2 15830 : a9 01        lda #1
3774: 3 15832 : 85 3c        sta has_moved_sprites
3776: 6 15835 : 20 eb 36     jsr control_obstacles
3776: 6 15841 :          n:  lda #$7f        ; Acknowledge IRQ.
3779: 2 15847 : a9 7f    n:  lda #$7f        ; Acknowledge IRQ.
377b: 4 15849 : 8d 2d 91     sta $912d
377b: 4 15853 :          if @*show-cpu?*
377b: 4 15857 :              lda #@(+ 8 2)
377b: 4 15861 :              sta $900f
377b: 4 15865 :          end
377e: 4 15869 : 4c 18 eb     jmp $eb18       ; CBM ROM IRQ return
377e: 4 15873 :          len_round       = 9
377e: 4 15877 :          len_round_chars = 5
377e: 4 15881 :          len_ready       = 5
377e: 4 15885 :          len_ready_chars = 3
377e: 4 15889 :          ofs_round = @(+ (* 15 22) 5)
377e: 4 15893 :          ofs_ready = @(+ (* 15 24) 6)
377e: 4 15897 :          screen_round = @(+ screen ofs_round)
377e: 4 15901 :          screen_ready = @(+ screen ofs_ready)
377e: 4 15905 :          colors_round = @(+ colors ofs_round)
377e: 4 15909 :          colors_ready = @(+ colors ofs_ready)
377e: 4 15913 :          chars_round = @(quarter framechars)
377e: 4 15917 :          chars_ready = @(+ chars_round len_round)
377e: 4 15921 :          charset_round = @(+ charset (* 8 chars_round))
377e: 4 15925 :          charset_ready = @(+ charset (* 8 chars_ready))
377e: 4 15929 :          roundstart:
3781: 2 15933 : a9 10        lda #score_char0
3783: 4 15935 : 8d 21 38     sta @(+ txt_round_nn 7)
3786: 3 15939 : a5 31        lda level
3786: 3 15942 :          l:  sec
3788: 2 15945 : 38       l:  sec
3789: 2 15947 : e9 0a        sbc #10
378b: 2 15949 : 90 06        bcc +n
378d: 6 15951 : ee 21 38     inc @(+ txt_round_nn 7)
3790: 4 15957 : 4c 88 37     jmp -l
3790: 4 15961 :          n:  clc
3793: 2 15965 : 18       n:  clc
3794: 2 15967 : 69 1a        adc #@(+ 10 (char-code #\0) (- score_char0 (char-code #\0)))
3796: 4 15969 : 8d 22 38     sta @(+ txt_round_nn 8)
3797: 4 15973 : 00           0
3798: 4 15977 : 03           c_clrmb <charset_round >charset_round @(* 8 len_round_chars)
3799: 4 15981 : 00           c_clrmb <charset_round >charset_round @(* 8 len_round_chars)
379a: 4 15985 : 15           c_clrmb <charset_round >charset_round @(* 8 len_round_chars)
379b: 4 15989 : 28           c_clrmb <charset_round >charset_round @(* 8 len_round_chars)
379c: 4 15993 : 03           c_clrmb <charset_ready >charset_ready @(* 8 len_ready_chars)
379d: 4 15997 : 48           c_clrmb <charset_ready >charset_ready @(* 8 len_ready_chars)
379e: 4 16001 : 15           c_clrmb <charset_ready >charset_ready @(* 8 len_ready_chars)
379f: 4 16005 : 18           c_clrmb <charset_ready >charset_ready @(* 8 len_ready_chars)
37a0: 4 16009 : 00           0
37a3: 2 16013 : a9 4f        lda #<screen_round
37a5: 3 16015 : 85 02        sta d
37a7: 2 16018 : a9 11        lda #>screen_round
37a9: 3 16020 : 85 03        sta @(++ d)
37ab: 2 16023 : a2 05        ldx #5
37ad: 2 16025 : a9 20        lda #chars_round
37af: 6 16027 : 20 0e 38     jsr make_4x8_line
37b2: 2 16033 : a9 6e        lda #<screen_ready
37b4: 3 16035 : 85 02        sta d
37b6: 2 16038 : a9 11        lda #>screen_ready
37b8: 3 16040 : 85 03        sta @(++ d)
37ba: 2 16043 : a2 03        ldx #3
37bc: 2 16045 : a9 29        lda #chars_ready
37be: 6 16047 : 20 0e 38     jsr make_4x8_line
37c1: 2 16053 : a2 04        ldx #@(half len_round)
37c3: 2 16055 : a9 01        lda #white
37c3: 2 16057 :          l:  sta colors_round,x
37c5: 4 16059 : 9d 4f 95 l:  sta colors_round,x
37c8: 4 16063 : 9d 6e 95     sta colors_ready,x
37cb: 2 16067 : ca           dex
37cc: 2 16069 : 10 f7        bpl -l
37cc: 2 16071 :              txt_round_nnm = @(-- txt_round_nn)
37cd: 2 16073 : 00           0
37ce: 2 16075 : 02           c_setsd <txt_round_nnm >txt_round_nnm <charset_round >charset_round
37cf: 2 16077 : 19           c_setsd <txt_round_nnm >txt_round_nnm <charset_round >charset_round
37d0: 2 16079 : 38           c_setsd <txt_round_nnm >txt_round_nnm <charset_round >charset_round
37d1: 2 16081 : 00           c_setsd <txt_round_nnm >txt_round_nnm <charset_round >charset_round
37d2: 2 16083 : 15           c_setsd <txt_round_nnm >txt_round_nnm <charset_round >charset_round
37d3: 2 16085 : 00           0
37d5: 2 16087 : a2 09        ldx #len_round
37d7: 2 16089 : a0 01        ldy #1
37d9: 6 16091 : 20 39 30     jsr print_string2
37dc: 2 16097 : a9 02        lda #snd_round
37de: 6 16099 : 20 1c 2e     jsr play_sound
37e1: 2 16105 : a2 82        ldx #130
37e1: 2 16107 :          l:  lda $9004
37e3: 4 16109 : ad 04 90 l:  lda $9004
37e6: 2 16113 : 4a           lsr
37e7: 2 16115 : d0 fa        bne -l
37e7: 2 16117 :          n:  lda $9004
37e9: 4 16119 : ad 04 90 n:  lda $9004
37ec: 2 16123 : 4a           lsr
37ed: 2 16125 : d0 fa        bne -n
37ef: 2 16127 : ca           dex
37f0: 2 16129 : d0 f1        bne -l
37f0: 2 16131 :              txt_readym = @(-- txt_ready)
37f1: 2 16133 : 00           0
37f2: 2 16135 : 02           c_setsd <txt_readym >txt_readym <charset_ready >charset_ready
37f3: 2 16137 : 22           c_setsd <txt_readym >txt_readym <charset_ready >charset_ready
37f4: 2 16139 : 38           c_setsd <txt_readym >txt_readym <charset_ready >charset_ready
37f5: 2 16141 : 48           c_setsd <txt_readym >txt_readym <charset_ready >charset_ready
37f6: 2 16143 : 15           c_setsd <txt_readym >txt_readym <charset_ready >charset_ready
37f7: 2 16145 : 00           0
37f9: 2 16147 : a2 05        ldx #len_ready
37fb: 2 16149 : a0 01        ldy #1
37fd: 6 16151 : 20 39 30     jsr print_string2
3800: 6 16157 : 20 3b 2e     jsr wait_sound
3801: 6 16163 : 00           0
3802: 6 16169 : 03           c_clrmb <screen_round >screen_round 5
3803: 6 16175 : 4f           c_clrmb <screen_round >screen_round 5
3804: 6 16181 : 11           c_clrmb <screen_round >screen_round 5
3805: 6 16187 : 05           c_clrmb <screen_round >screen_round 5
3806: 6 16193 : 03           c_clrmb <screen_ready >screen_ready 5
3807: 6 16199 : 6e           c_clrmb <screen_ready >screen_ready 5
3808: 6 16205 : 11           c_clrmb <screen_ready >screen_ready 5
3809: 6 16211 : 05           c_clrmb <screen_ready >screen_ready 5
380a: 6 16217 : 00           0
380d: 6 16223 : 60           rts
380d: 6 16229 :          make_4x8_line:
380e: 2 16235 : a0 00        ldy #0
380e: 2 16237 :          l:  sta (d),y
3810: 5 16239 : 91 02    l:  sta (d),y
3812: 2 16244 : 18           clc
3813: 2 16246 : 69 01        adc #1
3815: 2 16248 : c8           iny
3816: 2 16250 : ca           dex
3817: 2 16252 : d0 f7        bne -l
3819: 6 16254 : 60           rts
3819: 6 16260 :          txt_round_nn:   @(string4x8 "ROUND  XX")
3822: 6 16266 : 32 2f 35 2e 24 00 00 38 38txt_round_nn:   @(string4x8 "ROUND  XX")
3822: 6 16272 :          txt_ready:      @(string4x8 "READY")
3827: 6 16278 : 32 25 21 24 39txt_ready:      @(string4x8 "READY")
3827: 6 16284 :          roundintro:
3827: 6 16290 :          l:  lda #0              ; Fetch joystick status.
3828: 2 16296 : a9 00    l:  lda #0              ; Fetch joystick status.
382a: 4 16298 : 8d 13 91     sta $9113
382d: 4 16302 : ad 11 91     lda $9111
3830: 2 16306 : aa           tax
3831: 2 16308 : 29 20        and #joy_fire
3833: 2 16310 : f0 05        beq +n
3835: 2 16312 : 8a           txa
3836: 2 16314 : 29 10        and #joy_left
3838: 2 16316 : d0 ee        bne -l
3838: 2 16318 :          n:  rts
383a: 6 16320 : 60       n:  rts
383a: 6 16326 :          txt_round_intro:
384d: 6 16332 : 54 48 45 20 45 52 41 20 41 4e 44 20 54 49 4d 45 20 4f 46    "THE ERA AND TIME OF" 1
384e: 6 16338 : 01           "THE ERA AND TIME OF" 1
3863: 6 16344 : 54 48 49 53 20 53 54 4f 52 59 20 49 53 20 55 4e 4b 4e 4f 57 4e    "THIS STORY IS UNKNOWN" 0
3864: 6 16350 : 00           "THIS STORY IS UNKNOWN" 0
3878: 6 16356 : 41 46 54 45 52 20 54 48 45 20 4d 4f 54 48 45 52 53 48 49 50    "AFTER THE MOTHERSHIP" 1
3879: 6 16362 : 01           "AFTER THE MOTHERSHIP" 1
3892: 6 16368 : 22 41 52 4b 41 4e 4f 49 44 22 20 57 41 53 20 44 45 53 54 52 4f 59 45 44 2c    "\"ARKANOID\" WAS DESTROYED," 1
3893: 6 16374 : 01           "\"ARKANOID\" WAS DESTROYED," 1
38a6: 6 16380 : 41 20 53 50 41 43 45 43 52 41 46 54 20 22 56 41 55 53 22    "A SPACECRAFT \"VAUS\"" 1
38a7: 6 16386 : 01           "A SPACECRAFT \"VAUS\"" 1
38be: 6 16392 : 53 43 52 41 4d 42 4c 45 44 20 41 57 41 59 20 46 52 4f 4d 20 49 54 2e    "SCRAMBLED AWAY FROM IT." 0
38bf: 6 16398 : 00           "SCRAMBLED AWAY FROM IT." 0
38cd: 6 16404 : 42 55 54 20 4f 4e 4c 59 20 54 4f 20 42 45    "BUT ONLY TO BE" 1
38ce: 6 16410 : 01           "BUT ONLY TO BE" 1
38e5: 6 16416 : 54 52 41 50 50 45 44 20 49 4e 20 53 50 41 43 45 20 57 41 52 50 45 44    "TRAPPED IN SPACE WARPED" 1
38e6: 6 16422 : 01           "TRAPPED IN SPACE WARPED" 1
38f8: 6 16428 : 42 59 20 53 4f 4d 45 4f 4e 45 2e 2e 2e 2e 2e 2e 2e 2e    "BY SOMEONE........" 0
38f9: 6 16434 : 00           "BY SOMEONE........" 0
38fa: 6 16440 : 00           0
38fa: 6 16446 :          txt_enter:      @(string4x8 "ENTER YOUR INITIALS !") 255
390f: 6 16452 : 25 2e 34 25 32 00 39 2f 35 32 00 29 2e 29 34 29 21 2c 33 00 01txt_enter:      @(string4x8 "ENTER YOUR INITIALS !") 255
3910: 6 16458 : ff       txt_enter:      @(string4x8 "ENTER YOUR INITIALS !") 255
3910: 6 16464 :          txt_hiscore:    @(string4x8 "HIGH ")
3915: 6 16470 : 28 29 27 28 00txt_hiscore:    @(string4x8 "HIGH ")
3915: 6 16476 :          txt_score:      @(string4x8 "SCORE") 255
391a: 6 16482 : 33 23 2f 32 25txt_score:      @(string4x8 "SCORE") 255
391b: 6 16488 : ff       txt_score:      @(string4x8 "SCORE") 255
391b: 6 16494 :          txt_round:      @(string4x8 "ROUND") 255
3920: 6 16500 : 32 2f 35 2e 24txt_round:      @(string4x8 "ROUND") 255
3921: 6 16506 : ff       txt_round:      @(string4x8 "ROUND") 255
3921: 6 16512 :          txt_name:       @(string4x8 "NAME") 255
3925: 6 16518 : 2e 21 2d 25txt_name:       @(string4x8 "NAME") 255
3926: 6 16524 : ff       txt_name:       @(string4x8 "NAME") 255
3926: 6 16530 :          txt_all:        @(string4x8 "ALL") 255
3929: 6 16536 : 21 2c 2c txt_all:        @(string4x8 "ALL") 255
392a: 6 16542 : ff       txt_all:        @(string4x8 "ALL") 255
392a: 6 16548 :          txt_first:      @(string4x8 "1ST") 255
392d: 6 16554 : 11 33 34 txt_first:      @(string4x8 "1ST") 255
392e: 6 16560 : ff       txt_first:      @(string4x8 "1ST") 255
392e: 6 16566 :          txt_second:     @(string4x8 "2ND") 255
3931: 6 16572 : 12 2e 24 txt_second:     @(string4x8 "2ND") 255
3932: 6 16578 : ff       txt_second:     @(string4x8 "2ND") 255
3932: 6 16584 :          txt_third:      @(string4x8 "3RD") 255
3935: 6 16590 : 13 32 24 txt_third:      @(string4x8 "3RD") 255
3936: 6 16596 : ff       txt_third:      @(string4x8 "3RD") 255
3936: 6 16602 :          txt_fourth:     @(string4x8 "4TH") 255
3939: 6 16608 : 14 34 28 txt_fourth:     @(string4x8 "4TH") 255
393a: 6 16614 : ff       txt_fourth:     @(string4x8 "4TH") 255
393a: 6 16620 :          txt_fifth:      @(string4x8 "5TH") 255
393d: 6 16626 : 15 34 28 txt_fifth:      @(string4x8 "5TH") 255
393e: 6 16632 : ff       txt_fifth:      @(string4x8 "5TH") 255
3969: 6 16638 : 57 65 64 2c 20 20 34 20 4a 75 6e 20 31 39 38 36 2c 20 31 36 3a 33 34 20 50 72 6f 67 72 61 6d 6d 65 64 20 42 79 20 59 61 73 75 2e"Wed,  4 Jun 1986, 16:34 Programmed By Yasu."
3969: 6 16644 :          clear_data:
396a: 2 16650 : a9 00        lda #0
396c: 2 16652 : aa           tax
396c: 2 16654 :          l:  cpx #@(-- hiscore)
396d: 2 16656 : e0 f4    l:  cpx #@(-- hiscore)
396f: 2 16658 : b0 02        bcs +n
3971: 4 16660 : 95 00        sta 0,x
3971: 4 16664 :          n:  sta $200,x
3973: 4 16668 : 9d 00 02 n:  sta $200,x
3976: 2 16672 : ca           dex
3977: 2 16674 : d0 f4        bne -l
3979: 6 16676 : 60           rts
3979: 6 16682 :          start:
397a: 2 16688 : a2 ff        ldx #$ff
397c: 2 16690 : 9a           txs
397d: 6 16692 : 20 6a 39     jsr clear_data
3980: 2 16698 : a9 45        lda #<exec_script
3982: 4 16700 : 8d 16 03     sta $316
3985: 2 16704 : a9 27        lda #>exec_script
3987: 4 16706 : 8d 17 03     sta $317
398a: 6 16710 : 20 60 30     jsr init_hiscore
398d: 6 16716 : 20 24 37     jsr start_irq
3990: 2 16722 : a9 00        lda #0
3992: 4 16724 : 8d 2e 70     sta @(++ requested_song)
3995: 2 16728 : a9 03        lda #snd_bonus_life ; Tell that the tape has finished loading.
3997: 6 16730 : 20 1c 2e     jsr play_sound
399a: 6 16736 : 20 3b 2e     jsr wait_sound
399d: 4 16742 : 4c bd 39     jmp restart
399d: 4 16746 :          game_done:
39a0: 2 16750 : a9 0d        lda #snd_doh_dissolving
39a2: 6 16752 : 20 1c 2e     jsr play_sound
39a5: 6 16758 : 20 3b 2e     jsr wait_sound
39a5: 6 16764 :          game_over:
39a8: 2 16770 : a9 00        lda #0
39aa: 3 16772 : 85 3b        sta is_running_game
39ac: 2 16775 : a9 04        lda #snd_game_over
39ae: 6 16777 : 20 1c 2e     jsr play_sound
39b1: 6 16783 : 20 3b 2e     jsr wait_sound
39b4: 3 16789 : a5 51        lda has_hiscore
39b6: 2 16792 : f0 05        beq restart
39b8: 2 16794 : a9 06        lda #snd_hiscore
39ba: 6 16796 : 20 1c 2e     jsr play_sound
39ba: 6 16802 :          restart:
39bd: 6 16808 : 20 6a 39     jsr clear_data
39bd: 6 16814 :          if @(not *shadowvic?*)
39c0: 6 16820 : 20 28 38     jsr roundintro
39c0: 6 16826 :          end
39c3: 2 16832 : a9 0b        lda #snd_coin
39c5: 6 16834 : 20 1c 2e     jsr play_sound
39c8: 6 16840 : 20 3b 2e     jsr wait_sound
39cb: 6 16846 : 20 d5 29     jsr init_game_mode
39ce: 4 16852 : ad 08 90     lda $9008
39d1: 3 16856 : 85 42        sta old_paddle_value
39d3: 2 16859 : a9 03        lda #default_num_lifes
39d5: 3 16861 : 85 39        sta lifes
39d7: 6 16864 : 20 58 30     jsr init_score
39da: 2 16870 : a9 a5        lda #<level_data
39dc: 3 16872 : 85 19        sta current_level
39de: 2 16875 : a9 3a        lda #>level_data
39e0: 3 16877 : 85 1a        sta @(++ current_level)
39e0: 3 16880 :          next_level:
39e2: 6 16883 : 20 3b 2e     jsr wait_sound
39e5: 2 16889 : a9 00        lda #0
39e7: 3 16891 : 85 3b        sta is_running_game
39e9: 5 16894 : e6 31        inc level
39eb: 3 16899 : a5 31        lda level
39ed: 2 16902 : c9 22        cmp #34
39ef: 2 16904 : f0 af        beq game_done
39f1: 6 16906 : 20 70 29     jsr clear_screen
39f4: 6 16912 : 20 ef 2e     jsr draw_level
39f7: 6 16918 : 20 81 2f     jsr draw_walls
39fa: 6 16924 : 20 d3 2f     jsr make_score_screen
39fd: 6 16930 : 20 10 30     jsr display_score
39fd: 6 16936 :          retry:
3a00: 2 16942 : a9 00        lda #0
3a02: 3 16944 : 85 3b        sta is_running_game
3a04: 3 16947 : 85 3e        sta is_firing
3a06: 3 16950 : 85 29        sta mode
3a08: 3 16953 : 85 2a        sta mode_break
3a0a: 3 16956 : 85 2f        sta reflections_since_last_vaus_hit
3a0c: 3 16959 : 85 41        sta snd_reflection
3a0e: 3 16962 : 85 37        sta framecounter
3a10: 3 16965 : 85 38        sta @(++ framecounter)
3a12: 3 16968 : 85 34        sta num_obstacles
3a14: 3 16971 : 85 4d        sta num_brick_hits
3a16: 2 16974 : a9 01        lda #1
3a18: 3 16976 : 85 3a        sta balls
3a1a: 3 16979 : 85 40        sta sfx_reflection
3a1c: 3 16982 : 85 33        sta bricks_until_bonus
3a1e: 2 16985 : a9 03        lda #default_ball_speed
3a20: 3 16987 : 85 3d        sta ball_speed
3a22: 2 16990 : a9 10        lda #16
3a24: 3 16992 : 85 30        sta vaus_width
3a26: 2 16995 : a9 ff        lda #255
3a28: 3 16997 : 85 2b        sta current_bonus
3a2a: 6 17000 : 20 b4 2b     jsr clear_sprites
3a2d: 6 17006 : 20 b3 2a     jsr remove_sprites
3a30: 6 17012 : 20 81 2f     jsr draw_walls      ; Freshen up after mode_break.
3a33: 6 17018 : 20 c8 2e     jsr draw_lifes
3a36: 6 17024 : 20 81 37     jsr roundstart
3a39: 6 17030 : 20 bb 32     jsr make_vaus
3a3c: 6 17036 : 20 c0 34     jsr make_ball
3a3f: 2 17042 : a9 00        lda #0
3a41: 3 17044 : 85 26        sta spriteframe
3a43: 2 17047 : 09 01        ora #first_sprite_char
3a45: 3 17049 : 85 21        sta next_sprite_char
3a47: 6 17052 : 20 4e 2b     jsr draw_sprites
3a4a: 2 17058 : 78           sei
3a4b: 2 17060 : a0 00        ldy #0
3a4d: 3 17062 : 84 37        sty framecounter
3a4f: 3 17065 : 84 38        sty @(++ framecounter)
3a51: 2 17068 : c8           iny
3a52: 3 17070 : 84 3b        sty is_running_game
3a54: 2 17073 : 58           cli
3a54: 2 17075 :          mainloop:
3a55: 3 17077 : a5 32        lda bricks_left
3a57: 2 17080 : d0 06        bne +n
3a59: 6 17082 : 20 4e 2b     jsr draw_sprites
3a5c: 4 17088 : 4c e2 39     jmp next_level
3a5c: 4 17092 :          n:
3a5f: 3 17096 : a5 3b        lda is_running_game
3a61: 2 17099 : d0 0d        bne +n
3a63: 6 17101 : 20 3b 2e     jsr wait_sound
3a63: 6 17107 :          poke_unlimited:
3a66: 5 17113 : c6 39        dec lifes
3a68: 2 17118 : f0 03        beq +o
3a6a: 4 17120 : 4c 00 3a     jmp retry
3a6a: 4 17124 :          o:  jmp game_over
3a6d: 4 17128 : 4c a8 39 o:  jmp game_over
3a6d: 4 17132 :          n:  ; Toggle sprite frame.
3a70: 3 17136 : a5 26        lda spriteframe
3a72: 2 17139 : 49 80        eor #framemask
3a74: 3 17141 : 85 26        sta spriteframe
3a76: 2 17144 : 09 01        ora #first_sprite_char
3a78: 3 17146 : 85 21        sta next_sprite_char
3a78: 3 17149 :          n:  jsr random              ; Improve randomness and avoid CRTC hsync wobble.
3a7a: 6 17152 : 20 c2 29 n:  jsr random              ; Improve randomness and avoid CRTC hsync wobble.
3a7d: 3 17158 : a5 3c        lda has_moved_sprites
3a7f: 2 17161 : f0 f9        beq -n
3a81: 2 17163 : a9 00        lda #0
3a83: 3 17165 : 85 3c        sta has_moved_sprites
3a85: 6 17168 : 20 4e 2b     jsr draw_sprites
3a88: 3 17174 : a5 50        lda has_new_score
3a8a: 2 17177 : f0 c9        beq mainloop
3a8c: 2 17179 : a9 00        lda #0
3a8e: 3 17181 : 85 50        sta has_new_score
3a90: 6 17184 : 20 10 30     jsr display_score
3a93: 4 17190 : 4c 55 3a     jmp mainloop
3a93: 4 17194 :          show_charset:
3a96: 2 17198 : a2 00        ldx #0
3a96: 2 17200 :          l:  txa
3a98: 2 17202 : 8a       l:  txa
3a99: 4 17204 : 9d 22 10     sta @(+ screen 34),x
3a9c: 2 17208 : a9 01        lda #1
3a9e: 4 17210 : 9d 22 94     sta @(+ colors 34),x
3aa1: 2 17214 : ca           dex
3aa2: 2 17216 : d0 f4        bne -l
3aa4: 6 17218 : 60           rts
3aa4: 6 17224 :          level_data: @+level-data+
44ed: 6 17230 : 79 99 99 99 99 99 99 55 55 55 55 55 55 58 88 88 88 88 88 88 66 66 66 66 66 66 67 77 77 77 77 77 77 44 44 44 44 44 44 4f 51 00 00 00 00 00 00 12 00 00 00 00 00 01 23 00 00 00 00 00 12 34 00 00 00 00 01 23 45 00 00 00 00 12 34 56 00 00 00 01 23 45 67 00 00 00 12 34 56 78 00 00 01 23 45 67 81 00 00 12 34 56 78 12 00 01 23 45 67 81 23 00 12 34 56 78 12 34 09 99 99 99 99 99 95 f6 44 44 44 44 44 44 40 00 00 00 00 00 00 11 1a aa aa aa aa a0 00 00 00 00 00 00 55 55 55 55 55 55 50 00 00 00 00 00 00 aa aa aa aa aa 11 10 00 00 00 00 00 00 77 77 77 77 77 77 70 00 00 00 00 00 00 66 6a aa aa aa aa a0 00 00 00 00 00 00 33 33 33 33 33 33 30 00 00 00 00 00 00 aa aa aa aa aa 33 3f 70 23 49 60 81 23 40 03 49 68 01 23 49 00 49 68 10 23 49 60 09 68 12 03 49 67 00 68 12 30 49 67 80 08 12 34 09 67 81 00 12 34 90 67 81 20 02 34 96 07 81 23 00 34 96 70 81 23 40 04 96 78 01 23 49 00 96 78 10 23 49 60 06 78 12 03 49 67 00 78 12 30 49 67 80 08 12 34 09 67 81 0f 50 00 80 00 00 80 00 00 08 00 00 08 00 00 00 08 00 08 00 00 00 00 80 00 80 00 00 00 99 99 99 90 00 00 09 99 99 99 00 00 09 95 99 95 99 00 00 99 59 99 59 90 00 99 99 99 99 99 90 09 99 99 99 99 99 00 99 99 99 99 99 90 09 09 99 99 99 09 00 90 90 00 00 90 90 09 09 00 00 09 09 00 00 09 90 99 00 00 00 00 99 09 90 00 0f 76 05 04 03 04 05 06 60 50 40 30 40 50 66 05 04 03 04 05 06 60 50 40 30 40 50 66 05 04 03 04 05 06 60 a2 a2 a2 a2 a0 66 05 04 03 04 05 06 60 50 40 30 40 50 66 05 04 03 04 05 06 60 50 40 30 40 50 62 02 0a 02 0a 02 02 60 50 40 30 40 50 6f 70 00 00 88 70 00 00 00 00 88 77 60 00 00 00 88 77 66 50 00 00 08 77 66 55 00 00 08 77 66 55 44 00 00 77 66 55 44 30 00 07 66 55 44 33 00 00 66 55 44 33 20 00 06 55 44 33 22 00 00 55 44 33 22 10 00 00 44 33 22 10 00 00 04 33 22 11 00 00 00 03 22 11 00 00 00 00 02 11 00 00 0f 70 00 a0 a0 a0 a0 00 0a 00 00 00 00 0a 00 aa 0a 00 0a 0a a0 00 00 00 10 00 00 00 a0 00 a2 a0 00 a0 00 0a 00 30 0a 00 00 00 00 04 00 00 00 00 0a 00 50 0a 00 00 a0 00 a6 a0 00 a0 00 00 00 70 00 00 00 aa 0a 00 0a 0a a0 0a 00 00 00 00 0a 00 00 a0 a0 a0 a0 00 f5 0a 0a 00 00 0a 0a 00 a4 a0 00 00 a4 a0 0a 3a 00 00 0a 3a 00 aa a0 00 00 aa a0 00 00 00 00 00 00 00 00 07 11 18 00 00 00 00 72 22 80 00 00 00 07 33 38 00 00 00 00 74 44 80 00 00 00 07 55 58 00 00 00 00 76 66 80 00 0f 30 a0 00 00 00 00 00 00 00 00 00 00 00 00 a0 00 00 00 00 00 0a 00 00 00 00 00 00 a0 00 00 00 00 00 0a 00 00 06 00 00 00 a0 00 06 36 00 00 0a 00 06 31 36 00 00 a0 06 31 31 36 00 0a 06 31 39 31 36 00 a0 06 31 31 36 00 0a 00 06 31 36 00 00 a0 00 06 36 00 00 0a 00 00 06 00 00 00 a0 00 00 00 00 00 0a 00 00 00 00 00 00 a0 00 00 00 00 00 0a aa aa aa aa aa af 70 99 99 99 99 99 90 09 00 00 00 00 09 00 90 99 99 99 90 90 09 09 00 00 09 09 00 90 90 99 90 90 90 09 09 09 09 09 09 00 90 90 99 90 90 90 09 09 00 00 09 09 00 90 99 99 99 90 90 09 00 00 00 00 09 00 99 99 99 99 99 90 f7 aa aa aa aa aa aa a0 00 0a 00 00 0a 70 0a 10 a0 00 00 a0 00 a0 0a 00 a0 0a 00 0a 00 a4 0a 00 a0 00 a0 0a 00 a0 0a 00 0a 02 a0 0a 06 a0 00 a0 0a 00 a0 0a 00 0a 00 a0 0a 00 a0 00 a0 0a 05 a0 0a 00 0a 00 a0 0a 00 a0 00 a3 00 00 a0 00 00 0a 00 00 0a 00 00 80 aa aa aa aa aa aa f7 08 88 01 11 08 88 00 77 70 22 20 77 70 06 66 03 33 06 66 00 55 50 44 40 55 50 04 44 05 55 04 44 00 33 30 66 60 33 30 02 22 07 77 02 22 00 11 10 88 80 11 10 f7 66 66 66 66 66 66 6a 00 00 00 00 00 0a 66 66 66 66 66 66 60 00 00 00 00 00 00 29 99 99 99 99 99 2a 00 00 00 00 00 0a 11 11 11 11 11 11 10 00 00 00 00 00 00 39 99 99 99 99 99 3a 00 00 00 00 00 0a 55 55 55 55 55 55 50 00 00 00 00 00 00 55 55 55 55 55 55 5a 00 00 00 00 00 0a f9 31 a3 33 33 33 a1 33 18 a3 33 33 a4 13 31 88 a3 33 a4 41 33 18 88 a1 a4 44 13 31 88 88 14 44 41 33 18 88 81 44 44 13 31 88 88 14 44 41 33 98 88 81 44 44 93 33 98 88 14 44 93 33 33 98 81 44 93 33 33 33 98 14 93 33 33 33 33 91 93 33 33 f7 00 00 00 a0 00 00 00 00 01 10 11 00 00 00 11 00 a0 01 10 01 10 02 20 22 00 11 00 22 00 a0 02 20 02 20 08 80 88 00 22 00 88 00 a0 08 80 08 80 04 40 44 00 88 00 44 00 a0 04 40 04 40 05 50 55 00 44 00 55 00 a0 05 50 05 50 06 60 66 00 55 00 66 00 00 06 60 06 60 00 00 00 00 66 f7 00 00 00 90 00 00 00 00 66 69 44 40 00 00 66 61 11 44 40 00 06 61 11 11 44 00 06 66 11 11 14 44 00 66 61 11 11 44 40 06 66 11 11 14 44 00 90 09 09 09 00 90 00 00 00 90 00 00 00 00 00 09 00 00 00 00 00 00 90 00 00 00 00 0a 0a 00 00 00 00 00 aa a0 00 00 00 00 00 a0 00 00 00 f7 20 a8 88 88 88 a0 22 0a a8 88 88 aa 02 20 a0 a8 88 a0 a0 22 0a 07 a8 a3 0a 02 20 a0 70 90 30 a0 22 0a 07 04 03 0a 02 20 a0 70 40 30 a0 22 0a 07 04 03 0a 02 20 a0 70 40 30 a0 22 aa a7 04 03 aa a2 f7 00 aa aa aa aa a0 00 04 56 7a 76 54 00 00 45 67 a7 65 40 00 04 56 7a 76 54 00 00 45 67 87 65 40 00 04 56 7a 76 54 00 00 45 67 a7 65 40 00 04 56 7a 76 54 00 00 aa aa aa aa a0 0f 7a 1a 2a 3a 4a 5a 6a a7 a9 a9 a9 a9 a8 a0 00 00 00 00 00 00 a7 a0 a0 a0 a0 a0 aa 0a 7a 0a 0a 0a 0a a0 a0 a7 a0 a0 a0 aa 0a 0a 0a 7a 0a 0a a0 a0 a0 a0 a7 a0 a0 00 00 00 00 00 70 00 a0 a0 a0 a7 a0 00 0a 0a 0a 7a 0a 00 00 a0 a7 a0 a0 a0 00 00 7a 0a 0a 00 00 07 00 00 a0 00 00 0f 70 a2 22 22 22 22 a0 0a 00 00 00 00 0a 00 a0 aa aa aa a0 a0 0a 0a 00 00 0a 0a 00 a0 a0 00 00 a0 a0 0a 0a 05 55 0a 0a 00 a0 a0 44 40 a0 a0 0a 0a 06 66 0a 0a 00 a0 a0 11 10 a0 a0 0a 0a 00 00 0a 0a 00 a0 a3 33 33 a0 a0 0a 00 00 00 00 0a 00 a0 00 00 00 00 a0 0a aa aa aa aa aa 0f 78 88 88 88 88 88 88 88 88 88 88 88 88 80 00 00 00 00 00 00 55 a0 a5 55 a0 a5 55 5a 0a 55 5a 0a 55 55 a0 a5 55 a0 a5 55 5a 0a 55 5a 0a 55 00 00 00 00 00 00 01 11 11 11 11 11 11 11 11 11 11 11 11 1f 73 33 33 33 33 33 33 00 00 00 00 00 00 00 09 99 09 99 09 99 00 94 90 94 90 94 90 09 99 09 99 09 99 00 00 00 00 00 00 00 99 90 99 90 99 90 09 59 09 59 09 59 00 99 90 99 90 99 90 00 00 00 00 00 00 09 99 09 99 09 99 00 96 90 96 90 96 90 09 99 09 99 09 99 00 fa 00 00 01 11 00 00 00 00 00 11 10 00 00 00 00 01 11 00 00 00 00 01 11 11 00 00 00 00 16 16 10 00 00 00 16 61 66 10 00 00 06 66 66 66 00 00 06 66 66 66 66 00 00 66 66 66 66 60 00 66 66 66 66 66 60 66 66 66 66 66 66 6f 75 55 55 55 55 55 55 44 44 44 44 44 44 46 66 66 66 66 66 66 aa aa a9 99 aa aa aa 55 5a 00 0a 66 6a a5 55 a0 00 a6 66 aa 00 00 00 00 00 0a a0 00 00 00 00 00 aa 00 0a 44 4a 00 0a a0 00 a4 44 a0 00 aa 99 9a aa aa 99 9a f7 00 a9 99 a0 00 00 00 a0 00 00 a0 00 00 a0 03 33 00 a0 00 0a 04 44 44 0a 00 00 a0 66 66 60 a0 00 0a 00 77 70 0a 00 00 0a 00 00 0a 00 00 00 0a aa aa 00 00 00 fe 99 99 99 99 99 99 98 88 88 88 88 88 88 99 99 99 99 99 99 90 00 00 00 00 00 00 99 99 99 99 99 99 95 55 55 55 55 55 55 99 99 99 99 99 99 9f 66 66 66 66 66 66 66 6a aa a7 a7 aa aa 66 a0 00 00 00 00 a6 6a 70 00 00 00 7a 66 a7 70 00 00 77 a6 6a 77 70 00 77 7a 60 6a 77 70 77 7a 60 00 6a 77 77 7a 60 00 00 6a 77 7a 60 00 00 00 6a 7a 60 00 00 00 00 67 60 00 00 00 00 00 60 00 00 0f 78 88 88 a0 a8 88 88 77 77 7a 0a 77 77 7a a1 aa a0 aa a1 aa 66 66 6a 0a 66 66 65 55 55 60 a5 55 55 44 44 4a 0a 44 44 49 91 99 a0 a9 91 99 33 33 3a 0a 33 33 32 22 22 a0 a2 22 22 11 11 1a 0a 11 11 1f 78 70 00 00 00 00 00 87 65 00 00 00 00 08 76 54 30 00 00 00 87 65 43 21 00 00 08 76 54 32 18 70 00 97 65 43 21 87 65 00 a9 54 32 18 76 54 00 0a 93 21 87 65 40 00 00 a9 18 76 54 00 00 00 0a 97 65 40 00 00 00 00 a9 54 00 00 00 00 00 0a 9f 74 05 06 07 08 01 02 90 90 90 90 90 90 90 60 50 40 30 20 10 09 09 09 09 09 09 03 04 05 06 07 08 01 90 90 90 90 90 90 90 70 60 50 40 30 20 09 09 09 09 09 09 02 03 04 05 06 07 08 90 90 90 90 90 90 90 80 70 60 50 40 30 09 09 09 09 09 09 01 02 03 04 05 06 07 90 90 90 90 90 90 9f 70 0a 0a 0a 0a 0a 00 00 a0 a0 a0 a0 a0 00 0a 0a 0a 0a 44 00 00 a0 a0 a0 a0 a0 00 0a 0a 0a 55 55 00 00 a0 a0 a0 a0 a0 00 0a 0a 66 66 66 00 00 a0 a0 a0 a0 a0 00 0a 77 77 77 77 00 00 a0 a0 a0 a0 a0 00 08 88 88 88 88 00 00 99 99 99 99 90 0f 80 00 77 00 07 70 00 00 77 77 07 77 70 00 07 77 70 77 77 00 07 77 79 97 77 77 00 77 77 99 77 77 70 07 77 77 99 77 77 00 77 77 79 97 77 70 00 77 79 97 77 70 00 07 77 99 77 77 00 00 07 77 99 77 00 00 00 77 79 97 70 00 00 00 79 97 70 00 00 00 00 99 70 00 00 00 00 00 90 00 00 0flevel_data: @+level-data+
44ed: 6 17236 :          loaded_music_player: @(fetch-file "sound.bin")
4e9a: 6 17242 : 00 00 08 10 18 20 28 30 38 40 48 50 58 60 68 70 78 80 88 90 98 a0 a8 b0 b8 c0 c8 d0 d8 e0 e8 f0 f8 00 04 04 08 00 ff 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 00 00 00 00 a9 00 8d 27 70 ae 27 70 bd 21 70 8d 29 70 bd 23 70 8d 2a 70 bd 25 70 8d 28 70 bd 2d 70 c9 ff f0 4b 9d 2b 70 a9 ff 9d 2d 70 ac 2b 70 b9 86 79 85 fe ac 2c 70 b9 86 79 05 fe a0 00 4a b0 03 8c 0a 90 4a b0 03 8c 0b 90 4a b0 03 8c 0c 90 4a b0 03 8c 0d 90 ae 27 70 ac 29 70 a9 00 99 37 70 a9 01 99 47 70 99 3f 70 c8 cc 2a 70 d0 ed bd 2b 70 8d 51 70 d0 03 4c 7a 71 a9 01 8d 52 70 ad 4f 70 f0 15 ce 4f 70 d0 10 ce 0e 90 ad 0e 90 29 0f f0 03 ad 50 70 8d 4f 70 ae 29 70 ac 51 70 b9 86 79 2d 52 70 f0 77 de 3f 70 d0 72 8a 18 79 00 70 a8 2c 28 70 30 0a b9 fe 78 85 fc b9 02 79 10 08 b9 fa 78 85 fc b9 fe 78 f0 53 85 fd bc 37 70 b1 fc c8 c9 77 b0 05 9d 47 70 90 f4 c9 7f b0 27 c9 7e f0 64 c9 7d f0 50 c9 7a f0 57 c9 7b f0 68 c9 79 f0 20 c9 78 f0 6b c9 7c d0 0a 98 9d 2f 70 b1 fc a8 4c 20 71 00 2c 28 70 30 05 9d 0a 90 10 03 9d 06 90 bd 47 70 9d 3f 70 98 9d 37 70 0e 52 70 e8 ec 2a 70 f0 03 4c ec 70 ee 27 70 ad 27 70 c9 02 f0 03 4c 58 70 60 b1 fc 8d 50 70 8d 4f 70 4c a2 71 b1 fc 4c aa 71 ad 0e 90 29 f0 11 fc 8d 0e 90 c8 f0 03 4c 20 71 a9 00 ae 27 70 9d 2d 70 4c 7a 71 bc 2f 70 4c 20 71 7e 08 7d 05 0a 7e 08 df 7f 7e 08 d5 7f 7e 08 df 7f 7e 08 d5 7f 7e 08 df 7f 7e 08 d5 7f 05 7e 08 df 7f 7e 08 d5 7f 7e 08 d9 7f 7e 08 dd 7f 0a 7e 08 df 7f 7e 08 d5 7f 7e 08 df 7f 7e 08 d5 7f 7e 08 df 05 7f 40 7f 7b 06 d5 0a 7f 04 d5 06 df 22 7f 06 e4 01 7f 06 e6 01 7f 06 e7 e6 4a 7f 06 d5 0a 7f 04 d5 06 df 22 7f 05 e7 e6 e4 e7 06 e6 09 7f 40 7f 7b 06 bf 0a 7f 04 bf 06 d5 22 7f 06 d2 01 7f 06 d5 01 7f 06 d9 d5 4a 7f 06 bf 0a 7f 04 bf 06 d5 22 7f 05 d9 d5 d2 d9 06 d5 09 7f 40 7f 7b 7e 08 7d 04 14 7f 06 7e 08 cc 01 7f 06 7e 08 cc 01 7f 05 7e 08 cc 01 7f 0a 7e 08 cc 7f 7e 08 cf 7f 7e 08 d9 7f 05 7e 08 df 7f 7e 08 d5 7f 7e 08 df 7f 7e 08 d5 7f df 0f 7f 7b 06 df 0a 7f 04 df 06 ea 22 7f 06 e7 04 7f 06 e3 04 7f 06 df 04 7f 06 e7 04 7f 06 df 36 7f 7b 06 d5 0a 7f 04 d5 06 db 22 7f 06 d9 04 7f 06 d5 04 7f 06 cf 04 7f 06 d9 04 7f 06 d5 36 7f 7b 7d 00 7e 08 05 db 07 d5 e1 e3 e8 ea ee 7f 7b 7e 08 07 aa c3 c6 d2 d5 dd 0c e3 7b 7e 08 7d 00 64 7f 7b 7e 08 08 ed e8 ea e3 e7 e1 e3 db 04 d5 7f d5 7f d5 7f d5 08 7f 40 7f 7b 7e 08 10 db 08 d2 d5 c6 cf c3 c6 b7 1c aa 40 7f 7b 7e 08 05 df 7f df 7f df 7f df 7f d5 7f ea 7f d5 7f ea 7f d5 7f ea 7f d5 7f ea 5f 7f 02 d5 7f 01 d5 27 7f 7b 7e 08 03 dd 07 7f 03 dd 07 7f 03 dd 07 7f 03 dd 11 7f 03 dd 07 7f 03 dd 11 7f 03 dd 07 7f 03 dd 11 7f 03 dd 07 7f 03 dd 11 7f 03 dd 07 7f 03 dd 16 7f 11 ec 03 7f 02 e8 03 7f 02 e4 03 7f 02 df 03 7f 02 d9 03 7f 02 d2 03 7f 02 d9 03 7f 02 df 03 7f 02 e4 03 7f 02 e8 03 7f 02 ec 03 7f 05 dd 02 7f dd 27 7f 7b 7e 08 03 d5 07 7f 03 d2 07 7f 03 c9 07 7f 03 cf 11 7f 03 d2 07 7f 03 d5 11 7f 03 d2 07 7f 03 d2 11 7f 03 d2 07 7f 03 d2 11 7f 03 d2 07 7f 03 d2 11 7f 03 e8 02 7f 03 e4 02 7f 03 df 02 7f 03 d9 02 7f 03 d2 02 7f 03 c9 02 7f 03 bf 02 7f 03 b3 02 7f 03 a4 02 7f 03 b3 02 7f 03 bf 02 7f 03 c9 02 7f 03 d2 02 7f 03 d9 02 7f 03 df 02 7f 03 e4 02 7f 03 d2 02 7f d2 27 7f 7b 7e 08 7c 0c 7c 4f 7c 0c 7c 0c 7c 02 04 dd 7f dd 7f ee 7f ee 7f dd 7f dd 7f ee 7f ee 7f d9 7f d9 7f ec 7f ec 7f d9 7f d9 7f ec 7f ec 7f d5 7f d5 7f ea 7f ea 7f d5 7f d5 7f ea 7f ea 7f d2 7f d2 7f e8 7f e8 7f d2 7f d2 7f e8 7f e8 03 7f 78 04 dd 7f dd 7f ee 7f ee 7f dd 7f dd 7f ee 7f ee 7f d9 7f d9 7f ec 7f ec 7f d9 7f d9 7f ec 7f ec 7f d5 7f d5 7f ea 7f ea 7f d5 7f d5 7f ea 7f ea 7f d9 7f d9 7f ec 7f ec 7f d9 7f d9 7f ec 7f ec 03 7f 78 7e 08 10 a4 08 b3 bb 05 b3 0b 7f 05 a4 0b 7f 05 b3 0b 7f 05 c3 0b 7f 20 b3 10 aa 08 b3 bb 05 b3 0b 7f 05 aa 0b 7f 05 a4 0d 7f 03 a4 0d 7f 0e a4 0f b3 10 a4 08 b3 bb 05 b3 0b 7f 05 a4 0b 7f 05 b3 0b 7f 05 c3 0b 7f 20 b3 10 bb 08 c3 c6 05 c3 0b 7f 05 bb 0b 7f 05 c3 0b 7f 05 cc 0b 7f 1f c3 02 e1 06 7f 02 e1 16 7f 02 e1 06 7f 02 e1 16 7f 02 e1 06 7f 02 e1 16 7f 02 e1 06 7f 08 d2 cc c3 40 c6 3f c3 02 e1 06 7f 02 e1 16 7f 02 e1 06 7f 02 e1 16 7f 02 e1 06 7f 02 e1 16 7f 02 e1 06 7f 08 d2 cc c3 40 c6 3f c3 7c 02 7e 08 10 bb 08 c3 c6 07 c3 09 7f 07 bb 09 7f 07 c3 09 7f 07 d2 09 7f 20 c3 10 bb 08 c3 c6 07 c3 09 7f 07 bb 09 7f 07 bb 09 7f 07 b7 09 7f 10 bb 0f c3 10 bb 08 c3 c6 07 c3 09 7f 07 bb 09 7f 07 c3 09 7f 07 d2 09 7f 20 c3 10 c6 08 cc d2 07 cc 09 7f 07 c6 09 7f 07 cc 09 7f 07 d9 09 7f 1f cc 04 e1 7f e1 14 7f 04 e1 7f e1 14 7f 04 e1 7f e1 14 7f 04 e1 7f 08 dd d9 cc 74 d2 0b 79 04 e1 7f e1 14 7f 04 e1 7f e1 14 7f 04 e1 7f e1 14 7f 04 e1 7f 08 dd d9 cc 74 d2 0b 79 7c 02 7e 08 02 df 7f 7e 07 02 df 7f 7e 06 02 df 7f 7e 05 02 df 7f 7e 04 02 df 7f 7e 03 02 df 7f 7e 02 02 df 7f 7e 01 02 df 7f 7e 00 02 df 7f 22 7f 7b 7e 08 02 ea 7f 7e 07 02 ea 7f 7e 06 02 ea 7f 7e 05 02 ea 7f 7e 04 02 ea 7f 7e 03 02 ea 7f 7e 02 02 ea 7f 7e 01 02 ea 7f 7e 00 02 ea 7f 22 7f 7b 7e 08 02 ef 7f 7e 07 02 ef 7f 7e 06 02 ef 7f 7e 05 02 ef 7f 7e 04 02 ef 7f 7e 03 02 ef 7f 7e 02 02 ef 7f 7e 01 02 ef 7f 7e 00 02 ef 7f 22 7f 7b 7e 08 02 df 00 7f 7b 7e 08 01 c3 b3 8d 7f 7f 04 7f 7e 07 01 cf b3 a4 7f 7f 04 7f 7e 06 01 cf b3 8d 7f 7f 04 7f 7e 05 01 cf c3 a4 7f 7f 04 7f 7e 03 01 cf b3 a4 7f 7f 04 7f 7e 02 01 c3 b3 8d 7f 7f 04 7f 7e 01 01 c3 a4 8d 7f 7f 02 7f 7b 7e 08 3b 7f 7b 7e 08 02 df e1 7e 07 df e1 7e 06 df e1 7e 05 df e1 7e 04 df e1 7e 03 df e1 7e 02 df 7e 01 e1 df 1d 7f 7b 7e 08 74 7f 74 79 7b 7e 02 02 df e1 df e1 df e1 df e1 7e 03 df e1 df e1 df e1 df e1 df e1 7e 04 df e1 df e1 df e1 df e1 7e 05 df e1 df e1 df e1 df e1 7e 06 df e1 df e1 df e1 df e1 7e 07 df e1 df e1 df e1 df e1 df e1 7e 08 df e1 df e1 df e1 df e1 7e 07 df e1 df e1 df e1 df e1 7e 06 df e1 df e1 df e1 df e1 df e1 7e 05 df e1 df e1 df e1 df e1 df e1 df e1 df e1 df e1 7e 04 df e1 df e1 df e1 7e 03 df e1 df e1 7e 02 df e1 df e1 7e 01 df e1 df e1 df e1 df e1 00 7f 7b 7e 08 02 80 86 8d 93 99 9f a4 aa b3 b7 bb bf c3 01 c6 7b 7e 08 02 7f 04 7f 7f 03 7f 04 7f 7f 01 7f 7b 7e 08 08 7f 7b 7e 08 01 b7 ae 99 8d 7f 7f 7f 7f 00 7f 7b 7e 08 18 7f 7b 7e 08 01 d7 d2 c6 bf 7e 06 ae 99 db d2 cc bf 7e 04 ae a4 db d7 cc bf 7e 02 b7 a4 99 80 7f 7f 7f 7f 00 7f 7b 7e 08 01 d9 d5 c9 c3 b3 9f dd d5 cf c3 b3 aa dd d9 cf c3 bb aa 9f 86 7f 7f 7f 7f 00 7f 7b 7e 08 04 e4 02 e3 03 e1 02 df 03 dd 02 db 03 d9 02 d7 7e 07 03 d5 01 d2 03 cf 02 cc 03 c9 02 c6 03 c3 02 bf 7e 06 03 bb 02 b7 b3 03 ae 02 aa 03 a4 02 9f 03 99 02 7e 05 93 8d 03 86 02 80 03 7f 02 9f 05 a4 aa ae b3 b7 7e 04 04 bb 05 bf 04 c3 05 c6 05 c9 cc cf d2 d5 d7 7e 03 05 d9 db 05 dd df e1 05 e3 e4 7e 02 e6 06 e7 05 e8 ea eb 06 ec 7e 01 08 ed 07 ee 7f 7b 7e 08 04 e3 01 e1 04 df 02 dd db 03 d9 02 d7 d5 03 d2 02 cf 03 cc 02 c9 03 c6 02 c3 03 bf 02 bb 03 b7 02 b3 ae 03 aa 02 a4 03 9f 02 99 93 03 8d 02 86 03 80 02 7f 03 99 04 9f a4 05 aa 04 ae b3 05 b7 04 bb 05 bf 03 c3 05 c6 04 c9 cc cf 05 d2 04 d5 d7 d9 05 db 03 dd 05 df 03 e1 04 e3 05 e4 04 e6 e7 e8 03 ea eb 04 ec 05 ed 03 ee 04 7f 7b b9 00 2d 00 71 72 72 00 5a 94 b3 00 72 72 72 00 00 d2 e1 00 00 72 72 00 ed f4 0c 00 72 72 73 00 1d 41 a7 00 73 73 73 00 21 b3 5d 00 74 74 75 00 00 00 f9 00 00 00 75 00 00 00 29 00 00 00 76 00 00 00 59 00 00 00 76 00 00 00 89 00 00 00 76 00 00 00 00 90 00 00 00 76 00 d7 dc 00 00 76 76 00 00 ff 06 00 00 76 77 00 00 9a ad 00 00 77 77 00 bc c1 00 00 77 77 00 00 cf d4 f8 00 77 77 77 00 00 16 8e 00 00 78 78 00 00 07 07 06 07 07 07 04 04 04 04 08 06 06 06 03 07 06 a9 00 8d 0a 90 8d 0b 90 8d 0c 90 8d 0d 90 8d 2d 70 8d 2e 70 60loaded_music_player: @(fetch-file "sound.bin")
4e9a: 6 17248 :          relocated_end:
